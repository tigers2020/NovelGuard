# NovelGuard ë¦¬íŒ©í† ë§ ê³„íšì„œ

> **í”„ë¡œì íŠ¸**: NovelGuard  
> **ëª©ì **: ì½”ë“œ í’ˆì§ˆ ê°œì„  ë° ìœ ì§€ë³´ìˆ˜ì„± í–¥ìƒ  
> **ê¸°ì¤€**: Clean Architecture + DDD ì›ì¹™  
> **í”„ë¡œí† ì½œ**: `protocols/development_protocol.md` ì¤€ìˆ˜  
> **í˜ë¥´ì†Œë‚˜**: `persona/novelguard_developer.md` ì ìš©

> **ë¶„í• ë³¸(ì‹¤í–‰ìš©)**: `docs/refactoring_plan_v1.4/README.md`

---

## ğŸ“ ë¬¸ì„œ ë²„ì „ ê´€ë¦¬

| ë²„ì „ | ë‚ ì§œ | ë³€ê²½ ë‚´ìš© | ì‘ì„±ì | ê²€í† ì |
|------|------|----------|--------|--------|
| 1.0 | 2025-01-09 | ì´ˆì•ˆ ì‘ì„± | AI Assistant | - |
| 1.1 | 2025-01-09 | ë¦¬ë·° ë°˜ì˜: Domain Pydantic ê¸ˆì§€, ê²½ê³„ ê·œì¹™ ëª…ì‹œ, Phase 0.5/1.15 ì¶”ê°€, Ports ì •ì˜, DoD/Freeze Zone/Decision Log ì¶”ê°€ | AI Assistant | ì†Œí”„íŠ¸ì›¨ì–´ ì•„í‚¤í…íŠ¸ |
| 1.2 | 2025-01-09 | êµ¬ì¡°ì  ì¶©ëŒ í•´ì†Œ: app/ ì¤‘ë³µ ì œê±°, ILogger domain/portsë¡œ ì´ë™, DuplicateGroup ID-only ì›ì¹™, ìŠ¤ëƒ…ìƒ· ì •ê·œí™” ê·œì¹™, ë¶ˆë³€ Aggregate ìš´ìš© ê·œì¹™, Ports ì •ì˜ ë£° ì¶”ê°€ | AI Assistant | ì†Œí”„íŠ¸ì›¨ì–´ ì•„í‚¤í…íŠ¸ |
| 1.3 | 2025-01-09 | ì”ì—¬ ë¦¬ìŠ¤í¬ ë³´ì •: Domain Service ë¡œê¹… ì„ íƒì , Workflow êµ¬ì¡° í…ŒìŠ¤íŠ¸ ê°•ì œ, Port ë³€ê²½ ê°€ë“œ, Adapter ì œê±° ê¸°ì¤€, Entity ë³€ê²½ ê·œì¹™, ì„±ëŠ¥ ê²Œì´íŠ¸ ì‹¤íŒ¨ ì•¡ì…˜, Phase ë³‘ë ¬ ì‹¤í–‰ ê¸ˆì§€ | AI Assistant | ì†Œí”„íŠ¸ì›¨ì–´ ì•„í‚¤í…íŠ¸ |
| 1.4 | 2025-01-09 | ì½”ë“œ í˜„ì‹¤ ë°˜ì˜: P0 ìš°ì„ ìˆœìœ„ ìˆ˜ì • (gui/views/main_window.pyê°€ ì‹¤ì œ í­ë°œ ë°˜ê²½), file_record.py "God Model" í‘œí˜„ ì œê±°, Workflow êµ¬ì¡° í…ŒìŠ¤íŠ¸ AST ê¸°ë°˜ìœ¼ë¡œ ë³€ê²½, Ports í…ŒìŠ¤íŠ¸ì— @runtime_checkable ëª…ì‹œ | AI Assistant | ì†Œí”„íŠ¸ì›¨ì–´ ì•„í‚¤í…íŠ¸ |

---

## ğŸ“‹ Executive Summary

ì´ ê³„íšì„œëŠ” í”„ë¡œì íŠ¸ ì „ì²´ êµ¬ì¡° ë¶„ì„ì„ ê¸°ë°˜ìœ¼ë¡œ í•œ ë‹¨ê³„ë³„ ë¦¬íŒ©í† ë§ ë¡œë“œë§µì…ë‹ˆë‹¤.

### ìš°ì„ ìˆœìœ„ ë§¤íŠ¸ë¦­ìŠ¤

| ìš°ì„ ìˆœìœ„ | ëŒ€ìƒ íŒŒì¼/ëª¨ë“ˆ | ë¦¬ìŠ¤í¬ | ë¦¬íŒ©í† ë§ í•„ìš”ë„ | í•µì‹¬ ì‚¬ìœ  |
|---------|--------------|--------|---------------|----------|
| **P0 (ì¦‰ì‹œ)** | `gui/views/main_window.py` | ğŸ”´ ë§¤ìš° ë†’ìŒ | ğŸ”´ ë§¤ìš° ë†’ìŒ | GUIê°€ domain/infra ì§ì ‘ import, orchestration + ì„œë¹„ìŠ¤ ìƒì„± + ë¡œì§ í˜¼ì¬ (2398ì¤„, 60ê°œ ë©”ì„œë“œ) |
| **P0 (ì¦‰ì‹œ)** | ë£¨íŠ¸ `main.py` ì—”íŠ¸ë¦¬í¬ì¸íŠ¸ ì •ë¦¬ | ğŸ”´ ë§¤ìš° ë†’ìŒ | ğŸ”´ ë§¤ìš° ë†’ìŒ | sys.path hack + gui ì§ì ‘ í˜¸ì¶œ |
| **P0 (ì¦‰ì‹œ)** | UseCaseì˜ infra ì§ì ‘ ì˜ì¡´ ì œê±° (Phase 1.15) | ğŸ”´ ë§¤ìš° ë†’ìŒ | ğŸ”´ ë§¤ìš° ë†’ìŒ | Ports ë„ì…ìœ¼ë¡œ ì˜ì¡´ì„± ì—­ì „ í•„ìš” |
| **P1 (ìƒ)** | `domain/models/file_record.py` (Pydantic ì œê±°) | ğŸŸ  ë†’ìŒ | ğŸŸ  ë†’ìŒ | Domain Pydantic ê¸ˆì§€ ì›ì¹™ì— ë”°ë¼ dataclass ì „í™˜ í•„ìš” (Phase 2ì—ì„œ ëŒ€ëŸ‰ ë§ˆì´ê·¸ë ˆì´ì…˜ê³¼ í•¨ê»˜) |
| **P1 (ìƒ)** | `domain/models/*` (ì§‘í•©) | ğŸŸ  ë†’ìŒ | ğŸŸ  ë†’ìŒ | ëª¨ë¸ ê°„ ìˆœí™˜ ì˜ì¡´ ê°€ëŠ¥ì„± |
| **P1 (ìƒ)** | `common/logging.py` | ğŸŸ  ë†’ìŒ | ğŸŸ  ë†’ìŒ | ì „ì—­ ì ‘ê·¼ + ì •ì±… í˜¼ì¬ |
| **P2 (ì¤‘)** | `common/errors.py` | ğŸŸ¡ ì¤‘ê°„ | ğŸŸ¡ ì¤‘ê°„ | ì—ëŸ¬ ë¶„ë¥˜ ì²´ê³„ ë¯¸ì •í˜• |
| **P2 (ì¤‘)** | `app/settings.py` | ğŸŸ¡ ì¤‘ê°„ | ğŸŸ¡ ì¤‘ê°„ | ëŸ°íƒ€ì„ ì„¤ì • vs ìƒìˆ˜ í˜¼í•© |
| **P3 (í•˜)** | `common/types.py` | ğŸŸ¢ ë‚®ìŒ | ğŸŸ¢ ë‚®ìŒ | ì•ˆì •ì ì´ë‚˜ í™•ì¥ ëŒ€ë¹„ ì •ë¦¬ í•„ìš” |

---

## ğŸ¯ ë¦¬íŒ©í† ë§ ëª©í‘œ

1. **í…ŒìŠ¤íŠ¸ ê°€ëŠ¥ì„± í–¥ìƒ**: ëª¨ë“  ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ì„ ìˆœìˆ˜ í•¨ìˆ˜/í´ë˜ìŠ¤ë¡œ ë¶„ë¦¬
2. **ì±…ì„ ë¶„ë¦¬**: Single Responsibility Principle ì ìš©
3. **ì˜ì¡´ì„± ì—­ì „**: Domain ê³„ì¸µì´ Infrastructureì— ì˜ì¡´í•˜ì§€ ì•Šë„ë¡
4. **í™•ì¥ì„± í™•ë³´**: ìƒˆë¡œìš´ ê¸°ëŠ¥ ì¶”ê°€ ì‹œ ê¸°ì¡´ ì½”ë“œ ì˜í–¥ ìµœì†Œí™”
5. **ìœ ì§€ë³´ìˆ˜ì„±**: ì½”ë“œ ì´í•´ë„ í–¥ìƒ, ë³€ê²½ ë²”ìœ„ ëª…í™•í™”

---

## ğŸš« ë³€ê²½ ê¸ˆì§€ êµ¬ì—­ (Freeze Zone)

ë¦¬íŒ©í† ë§ ì¤‘ **ì ˆëŒ€ ë³€ê²½í•˜ì§€ ì•Šì„ ì˜ì—­**ì„ ëª…í™•íˆ ì •ì˜í•©ë‹ˆë‹¤. ì´ëŠ” scope creep ë°©ì§€ì™€ ê¸°ì¡´ ë™ì‘ ë³´ì¥ì„ ìœ„í•œ ê²ƒì…ë‹ˆë‹¤.

### íƒì§€ ì•Œê³ ë¦¬ì¦˜ ë³€ê²½ ê¸ˆì§€
- ì¤‘ë³µ íƒì§€ ì•Œê³ ë¦¬ì¦˜ ë¡œì§ ë³€ê²½ ê¸ˆì§€ (ì •í™•ë„ ë³€ê²½ ê¸ˆì§€)
- í•´ì‹œ ê³„ì‚° ë°©ì‹ ë³€ê²½ ê¸ˆì§€
- SimHash íŒŒë¼ë¯¸í„° ë³€ê²½ ê¸ˆì§€
- **ì´ìœ **: ë¦¬íŒ©í† ë§ ëª©ì ì€ êµ¬ì¡° ê°œì„ ì´ë©°, ì•Œê³ ë¦¬ì¦˜ ë³€ê²½ì€ ë³„ë„ ì´ìŠˆ

### UI ê¸°ëŠ¥ ë³€ê²½ ê¸ˆì§€
- ìƒˆë¡œìš´ UI ê¸°ëŠ¥ ì¶”ê°€ ê¸ˆì§€
- ê¸°ì¡´ UI ë™ì‘ ë³€ê²½ ê¸ˆì§€ (ë²„ê·¸ ìˆ˜ì • ì œì™¸)
- **ì´ìœ **: UI ë³€ê²½ì€ ê¸°ëŠ¥ ê°œë°œì´ë©° ë¦¬íŒ©í† ë§ ë²”ìœ„ ë°–

### ì¶œë ¥ í¬ë§· ë³€ê²½ ê¸ˆì§€
- ë¦¬í¬íŠ¸ í¬ë§· ë³€ê²½ ê¸ˆì§€
- API ì‘ë‹µ í˜•ì‹ ë³€ê²½ ê¸ˆì§€
- ë°ì´í„°ë² ì´ìŠ¤ ìŠ¤í‚¤ë§ˆ ë³€ê²½ ê¸ˆì§€ (ë§ˆì´ê·¸ë ˆì´ì…˜ í•„ìš” ì‹œ ë³„ë„ Phase)
- **ì´ìœ **: ì™¸ë¶€ ì¸í„°í˜ì´ìŠ¤ ë³€ê²½ì€ í˜¸í™˜ì„± ë¬¸ì œ ìœ ë°œ

### ì˜ˆì™¸ ì‚¬í•­
- ë²„ê·¸ ìˆ˜ì •ì€ í—ˆìš© (ë‹¨, **ë²„ê·¸ ìˆ˜ì • PRì€ ë¦¬íŒ©í† ë§ PRê³¼ ë¶„ë¦¬** í•„ìˆ˜)
- ì„±ëŠ¥ ê°œì„ ì€ í—ˆìš© (ë‹¨, ë™ì‘ ë™ë“±ì„± ìœ ì§€ í•„ìˆ˜)
- í•„ìš”í•œ ê²½ìš° ë³„ë„ ë¸Œëœì¹˜/ì´ìŠˆë¡œ ë¶„ë¦¬

### Phase ë³‘ë ¬ ì‹¤í–‰ ê¸ˆì§€ (í•„ìˆ˜!)

**ì¤‘ìš”**: ì´ ë¦¬íŒ©í† ë§ ê³„íšì€ **ìˆœì°¨ ì‹¤í–‰ ì „ì œ**ì…ë‹ˆë‹¤.

- âŒ **Phase ë³‘ë ¬ ì‹¤í–‰ ì ˆëŒ€ ê¸ˆì§€**
  - ì˜ˆ: "Phase 1.2 í•˜ë©´ì„œ Phase 3 ì¡°ê¸ˆ..." ê°™ì€ ì‹œë„ ê¸ˆì§€
  - ê° PhaseëŠ” ì´ì „ Phaseì˜ ì™„ë£Œë¥¼ í•„ìˆ˜ ì „ì œë¡œ í•¨
- âœ… **ìˆœì°¨ ì‹¤í–‰ ì›ì¹™**:
  - Phase 0.5 ì™„ë£Œ â†’ Phase 1 ì‹œì‘
  - Phase 1 ì™„ë£Œ â†’ Phase 2 ì‹œì‘
  - Phase 2 ì™„ë£Œ â†’ Phase 3 ì‹œì‘
  - Phase 3 ì™„ë£Œ â†’ Phase 4 ì‹œì‘
- **ì´ìœ **: 
  - ì˜ì¡´ì„± ì²´ì¸ ê´€ë¦¬ (ê° Phaseê°€ ì´ì „ Phase êµ¬ì¡°ì— ì˜ì¡´)
  - íšŒê·€ ê°ì§€ (Golden Testsê°€ ê° Phase ì™„ë£Œ ì‹œì  ê¸°ì¤€)
  - ë¦¬ìŠ¤í¬ ê²©ë¦¬ (ë¬¸ì œ ë°œìƒ ì‹œ ì´ì „ Phaseë¡œ ë¡¤ë°± ê°€ëŠ¥)

---

## ğŸ›ï¸ ì•„í‚¤í…ì²˜ ì›ì¹™ ë° ê²½ê³„ ê·œì¹™

### ê³„ì¸µ ê°„ ê²½ê³„ ê·œì¹™ (í•„ìˆ˜ ì¤€ìˆ˜)

ë‹¤ìŒ ê·œì¹™ì€ **ì ˆëŒ€ ìœ„ë°˜ ê¸ˆì§€**ì´ë©°, ëª¨ë“  ë¦¬íŒ©í† ë§ ì‘ì—…ì˜ ê¸°ì¤€ì´ ë©ë‹ˆë‹¤:

#### 1. GUI ê³„ì¸µ (`gui/`)
- âœ… **usecases ì¸í„°í˜ì´ìŠ¤ë§Œ í˜¸ì¶œ** ê°€ëŠ¥
- âœ… `app/workflows` í˜¸ì¶œ ê°€ëŠ¥ (ì›Œí¬í”Œë¡œìš° ì¡°í•©)
- âŒ `domain/`, `infra/` ì§ì ‘ import ê¸ˆì§€
- âŒ Infrastructure ê°ì²´ ì§ì ‘ ìƒì„±/í˜¸ì¶œ ê¸ˆì§€
- **ì˜ˆì™¸**: Bootstrapì—ì„œë§Œ wiring í—ˆìš©

#### 2. Use Cases ê³„ì¸µ (`usecases/`)
- âœ… **domain + ports(interface)ë§Œ ì˜ì¡´**
- âœ… `app/workflows`ì—ì„œ í˜¸ì¶œë¨ (ë˜ëŠ” ì§ì ‘ í˜¸ì¶œ)
- âŒ `gui/`, `infra/` import ê¸ˆì§€
- âŒ Infrastructure êµ¬í˜„ì²´ ì§ì ‘ import ê¸ˆì§€
- **ì˜ì¡´ ë°©í–¥**: `workflows â†’ usecases` (ë‹¨ë°©í–¥)

#### 3. Domain ê³„ì¸µ (`domain/`)
- âœ… **ì™¸ë¶€ í”„ë ˆì„ì›Œí¬ ì˜ì¡´ ê¸ˆì§€** (Pydantic, Qt, logging ë“±)
- âœ… ìˆœìˆ˜ Python í´ë˜ìŠ¤ë§Œ ì‚¬ìš© (`dataclasses` ë˜ëŠ” ì¼ë°˜ í´ë˜ìŠ¤)
- âœ… Domain ServiceëŠ” ìˆœìˆ˜ í•¨ìˆ˜/í´ë˜ìŠ¤
- âŒ `usecases/`, `infra/`, `gui/` import ê¸ˆì§€
- âŒ `common/`ì—ì„œ infra ê´€ë ¨ ëª¨ë“ˆ import ê¸ˆì§€
- âœ… **Domain Service ë¡œê¹… ì„ íƒì  ì›ì¹™**: 
  - Domain ServiceëŠ” **ìƒíƒœ/íŒì •ì— í•„ìˆ˜ì ì¸ ê²½ìš°ì—ë§Œ ILoggerë¥¼ ì£¼ì…**
  - "ì˜ì‚¬ê²°ì •/íŒì •/ê·œì¹™" Service(ì˜ˆ: `VersionSelectionService`, `DuplicateDetectionService`)ì—ëŠ” ë¡œê¹… ê¸ˆì§€
  - "I/Oê°€ í•„ìš”í•œ Service"ë§Œ ë¡œê¹… í—ˆìš© (ì˜ˆ: íŒŒì¼ ì½ê¸° ì¤‘ ì˜¤ë¥˜ ë¡œê¹…)
  - í…ŒìŠ¤íŠ¸ì—ì„œ ë¶ˆí•„ìš”í•œ mock í™•ì‚° ë°©ì§€

#### 4. Infrastructure ê³„ì¸µ (`infra/`)
- âœ… **ports êµ¬í˜„**ë§Œ ë‹´ë‹¹
- âœ… Domain/UseCaseì˜ interface(Protocol) êµ¬í˜„
- âŒ Domain Entity/ValueObject ì§ì ‘ ìˆ˜ì • ê¸ˆì§€
- âŒ UseCase ë¡œì§ í¬í•¨ ê¸ˆì§€

#### 5. Ports (ì¸í„°í˜ì´ìŠ¤)
- âœ… **`domain/ports/`ì— ì •ì˜** (í†µì¼ ì›ì¹™: Domain PortsëŠ” domain/ports/ì—ë§Œ)
- âœ… Python `Protocol` ì‚¬ìš© (íƒ€ì… íŒíŒ…)
- âœ… Domain/UseCaseê°€ ì •ì˜, Infraê°€ êµ¬í˜„
- âŒ `usecases/ports/`ëŠ” ì‚¬ìš©í•˜ì§€ ì•ŠìŒ (í˜¼ë€ ë°©ì§€)
- âœ… **Port ë³€ê²½ ê°€ë“œ ê·œì¹™**:
  - Port ë³€ê²½ ì‹œ **ë°˜ë“œì‹œ Decision Logì— ê¸°ë¡** (v1.3 ê·œì¹™)
  - PortëŠ” "UseCase ìš”êµ¬"ê°€ ì•„ë‹Œ **"Domain í•„ìš”" ê¸°ì¤€**ìœ¼ë¡œë§Œ í™•ì¥
  - ìƒˆ ê¸°ëŠ¥ ì¶”ê°€ ì‹œ "Portì— ë©”ì„œë“œ í•˜ë‚˜ë§Œ ë”..."ëŠ” ê¸ˆì§€ (Port ë¹„ëŒ€í™” ë°©ì§€)
  - Port ë³€ê²½ì€ Phase 1.15 ì´í›„ **Phaseë³„ ë¦¬ë·° ì‹œì ì—ë§Œ í—ˆìš©**

### ì˜ì¡´ì„± ë°©í–¥ ë‹¤ì´ì–´ê·¸ë¨

```
GUI â†’ UseCases â†’ Domain â† Ports â† Infrastructure
  â†“      â†“         â†“                    â†“
Workflows (ì¡°í•©)  Services          Implementations
```

**ê·œì¹™**: ì™¸ë¶€ ê³„ì¸µì€ ë‚´ë¶€ ê³„ì¸µì„ importí•  ìˆ˜ ìˆìœ¼ë‚˜, ë°˜ëŒ€ëŠ” ë¶ˆê°€ëŠ¥

---

## ğŸ” Domain ê³„ì¸µ ì„¤ê³„ ì›ì¹™ (í•µì‹¬)

### Pydantic ì‚¬ìš© ê¸ˆì§€

**ì¤‘ìš”**: `domain/` ê³„ì¸µì—ì„œ Pydantic ì‚¬ìš©ì„ **ì ˆëŒ€ ê¸ˆì§€**í•©ë‹ˆë‹¤.

#### ì´ìœ 
- Domainì´ íŠ¹ì • ë¼ì´ë¸ŒëŸ¬ë¦¬(Pydantic)ì— ê°•í•˜ê²Œ ê²°í•©ë¨
- Domainì€ ìˆœìˆ˜ ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ë§Œ í¬í•¨í•´ì•¼ í•¨
- í…ŒìŠ¤íŠ¸ ì‹œ Pydantic ì˜ì¡´ì„±ì´ í•„ìš”í•´ì§

#### í—ˆìš©ë˜ëŠ” ëŒ€ì•ˆ
- **`dataclasses`**: Python í‘œì¤€ ë¼ì´ë¸ŒëŸ¬ë¦¬
- **ìˆœìˆ˜ Python í´ë˜ìŠ¤**: `__init__`, `__eq__`, `__hash__` ì§ì ‘ êµ¬í˜„
- **`typing.NamedTuple`**: ë¶ˆë³€ ê°ì²´ì˜ ê²½ìš°

#### Pydantic ì‚¬ìš© í—ˆìš© ì˜ì—­
- âœ… **ì…ì¶œë ¥ DTO**: `usecases/` ë˜ëŠ” `infra/`ì—ì„œ íŒŒì‹±/ì§ë ¬í™” ì‹œ
- âœ… **ì„¤ì • ëª¨ë¸**: `app/settings/config.py`ì—ì„œë§Œ
- âŒ **Domain Entity/ValueObject**: ì ˆëŒ€ ê¸ˆì§€

#### ì˜ˆì‹œ

```python
# âœ… ì˜¬ë°”ë¥¸ ì˜ˆ: Domain ValueObject (dataclass ì‚¬ìš©)
from dataclasses import dataclass
from typing import Optional

@dataclass(frozen=True)
class FileHashInfo:
    """í•´ì‹œ ì •ë³´ ê°’ ê°ì²´ (ë¶ˆë³€)."""
    strong_hash: Optional[str]
    fast_fingerprint: Optional[str]
    normalized_fingerprint: Optional[str]
    simhash64: Optional[int]

# âŒ ì˜ëª»ëœ ì˜ˆ: Pydantic ì‚¬ìš© (ê¸ˆì§€)
from pydantic import BaseModel

class FileHashInfo(BaseModel):  # Domainì—ì„œ Pydantic ê¸ˆì§€!
    ...

# âœ… ì˜¬ë°”ë¥¸ ì˜ˆ: UseCaseì—ì„œ Pydantic ì‚¬ìš© (ì…ì¶œë ¥ DTO)
from pydantic import BaseModel

class ScanFilesRequest(BaseModel):  # UseCase ë ˆë²¨ DTOëŠ” í—ˆìš©
    root_path: str
    extensions: list[str]
```

---

## ğŸ“ íƒ€ê²Ÿ ì•„í‚¤í…ì²˜ (After)

```
src/
â”œâ”€â”€ app/                          # Application Layer
â”‚   â”œâ”€â”€ main.py                   # ì§„ì§œ Entry Point (10~30ì¤„)
â”‚   â”œâ”€â”€ bootstrap.py              # DI / Wiring
â”‚   â”œâ”€â”€ workflows/                # ì›Œí¬í”Œë¡œìš° ì¡°í•©
â”‚   â”‚   â”œâ”€â”€ __init__.py
â”‚   â”‚   â”œâ”€â”€ scan_flow.py          # ìŠ¤ìº” ì›Œí¬í”Œë¡œìš°
â”‚   â”‚   â””â”€â”€ analyze_flow.py       # ë¶„ì„ ì›Œí¬í”Œë¡œìš°
â”‚   â””â”€â”€ settings/                 # ì• í”Œë¦¬ì¼€ì´ì…˜ ì„¤ì •
â”‚       â”œâ”€â”€ __init__.py
â”‚       â”œâ”€â”€ config.py             # ëŸ°íƒ€ì„ ì„¤ì •
â”‚       â””â”€â”€ constants.py          # ë¶ˆë³€ ìƒìˆ˜
â”‚
â”œâ”€â”€ domain/                       # Domain Layer
â”‚   â”œâ”€â”€ entities/                 # ì—”í‹°í‹° (ì‹ë³„ìë¥¼ ê°€ì§„ ê°ì²´)
â”‚   â”‚   â”œâ”€â”€ __init__.py
â”‚   â”‚   â””â”€â”€ file.py               # File ì—”í‹°í‹° (ìˆœìˆ˜ ìƒíƒœ, dataclass)
â”‚   â”œâ”€â”€ value_objects/            # ê°’ ê°ì²´ (ë¶ˆë³€, dataclass)
â”‚   â”‚   â”œâ”€â”€ __init__.py
â”‚   â”‚   â”œâ”€â”€ file_hash.py          # í•´ì‹œ ê°’ ê°ì²´
â”‚   â”‚   â”œâ”€â”€ file_path.py          # ê²½ë¡œ ê°’ ê°ì²´
â”‚   â”‚   â”œâ”€â”€ file_metadata.py      # ë©”íƒ€ë°ì´í„° ê°’ ê°ì²´
â”‚   â”‚   â”œâ”€â”€ candidate_edge.py     # í›„ë³´ ì—£ì§€ (FileIdë§Œ ì°¸ì¡°)
â”‚   â”‚   â””â”€â”€ evidence.py           # ì¦ê±° (ë¶ˆë³€)
â”‚   â”œâ”€â”€ aggregates/               # ì§‘ê³„ (ë¶ˆë³€)
â”‚   â”‚   â”œâ”€â”€ __init__.py
â”‚   â”‚   â””â”€â”€ duplicate_group.py    # ì¤‘ë³µ ê·¸ë£¹ (file_ids: list[int]ë§Œ í¬í•¨, File ê°ì²´ ì°¸ì¡° ê¸ˆì§€)
â”‚   â”œâ”€â”€ services/                 # Domain Services (ìˆœìˆ˜ í•¨ìˆ˜/í´ë˜ìŠ¤)
â”‚   â”‚   â”œâ”€â”€ __init__.py
â”‚   â”‚   â”œâ”€â”€ file_compare.py       # íŒŒì¼ ë¹„êµ ë¡œì§
â”‚   â”‚   â”œâ”€â”€ duplicate_detector.py # ì¤‘ë³µ íƒì§€ ë¡œì§
â”‚   â”‚   â”œâ”€â”€ version_selector.py   # ë²„ì „ ì„ íƒ ë¡œì§ (Service)
â”‚   â”‚   â”œâ”€â”€ integrity_checker.py  # ë¬´ê²°ì„± ê²€ì‚¬ ë¡œì§
â”‚   â”‚   â””â”€â”€ evidence_builder.py   # ì¦ê±° ìƒì„± ë¡œì§
â”‚   â”œâ”€â”€ policies/                 # ë„ë©”ì¸ ì •ì±… (ìˆœìˆ˜ ê·œì¹™ í•¨ìˆ˜)
â”‚   â”‚   â”œâ”€â”€ __init__.py
â”‚   â”‚   â””â”€â”€ version_selection.py  # ë²„ì „ ì„ íƒ ê·œì¹™ (Serviceì—ì„œ ì‚¬ìš©)
â”‚   â””â”€â”€ ports/                    # Domain Ports (ì¸í„°í˜ì´ìŠ¤)
â”‚       â”œâ”€â”€ __init__.py
â”‚       â”œâ”€â”€ file_repository.py    # IFileRepository Protocol
â”‚       â”œâ”€â”€ hash_service.py       # IHashService Protocol
â”‚       â”œâ”€â”€ encoding_detector.py  # IEncodingDetector Protocol
â”‚       â””â”€â”€ logger.py             # ILogger Protocol
â”‚
â”œâ”€â”€ usecases/                     # Use Cases (ë‹¨ì¼ ìœ ìŠ¤ì¼€ì´ìŠ¤, ì›ìì )
â”‚   â”œâ”€â”€ __init__.py
â”‚   â”œâ”€â”€ scan_files.py             # íŒŒì¼ ìŠ¤ìº” ìœ ìŠ¤ì¼€ì´ìŠ¤
â”‚   â”œâ”€â”€ find_duplicates.py        # ì¤‘ë³µ íƒì§€ ìœ ìŠ¤ì¼€ì´ìŠ¤
â”‚   â””â”€â”€ check_integrity.py        # ë¬´ê²°ì„± ê²€ì‚¬ ìœ ìŠ¤ì¼€ì´ìŠ¤
â”‚
â”œâ”€â”€ infra/                        # Infrastructure Layer (Ports êµ¬í˜„)
â”‚   â”œâ”€â”€ db/                       # IFileRepository êµ¬í˜„
â”‚   â”‚   â”œâ”€â”€ __init__.py
â”‚   â”‚   â””â”€â”€ file_repository.py    # FileRepository (IFileRepository êµ¬í˜„)
â”‚   â”œâ”€â”€ fs/                       # íŒŒì¼ ì‹œìŠ¤í…œ êµ¬í˜„
â”‚   â”œâ”€â”€ encoding/                 # IEncodingDetector êµ¬í˜„
â”‚   â”‚   â””â”€â”€ encoding_detector.py  # EncodingDetector (IEncodingDetector êµ¬í˜„)
â”‚   â”œâ”€â”€ hashing/                  # IHashService êµ¬í˜„
â”‚   â”‚   â””â”€â”€ hash_calculator.py    # HashCalculator (IHashService êµ¬í˜„)
â”‚   â””â”€â”€ logging/                  # ILogger êµ¬í˜„
â”‚       â”œâ”€â”€ __init__.py
â”‚       â””â”€â”€ std_logger.py         # StdLogger (ILogger êµ¬í˜„, domain/ports/logger.pyì˜ Protocol êµ¬í˜„)
â”‚
â”œâ”€â”€ common/                       # ê³µí†µ ìœ í‹¸ë¦¬í‹°
â”‚   â”œâ”€â”€ __init__.py
â”‚   â”œâ”€â”€ errors.py                 # (ê°œì„ : ê³„ì¸µí™”)
â”‚   â””â”€â”€ types.py                  # (ìœ ì§€)
â”‚
â””â”€â”€ gui/                          # GUI Layer (ê¸°ì¡´ êµ¬ì¡° ìœ ì§€, ê°œì„ )
    â”œâ”€â”€ views/
    â”œâ”€â”€ workers/
    â”œâ”€â”€ models/
    â””â”€â”€ ...
```

---

## ğŸ”‘ í•µì‹¬ ì„¤ê³„ ì›ì¹™ (ìš”ì•½)

### 1. ID ê¸°ë°˜ ì°¸ì¡° ì›ì¹™ (ê°•ì œ)

**ê·œì¹™**: Domain ê°ì²´ ê°„ ì°¸ì¡°ëŠ” **ë°˜ë“œì‹œ IDë§Œ ì‚¬ìš©**í•˜ë©°, ê°ì²´ ì°¸ì¡°ëŠ” ê¸ˆì§€í•©ë‹ˆë‹¤.

#### ì˜ˆì‹œ

```python
# âœ… ì˜¬ë°”ë¥¸ ì˜ˆ: IDë§Œ ì €ì¥
@dataclass(frozen=True)
class CandidateEdge:
    """í›„ë³´ ì—£ì§€ (ë¶ˆë³€ ValueObject)."""
    file_id_1: int  # File ê°ì²´ê°€ ì•„ë‹Œ ID
    file_id_2: int  # File ê°ì²´ê°€ ì•„ë‹Œ ID
    similarity: float

@dataclass(frozen=True)
class IntegrityIssue:
    """ë¬´ê²°ì„± ì´ìŠˆ Entity."""
    issue_id: int
    file_id: int  # File ê°ì²´ê°€ ì•„ë‹Œ ID
    issue_type: str
    severity: str

# âŒ ì˜ëª»ëœ ì˜ˆ: ê°ì²´ ì°¸ì¡° (ê¸ˆì§€)
class CandidateEdge:
    file_1: File  # File ê°ì²´ ì§ì ‘ ì°¸ì¡° ê¸ˆì§€!
    file_2: File  # ìˆœí™˜ ì˜ì¡´ì„± ìœ„í—˜

# âœ… í•„ìš” ì‹œ Repository/Serviceë¡œ Lookup
class DuplicateGroupService:
    def get_files(self, group: DuplicateGroup, repo: IFileRepository) -> list[File]:
        """Aggregate ë‚´ë¶€ì—ì„œ File ê°ì²´ê°€ í•„ìš”í•  ë•Œë§Œ lookup."""
        return [repo.find_by_id(file_id) for file_id in group.file_ids]
```

#### ì´ìœ 
- ìˆœí™˜ ì˜ì¡´ì„± ë°©ì§€
- ë¶ˆë³€ì„± ë³´ì¥ (ValueObjectê°€ Entity ì°¸ì¡° ì‹œ ë¶ˆë³€ì„± ê¹¨ì§)
- í…ŒìŠ¤íŠ¸ ìš©ì´ì„± (IDë§Œìœ¼ë¡œ Mock ê°€ëŠ¥)

### 2. UseCases vs Workflows ì—­í•  êµ¬ë¶„

#### `usecases/` (ë‹¨ì¼ ìœ ìŠ¤ì¼€ì´ìŠ¤, ì›ìì )
- **ì—­í• **: í•˜ë‚˜ì˜ ë¹„ì¦ˆë‹ˆìŠ¤ ì•¡ì…˜ì„ ìˆ˜í–‰í•˜ëŠ” ë‹¨ì¼ ì±…ì„ í´ë˜ìŠ¤
- **ì˜ˆì‹œ**: 
  - `ScanFilesUseCase`: íŒŒì¼ ìŠ¤ìº”ë§Œ ìˆ˜í–‰
  - `FindDuplicatesUseCase`: ì¤‘ë³µ íƒì§€ë§Œ ìˆ˜í–‰
  - `CheckIntegrityUseCase`: ë¬´ê²°ì„± ê²€ì‚¬ë§Œ ìˆ˜í–‰
- **ì˜ì¡´ì„±**: Domain + Ports(interface)ë§Œ
- **í˜¸ì¶œì**: `app/workflows` ë˜ëŠ” GUI

#### `app/workflows/` (ì›Œí¬í”Œë¡œìš° ì¡°í•©)
- **ì—­í• **: ì—¬ëŸ¬ UseCaseë¥¼ ì¡°í•©í•˜ì—¬ ë³µì¡í•œ ì‹œë‚˜ë¦¬ì˜¤ ìˆ˜í–‰
- **ì˜ˆì‹œ**:
  - `ScanFlow`: ScanFilesUseCase â†’ FindDuplicatesUseCase â†’ CheckIntegrityUseCase
  - `AnalyzeFlow`: ì¤‘ë³µ ë¶„ì„ ì „ì²´ íë¦„ ì¡°í•©
- **ì˜ì¡´ì„±**: `usecases/` (ë‹¨ë°©í–¥, workflows â†’ usecases)
- **í˜¸ì¶œì**: GUI ë˜ëŠ” Bootstrap

#### ê·œì¹™ (ê°•ì œ)
- âœ… WorkflowsëŠ” UseCasesë¥¼ ì¡°í•©ë§Œ í•¨ (ë¡œì§ ì¶”ê°€ ê¸ˆì§€)
  - âŒ ì¡°ê±´ë¬¸/í•„í„°ë§ ê°™ì€ íŒë‹¨ ë¡œì§ ê¸ˆì§€ â†’ UseCase/Serviceë¡œ ë‚´ë ¤ì•¼ í•¨
  - âŒ ê³„ì‚°/ë³€í™˜ ë¡œì§ ê¸ˆì§€ â†’ UseCase/Serviceë¡œ ë‚´ë ¤ì•¼ í•¨
  - âŒ ì—ëŸ¬ í•¸ë“¤ë§ ë¡œì§ ê¸ˆì§€ â†’ UseCaseì—ì„œ ì²˜ë¦¬
  - âœ… UseCase í˜¸ì¶œ ìˆœì„œ ì •ì˜ë§Œ í—ˆìš©
  - âœ… UseCase ê²°ê³¼ë¥¼ ë‹¤ìŒ UseCase ì…ë ¥ìœ¼ë¡œ ì „ë‹¬ë§Œ í—ˆìš©
- âœ… UseCasesëŠ” ë‹¤ë¥¸ UseCaseë¥¼ í˜¸ì¶œí•˜ì§€ ì•ŠìŒ (ë…ë¦½ì )
- âœ… ë‹¨ë°©í–¥ ì˜ì¡´: `workflows â†’ usecases â†’ domain`

### 3. Policy vs Service ì—­í•  êµ¬ë¶„

#### `domain/policies/` (ìˆœìˆ˜ ê·œì¹™, í•¨ìˆ˜)
- **ì—­í• **: ë¹„ì¦ˆë‹ˆìŠ¤ ê·œì¹™ì„ í‘œí˜„í•˜ëŠ” ìˆœìˆ˜ í•¨ìˆ˜ (ìƒíƒœ ì—†ìŒ)
- **ì˜ˆì‹œ**:
  - `version_selection.py`: ë²„ì „ ì„ íƒ ê·œì¹™ í•¨ìˆ˜ë“¤
    ```python
    def select_by_filename(files: list[File]) -> Optional[File]: ...
    def select_by_mtime(files: list[File]) -> Optional[File]: ...
    ```
- **íŠ¹ì§•**: ì…ë ¥ â†’ ì¶œë ¥ë§Œ ìˆ˜í–‰, ë¶€ì‘ìš© ì—†ìŒ

#### `domain/services/` (ë„ë©”ì¸ ì„œë¹„ìŠ¤, í´ë˜ìŠ¤)
- **ì—­í• **: Policyë¥¼ ì¡°í•©í•˜ê³ , I/Oë¥¼ ì²˜ë¦¬í•˜ëŠ” ì„œë¹„ìŠ¤
- **ì˜ˆì‹œ**:
  - `VersionSelectionService`: ì—¬ëŸ¬ Policyë¥¼ ì¡°í•©í•˜ì—¬ ìµœì¢… íŒì •
    ```python
    class VersionSelectionService:
        def select_best_version(self, files: list[File]) -> File:
            # Policy í•¨ìˆ˜ë“¤ì„ ìˆœì°¨ì ìœ¼ë¡œ í˜¸ì¶œ
            if result := select_by_filename(files):
                return result
            if result := select_by_mtime(files):
                return result
            ...
    ```
- **íŠ¹ì§•**: Policyë¥¼ ì¡°í•©í•˜ê³ , ë³µì¡í•œ ë¡œì§ ì²˜ë¦¬

#### ê·œì¹™
- âœ… PolicyëŠ” ìˆœìˆ˜ í•¨ìˆ˜ (stateless)
- âœ… ServiceëŠ” Policyë¥¼ ì‚¬ìš©í•˜ë©°, ë³µì¡í•œ ì¡°í•© ë‹´ë‹¹
- âœ… UseCaseì—ì„œ Service í˜¸ì¶œ, Serviceì—ì„œ Policy í˜¸ì¶œ

---

## ğŸ”„ Phase 0: ê¸°ë°˜ ì‘ì—… (ì„ ìˆ˜ ì‘ì—…)

> **ëª©í‘œ**: ë¦¬íŒ©í† ë§ ì‹œì‘ ì „ ì•ˆì „ë§ êµ¬ì¶• ë° ê¸°ì¤€ì„  í™•ë¦½

### Phase 0.5: Golden Tests ë° ë²¤ì¹˜ë§ˆí¬ ê¸°ì¤€ì„  ê³ ì •

#### ëª©í‘œ
- ê¸°ì¡´ ë™ì‘ì„ ë³´ì¥í•˜ëŠ” "Golden Tests" ìƒì„±
- ì„±ëŠ¥ ë²¤ì¹˜ë§ˆí¬ ê¸°ì¤€ì„  ì¸¡ì • ë° ë¬¸ì„œí™”
- ë¦¬íŒ©í† ë§ ì¤‘ íšŒê·€ ë°©ì§€

#### ì‘ì—… ì²´í¬ë¦¬ìŠ¤íŠ¸

##### Step 0.5.1: í…ŒìŠ¤íŠ¸ ë°ì´í„°ì…‹ ê³ ì •
- [ ] `tests/fixtures/` ë””ë ‰í† ë¦¬ ìƒì„±
- [ ] ìƒ˜í”Œ ë°ì´í„°ì…‹ ìƒì„± (ì†Œê·œëª¨/ì¤‘ê·œëª¨/ì—£ì§€ì¼€ì´ìŠ¤)
  - [ ] ì†Œê·œëª¨: 10~50ê°œ íŒŒì¼ (ë™ì¼ í•´ì‹œ ì¤‘ë³µ í¬í•¨)
  - [ ] ì¤‘ê·œëª¨: 100~500ê°œ íŒŒì¼ (ë‹¤ì–‘í•œ íŒ¨í„´)
  - [ ] ì—£ì§€ì¼€ì´ìŠ¤: 
    - [ ] ì œëª©ì´ ë‹¤ë¥´ì§€ë§Œ ë‚´ìš© ë™ì¼
    - [ ] í¬í•¨ ê´€ê³„ (1-114í™” vs 1-158í™”)
    - [ ] ì¸ì½”ë”©ì´ ì„ì¸ í…ìŠ¤íŠ¸
    - [ ] ë°”ì´ë„ˆë¦¬/í…ìŠ¤íŠ¸ í˜¼ì¬
    - [ ] ë¹ˆ íŒŒì¼, ë§¤ìš° í° íŒŒì¼
- [ ] ë°ì´í„°ì…‹ì„ Gitì— ì»¤ë°‹ (`.gitignore` ì œì™¸)
- [ ] ë°ì´í„°ì…‹ ë¬¸ì„œí™” (`tests/fixtures/README.md`)

##### Step 0.5.2: Golden Tests ìƒì„± (ìŠ¤ëƒ…ìƒ· í…ŒìŠ¤íŠ¸ + ì •ê·œí™” ê·œì¹™ í•„ìˆ˜!)
- [ ] `tests/integration/test_golden_scenarios.py` ìƒì„±
- [ ] **ìŠ¤ëƒ…ìƒ· ì •ê·œí™” í—¬í¼ í•¨ìˆ˜** ìƒì„± (`tests/integration/snapshot_normalizer.py`)
  - [ ] `normalize_snapshot(data: dict) -> dict` í•¨ìˆ˜ êµ¬í˜„
    - [ ] **ìˆœì„œ ì •ê·œí™”**: ë”•ì…”ë„ˆë¦¬/ì§‘í•©/ë¦¬ìŠ¤íŠ¸ë¥¼ stable sort ì ìš©
    - [ ] **ê²½ë¡œ ì •ê·œí™”**: ì ˆëŒ€ ê²½ë¡œë¥¼ ìƒëŒ€ ê²½ë¡œë¡œ ë³€í™˜, OS ê²½ë¡œ êµ¬ë¶„ì í†µì¼ (`/`)
    - [ ] **ë¹„ê²°ì • í•„ë“œ ì œê±°**: íƒ€ì„ìŠ¤íƒ¬í”„, ì„±ëŠ¥ ì •ë³´, ì„ì‹œ ID ë“± ì œê±°
    - [ ] **ìˆ«ì ë°˜ì˜¬ë¦¼**: ì‹¤ìˆ˜ ë¹„êµë¥¼ ìœ„í•œ ë°˜ì˜¬ë¦¼ (ì˜ˆ: ì†Œìˆ˜ì  6ìë¦¬)
- [ ] ê° ì‹œë‚˜ë¦¬ì˜¤ë³„ë¡œ ê¸°ëŒ€ ê²°ê³¼ JSON ìŠ¤ëƒ…ìƒ· ìƒì„±
  - [ ] ìŠ¤ìº” ê²°ê³¼ ìŠ¤ëƒ…ìƒ· (`scan_results_*.json`) - **ì •ê·œí™” í›„ ì €ì¥**
  - [ ] ì¤‘ë³µ ê·¸ë£¹ ìŠ¤ëƒ…ìƒ· (`duplicate_groups_*.json`) - **ì •ê·œí™” í›„ ì €ì¥**
  - [ ] ë¬´ê²°ì„± ì´ìŠˆ ìŠ¤ëƒ…ìƒ· (`integrity_issues_*.json`) - **ì •ê·œí™” í›„ ì €ì¥**
- [ ] ìŠ¤ëƒ…ìƒ· ë¹„êµ í…ŒìŠ¤íŠ¸ ì‘ì„± (ì •ê·œí™” ê·œì¹™ ì ìš©)
  ```python
  def test_golden_exact_duplicates():
      """ì™„ì „ ë™ì¼ íŒŒì¼ ì¤‘ë³µ íƒì§€ - ìŠ¤ëƒ…ìƒ· ë¹„êµ."""
      result = execute_scan(fixtures.SMALL_EXACT_DUPLICATES)
      normalized_result = normalize_snapshot(result)
      expected = load_snapshot("exact_duplicates.json")  # ì´ë¯¸ ì •ê·œí™”ëœ ìƒíƒœ
      assert normalized_result == expected
  ```
- [ ] ì •ê·œí™” ê·œì¹™ ê²€ì¦ í…ŒìŠ¤íŠ¸ ì‘ì„±
  - [ ] ìˆœì„œ ë¹„ê²°ì • ì‹œë‚˜ë¦¬ì˜¤ í…ŒìŠ¤íŠ¸
  - [ ] OS ê²½ë¡œ ì°¨ì´ í…ŒìŠ¤íŠ¸ (Windows vs Linux)
  - [ ] íƒ€ì„ìŠ¤íƒ¬í”„ í¬í•¨ ë°ì´í„° í…ŒìŠ¤íŠ¸
- [ ] ëª¨ë“  ì‹œë‚˜ë¦¬ì˜¤ì— ëŒ€í•´ Golden Test ì‘ì„±
- [ ] CI/CDì— Golden Tests ì¶”ê°€ (í•„ìˆ˜ í†µê³¼)

#### ìŠ¤ëƒ…ìƒ· ì •ê·œí™” ê·œì¹™ (í•„ìˆ˜)

ìŠ¤ëƒ…ìƒ· í…ŒìŠ¤íŠ¸ëŠ” ë¹„ê²°ì •ì  ìš”ì†Œ ë•Œë¬¸ì— ê¹¨ì§€ê¸° ì‰½ìŠµë‹ˆë‹¤. ë‹¤ìŒ ì •ê·œí™” ê·œì¹™ì„ **ë°˜ë“œì‹œ** ì ìš©í•´ì•¼ í•©ë‹ˆë‹¤:

1. **ìˆœì„œ ì •ê·œí™”** (stable sort)
   - ë¦¬ìŠ¤íŠ¸/íŠœí”Œ: ID ë˜ëŠ” ê²½ë¡œ ê¸°ì¤€ìœ¼ë¡œ ì •ë ¬
   - ë”•ì…”ë„ˆë¦¬: í‚¤ ê¸°ì¤€ìœ¼ë¡œ ì •ë ¬
   - ì§‘í•©: ì •ë ¬ëœ ë¦¬ìŠ¤íŠ¸ë¡œ ë³€í™˜

2. **ê²½ë¡œ ì •ê·œí™”**
   - ì ˆëŒ€ ê²½ë¡œ â†’ ìƒëŒ€ ê²½ë¡œ ë³€í™˜
   - OS ê²½ë¡œ êµ¬ë¶„ì í†µì¼ (`\` â†’ `/`)
   - ê²½ë¡œ ëŒ€ì†Œë¬¸ì í†µì¼ (í•„ìš” ì‹œ)

3. **ë¹„ê²°ì • í•„ë“œ ì œê±°**
   - íƒ€ì„ìŠ¤íƒ¬í”„ (`mtime`, `created_at` ë“±)
   - ì„±ëŠ¥ ì •ë³´ (`duration`, `memory_usage` ë“±)
   - ì„ì‹œ ID (UUID, ëœë¤ ID ë“±)
   - í”„ë¡œì„¸ìŠ¤ ID, ìŠ¤ë ˆë“œ ID

4. **ìˆ«ì ë°˜ì˜¬ë¦¼**
   - ì‹¤ìˆ˜ ë¹„êµë¥¼ ìœ„í•œ ë°˜ì˜¬ë¦¼ (ì†Œìˆ˜ì  6ìë¦¬ ê¶Œì¥)
   - ë¶€ë™ì†Œìˆ˜ì  ì˜¤ì°¨ ë³´ì •

##### Step 0.5.3: ì„±ëŠ¥ ë²¤ì¹˜ë§ˆí¬ ê¸°ì¤€ì„  ì¸¡ì •
- [ ] `tests/performance/` ë””ë ‰í† ë¦¬ ìƒì„±
- [ ] ì„±ëŠ¥ ì¸¡ì • ìŠ¤í¬ë¦½íŠ¸ ì‘ì„± (`benchmark_baseline.py`)
- [ ] ì¸¡ì • í•­ëª© ì •ì˜ ë° êµ¬í˜„:
  - [ ] **ìŠ¤ìº” ì²˜ë¦¬ëŸ‰**: `files/sec` (1000ê°œ íŒŒì¼ ê¸°ì¤€)
  - [ ] **ì¤‘ë³µ íƒì§€ ì²˜ë¦¬ëŸ‰**: `comparisons/sec` ë˜ëŠ” `groups/sec`
  - [ ] **ë©”ëª¨ë¦¬ ì‚¬ìš©ëŸ‰**: peak RSS (MB)
  - [ ] **CPU ì‹œê°„**: process time (ì´ˆ)
- [ ] ê¸°ì¤€ì„  ì¸¡ì • ì‹¤í–‰ (3íšŒ í‰ê· )
- [ ] ê²°ê³¼ë¥¼ JSON íŒŒì¼ë¡œ ì €ì¥ (`benchmark_baseline.json`)
  ```json
  {
    "scan_throughput": {"files_per_sec": 35.2, "tolerance": 0.05},
    "duplicate_detection": {"groups_per_sec": 120.5, "tolerance": 0.05},
    "memory_peak_rss_mb": 245.8,
    "cpu_time_seconds": 28.4
  }
  ```
- [ ] ë²¤ì¹˜ë§ˆí¬ ë¬¸ì„œí™” (`docs/performance/benchmark_baseline.md`)

##### Step 0.5.4: íšŒê·€ í…ŒìŠ¤íŠ¸ ìë™í™” (ì‹¤íŒ¨ í›„ ì•¡ì…˜ í¬í•¨!)
- [ ] ê° Phase ì™„ë£Œ ì‹œ Golden Tests ìë™ ì‹¤í–‰ ìŠ¤í¬ë¦½íŠ¸ ì‘ì„±
- [ ] ì„±ëŠ¥ ë²¤ì¹˜ë§ˆí¬ ìë™ ì‹¤í–‰ ë° ë¹„êµ ìŠ¤í¬ë¦½íŠ¸ ì‘ì„±
  - [ ] ê¸°ì¤€ì„  ëŒ€ë¹„ Â±5% ì´ë‚´ í™•ì¸
  - [ ] ë²—ì–´ë‚˜ë©´ ê²½ê³  (soft gate)
  - [ ] Â±10% ì´ˆê³¼ ì‹œ ì‹¤íŒ¨ (hard gate)
  - [ ] **ì‹¤íŒ¨ í›„ ì•¡ì…˜ (v1.3 ê·œì¹™)**:
    ```python
    # benchmark_gate.py
    def check_performance_gate(measured: dict, baseline: dict, env: str = "local") -> bool:
        """ì„±ëŠ¥ ê²Œì´íŠ¸ ì²´í¬."""
        for metric, value in measured.items():
            baseline_value = baseline[metric]
            diff_percent = abs(value - baseline_value) / baseline_value * 100
            
            if diff_percent > 10:  # hard gate
                if env == "ci":
                    print(f"ERROR: {metric} ì„±ëŠ¥ íšŒê·€ {diff_percent:.1f}% (ê¸°ì¤€ì„  Â±10% ì´ˆê³¼)")
                    print("PR block: ì„±ëŠ¥ ê¸°ì¤€ ë¯¸ë‹¬")
                    return False  # CIì—ì„œ PR block
                else:
                    print(f"WARNING: {metric} ì„±ëŠ¥ íšŒê·€ {diff_percent:.1f}% (ê¸°ì¤€ì„  Â±10% ì´ˆê³¼)")
                    # ë¡œì»¬ì—ì„œëŠ” ê²½ê³ ë§Œ
            elif diff_percent > 5:  # soft gate
                print(f"WARNING: {metric} ì„±ëŠ¥ ë³€í™” {diff_percent:.1f}% (ê¸°ì¤€ì„  Â±5% ì´ˆê³¼)")
        return True
    ```
- [ ] CI/CDì— í†µí•©
  - [ ] **CI í™˜ê²½ í¸ì°¨ ê³ ë ¤ì‚¬í•­ (v1.4 ë°˜ì˜)**:
    - [ ] CI ì„±ëŠ¥ ì¸¡ì •ì€ "ê²½í–¥ì„± ê°ì§€(ê²½ê³ )" ì¤‘ì‹¬ìœ¼ë¡œ ë‘ê³ , hard gateëŠ” **ì „ìš© runner/ê³ ì • ë¦¬ì†ŒìŠ¤ í™˜ê²½**ì—ì„œë§Œ ê°•í•˜ê²Œ ê±°ëŠ” ì˜µì…˜ ì¶”ê°€
    - [ ] CI í™˜ê²½ì˜ ì‹œìŠ¤í…œ ë¶€í•˜/ë¦¬ì†ŒìŠ¤ í¸ì°¨ë¥¼ ê³ ë ¤í•˜ì—¬ ë” ë„“ì€ í—ˆìš© ë²”ìœ„ ì ìš© (ì˜ˆ: Â±10% â†’ Â±15%)
    - [ ] ë¡œì»¬ í™˜ê²½: Â±5% ì´ˆê³¼ ì‹œ ê²½ê³  (soft gate), Â±10% ì´ˆê³¼ ì‹œ ê²½ê³ ë§Œ (hard gate ì—†ìŒ)
    - [ ] CI í™˜ê²½: Â±5% ì´ˆê³¼ ì‹œ ê²½ê³ ë§Œ (soft gate, ì„±ëŠ¥ í¸ì°¨ ê³ ë ¤), Â±10% ì´ˆê³¼ ì‹œ **PR block** (hard gate, ì „ìš© runnerì—ì„œë§Œ)
  - [ ] CIì—ì„œ hard gate ì‹¤íŒ¨ ì‹œ **PR block** ì„¤ì •
  - [ ] ë¡œì»¬ì—ì„œëŠ” ê²½ê³ ë§Œ ì¶œë ¥ (ì‘ì—… ê³„ì† ê°€ëŠ¥)
- [ ] í…ŒìŠ¤íŠ¸ ì‹¤íŒ¨ ì‹œ ìë™ ë¡¤ë°± ì˜µì…˜ ê²€í†  (ì„ íƒì )
  - [ ] Git tag ê¸°ë°˜ ë¡¤ë°± ìŠ¤í¬ë¦½íŠ¸ ì‘ì„± (í•„ìš” ì‹œ)

#### ì„±ëŠ¥ ì¸¡ì • ê¸°ì¤€ (êµ¬ì²´í™”)

ê° Phase ì™„ë£Œ ì‹œ ë‹¤ìŒ í•­ëª©ì„ ì¸¡ì •í•˜ê³  ê¸°ì¤€ì„  ëŒ€ë¹„ Â±5% ì´ë‚´ ìœ ì§€:

1. **ìŠ¤ìº” ì²˜ë¦¬ëŸ‰** (`files/sec`)
   - ì¸¡ì • ë°©ë²•: 1000ê°œ íŒŒì¼ ìŠ¤ìº” ì‹œê°„ ì¸¡ì •
   - ê¸°ì¤€ì„ : (Phase 0.5ì—ì„œ ì¸¡ì •)
   - í—ˆìš© ë²”ìœ„: ê¸°ì¤€ì„  Â±5%

2. **ì¤‘ë³µ íƒì§€ ì²˜ë¦¬ëŸ‰** (`groups/sec` ë˜ëŠ” `comparisons/sec`)
   - ì¸¡ì • ë°©ë²•: 100ê°œ ì¤‘ë³µ ê·¸ë£¹ íƒì§€ ì‹œê°„ ì¸¡ì •
   - ê¸°ì¤€ì„ : (Phase 0.5ì—ì„œ ì¸¡ì •)
   - í—ˆìš© ë²”ìœ„: ê¸°ì¤€ì„  Â±5%

3. **ë©”ëª¨ë¦¬ ì‚¬ìš©ëŸ‰** (peak RSS, MB)
   - ì¸¡ì • ë°©ë²•: `memory_profiler` ë˜ëŠ” `psutil` ì‚¬ìš©
   - ê¸°ì¤€ì„ : (Phase 0.5ì—ì„œ ì¸¡ì •)
   - í—ˆìš© ë²”ìœ„: ê¸°ì¤€ì„  Â±5% (ë‹¨, ì¦ê°€ëŠ” ìš°ë ¤ ëŒ€ìƒ)

4. **CPU ì‹œê°„** (process time, ì´ˆ)
   - ì¸¡ì • ë°©ë²•: `time.process_time()` ì‚¬ìš©
   - ê¸°ì¤€ì„ : (Phase 0.5ì—ì„œ ì¸¡ì •)
   - í—ˆìš© ë²”ìœ„: ê¸°ì¤€ì„  Â±5%

#### ì˜ˆìƒ ì†Œìš” ì‹œê°„
- Step 0.5.1: 2ì‹œê°„
- Step 0.5.2: 4ì‹œê°„
- Step 0.5.3: 3ì‹œê°„
- Step 0.5.4: 2ì‹œê°„
- **ì´ê³„**: 11ì‹œê°„

---

## ğŸ”„ Phase 1: í­ë°œ ë°˜ê²½ ì œê±° (P0 - ì¦‰ì‹œ)

> **ëª©í‘œ**: ê°€ì¥ ìœ„í—˜í•œ íŒŒì¼ë“¤ì„ ì•ˆì „í•˜ê²Œ ë¶„ë¦¬í•˜ì—¬ ë³€ê²½ ì˜í–¥ ë²”ìœ„ë¥¼ ìµœì†Œí™”

### Phase 1.1: `gui/views/main_window.py` Orchestration ì œê±° ë° Bootstrap ë¶„ë¦¬

#### ëª©í‘œ
- **`gui/views/main_window.py`ì˜ orchestration ë¡œì§ ì œê±°** (ì‹¤ì œ í­ë°œ ë°˜ê²½: 2398ì¤„, 60ê°œ ë©”ì„œë“œ)
- ì• í”Œë¦¬ì¼€ì´ì…˜ ì´ˆê¸°í™” ë¡œì§ì„ `bootstrap.py`ë¡œ ë¶„ë¦¬
- ì›Œí¬í”Œë¡œìš° ë¡œì§ì„ ë³„ë„ ëª¨ë“ˆë¡œ ì¶”ì¶œ
- GUIê°€ domain/infra ì§ì ‘ importí•˜ëŠ” ë¬¸ì œ í•´ì†Œ

#### Before
```python
# src/gui/views/main_window.py (í˜„ì¬)
from infra.db.file_repository import FileRepository  # âŒ ì§ì ‘ import
from domain.models.preview_stats import PreviewStats  # âŒ ì§ì ‘ import
from common.logging import setup_logging  # âŒ ì§ì ‘ import

class MainWindow(QMainWindow):
    def __init__(self) -> None:
        # ì„œë¹„ìŠ¤ ì§ì ‘ ìƒì„± (âŒ orchestration í˜¼ì¬)
        self.repository = FileRepository(...)
        self.usecase = ScanFilesUseCase(self.repository, ...)
        # ... 2398ì¤„, 60ê°œ ë©”ì„œë“œ, orchestration + ë¡œì§ í˜¼ì¬

# src/app/main.py (í˜„ì¬ - ë‹¨ìˆœí•˜ì§€ë§Œ sys.path hack ìˆìŒ)
src_path = Path(__file__).parent.parent
if str(src_path) not in sys.path:
    sys.path.insert(0, str(src_path))  # âŒ ê²½ë¡œ hack
```

#### After
```python
# src/app/main.py (ëª©í‘œ - ì§„ì§œ Entry Point, 10~30ì¤„)
def main() -> None:
    """ì• í”Œë¦¬ì¼€ì´ì…˜ ì§„ì…ì ."""
    from app.bootstrap import create_application
    app = create_application()
    sys.exit(app.exec())

# src/app/bootstrap.py (ìƒˆë¡œ ìƒì„±)
def create_application() -> QApplication:
    """ì• í”Œë¦¬ì¼€ì´ì…˜ ë° ì˜ì¡´ì„± ì£¼ì…."""
    app = QApplication(sys.argv)
    app.setApplicationName("NovelGuard")
    
    # ì˜ì¡´ì„± ì£¼ì… (Bootstrapì—ì„œë§Œ wiring í—ˆìš©)
    repository = FileRepository(...)
    logger = create_std_logger(...)
    scan_usecase = ScanFilesUseCase(repository, ...)
    
    window = MainWindow(scan_usecase, logger, ...)  # ì˜ì¡´ì„± ì£¼ì…
    window.show()
    
    return app

# src/gui/views/main_window.py (ëª©í‘œ - orchestration ì œê±°)
from domain.ports.logger import ILogger  # âœ… Portë§Œ import
# âŒ from infra.db.file_repository import FileRepository  # ì œê±°

class MainWindow(QMainWindow):
    def __init__(self, scan_usecase: ScanFilesUseCase, logger: ILogger, ...) -> None:
        # âœ… ì˜ì¡´ì„± ì£¼ì…ë°›ìŒ (ì§ì ‘ ìƒì„± ê¸ˆì§€)
        self.scan_usecase = scan_usecase
        self.logger = logger
```

#### ì‘ì—… ì²´í¬ë¦¬ìŠ¤íŠ¸

##### Step 1.1.1: Bootstrap ëª¨ë“ˆ ìƒì„±
- [ ] `src/app/bootstrap.py` íŒŒì¼ ìƒì„±
- [ ] `create_application()` í•¨ìˆ˜ êµ¬í˜„
  - [ ] QApplication ìƒì„± ë° ê¸°ë³¸ ì„¤ì •
  - [ ] **ì˜ì¡´ì„± ìƒì„± (Bootstrapì—ì„œë§Œ wiring í—ˆìš©)**:
    - [ ] `FileRepository` ìƒì„±
    - [ ] `ILogger` êµ¬í˜„ì²´ ìƒì„± (`StdLogger`)
    - [ ] UseCaseë“¤ ìƒì„± ë° ì£¼ì…
  - [ ] MainWindow ìƒì„± ì‹œ **ì˜ì¡´ì„± ì£¼ì…** (ìƒì„±ì íŒŒë¼ë¯¸í„°ë¡œ ì „ë‹¬)
- [ ] `setup_application()` í•¨ìˆ˜ êµ¬í˜„
  - [ ] ë¡œê¹… ì´ˆê¸°í™”
  - [ ] ì„¤ì • ë¡œë“œ
  - [ ] í™˜ê²½ ë³€ìˆ˜ ê²€ì¦
- [ ] ë‹¨ìœ„ í…ŒìŠ¤íŠ¸ ì‘ì„± (`tests/app/test_bootstrap.py`)
- [ ] ê¸°ì¡´ ë™ì‘ê³¼ ë™ì¼ í™•ì¸ (Golden Tests)

##### Step 1.1.2: ì›Œí¬í”Œë¡œìš° ëª¨ë“ˆ ë¶„ë¦¬ (usecases ì¡°í•©ë§Œ! ë¡œì§ ê¸ˆì§€!)
- [ ] `src/app/workflows/` ë””ë ‰í† ë¦¬ ìƒì„±
- [ ] `src/app/workflows/__init__.py` ìƒì„±
- [ ] `src/app/workflows/scan_flow.py` ìƒì„±
  - [ ] **ì›Œí¬í”Œë¡œìš°ëŠ” UseCase ì¡°í•©ë§Œ ìˆ˜í–‰** (ë¡œì§ ì¶”ê°€ ê¸ˆì§€!)
  - [ ] **ë¡œì§ ê¸ˆì§€ ì •ì˜**:
    - âŒ ì¡°ê±´ë¬¸/í•„í„°ë§ ê°™ì€ íŒë‹¨ ë¡œì§ ê¸ˆì§€ â†’ UseCase/Serviceë¡œ ë‚´ë ¤ì•¼ í•¨
    - âŒ ê³„ì‚°/ë³€í™˜ ë¡œì§ ê¸ˆì§€ â†’ UseCase/Serviceë¡œ ë‚´ë ¤ì•¼ í•¨
    - âŒ ì—ëŸ¬ í•¸ë“¤ë§ ë¡œì§ ê¸ˆì§€ â†’ UseCaseì—ì„œ ì²˜ë¦¬
    - âœ… UseCase í˜¸ì¶œ ìˆœì„œ ì •ì˜ë§Œ í—ˆìš©
    - âœ… UseCase ê²°ê³¼ë¥¼ ë‹¤ìŒ UseCase ì…ë ¥ìœ¼ë¡œ ì „ë‹¬ë§Œ í—ˆìš©
  - [ ] ì˜ˆì‹œ (ì˜¬ë°”ë¥¸ ì¡°í•©):
    ```python
    class ScanFlow:
        def __init__(self, scan_usecase: ScanFilesUseCase, 
                     duplicate_usecase: FindDuplicatesUseCase):
            self.scan_usecase = scan_usecase
            self.duplicate_usecase = duplicate_usecase
        
        def execute(self, root_path: Path) -> ScanResult:
            # UseCaseë“¤ì„ ìˆœì°¨ì ìœ¼ë¡œ í˜¸ì¶œë§Œ í•¨ (ì¡°í•©ë§Œ!)
            files = self.scan_usecase.execute(root_path)
            groups = self.duplicate_usecase.execute(files)
            return ScanResult(files, groups)
    ```
  - [ ] ì˜ˆì‹œ (ì˜ëª»ëœ ë¡œì§ í¬í•¨ - ê¸ˆì§€!):
    ```python
    class ScanFlow:
        def execute(self, root_path: Path) -> ScanResult:
            files = self.scan_usecase.execute(root_path)
            # âŒ ê¸ˆì§€: ì¡°ê±´ë¬¸/í•„í„°ë§ ë¡œì§
            filtered = [f for f in files if f.size > 1000]  # UseCaseë¡œ ë‚´ë ¤ì•¼!
            # âŒ ê¸ˆì§€: ê³„ì‚° ë¡œì§
            total_size = sum(f.size for f in files)  # Serviceë¡œ ë‚´ë ¤ì•¼!
            groups = self.duplicate_usecase.execute(filtered)
            return ScanResult(filtered, groups)
    ```
  - [ ] MainWindowì—ì„œ ë¶„ë¦¬
  - [ ] ì˜ì¡´ì„± ëª…ì‹œì  ì£¼ì… (UseCaseë“¤)
- [ ] `src/app/workflows/analyze_flow.py` ìƒì„± (í–¥í›„ í™•ì¥ìš©)
  - [ ] ë™ì¼í•œ ì›ì¹™ ì ìš© (UseCase ì¡°í•©ë§Œ, ë¡œì§ ê¸ˆì§€)
- [ ] MainWindowì—ì„œ ì›Œí¬í”Œë¡œìš° ëª¨ë“ˆ ì‚¬ìš©í•˜ë„ë¡ ë³€ê²½
- [ ] í†µí•© í…ŒìŠ¤íŠ¸ ì‘ì„± (`tests/app/test_workflows.py`)
  - [ ] UseCase Mockì„ ì£¼ì…í•˜ì—¬ ì¡°í•© ë™ì‘ë§Œ í…ŒìŠ¤íŠ¸
  - [ ] **êµ¬ì¡° í…ŒìŠ¤íŠ¸ ì‘ì„± (í•„ìˆ˜! v1.3 ê·œì¹™ - AST ê¸°ë°˜ ê²€ì¦)**:
    ```python
    import ast
    import inspect
    
    def test_workflow_contains_no_branching_logic():
        """ì›Œí¬í”Œë¡œìš°ì— ì¡°ê±´ë¬¸/ë°˜ë³µë¬¸ì´ ì—†ëŠ”ì§€ AST ê¸°ë°˜ ê²€ì¦."""
        src = inspect.getsource(ScanFlow.execute)
        tree = ast.parse(src)
        
        # ê¸ˆì§€ëœ ë…¸ë“œ íƒ€ì… ëª©ë¡
        forbidden_nodes = (
            ast.If, ast.For, ast.While, ast.ListComp, ast.DictComp,
            ast.SetComp, ast.GeneratorExp, ast.Lambda
        )
        
        # AST íŠ¸ë¦¬ì—ì„œ ê¸ˆì§€ëœ ë…¸ë“œ ê²€ìƒ‰
        for node in ast.walk(tree):
            if isinstance(node, forbidden_nodes):
                node_type = type(node).__name__
                raise AssertionError(
                    f"Workflowì— ê¸ˆì§€ëœ {node_type} ë…¸ë“œ ë°œê²¬: "
                    f"{ast.get_source_segment(src, node) or 'N/A'}"
                )
        
        # ë¬¸ìì—´ ê²€ì‚¬ë¡œëŠ” ë¶€ì¡±í•˜ë¯€ë¡œ AST ê¸°ë°˜ ê²€ì¦ í•„ìˆ˜
        # ì£¼ì„/ë¬¸ìì—´/í¬ë§·íŒ…ì— ì˜í•œ ì˜¤íƒ ë°©ì§€
    
    def test_workflow_only_calls_usecases():
        """ì›Œí¬í”Œë¡œìš°ê°€ UseCase í˜¸ì¶œë§Œ ìˆ˜í–‰í•˜ëŠ”ì§€ AST ê¸°ë°˜ ê²€ì¦."""
        src = inspect.getsource(ScanFlow.execute)
        tree = ast.parse(src)
        
        # í—ˆìš©ëœ ë…¸ë“œ íƒ€ì… (í• ë‹¹, ë°˜í™˜, ì†ì„± ì ‘ê·¼, í•¨ìˆ˜ í˜¸ì¶œë§Œ)
        allowed_patterns = [
            ast.Assign,  # ë³€ìˆ˜ í• ë‹¹
            ast.Return,  # ë°˜í™˜
            ast.Expr,    # í‘œí˜„ì‹ (UseCase í˜¸ì¶œ)
        ]
        
        # í•¨ìˆ˜ ì •ì˜ ë‚´ë¶€ì˜ ëª¨ë“  ë¬¸(statement) ê²€ì‚¬
        for node in ast.walk(tree):
            if isinstance(node, ast.FunctionDef) and node.name == "execute":
                for stmt in node.body:
                    # í—ˆìš©ëœ íŒ¨í„´ì´ ì•„ë‹ˆë©´ ê²½ê³ 
                    if not isinstance(stmt, tuple(allowed_patterns) + (ast.Pass,)):
                        # í•¨ìˆ˜ í˜¸ì¶œì¸ ê²½ìš° UseCase í˜¸ì¶œ íŒ¨í„´ í™•ì¸
                        if isinstance(stmt, ast.Expr) and isinstance(stmt.value, ast.Call):
                            # self.xxx_usecase.execute() íŒ¨í„´ í™•ì¸
                            if not (isinstance(stmt.value.func, ast.Attribute) and
                                   isinstance(stmt.value.func.value, ast.Attribute) and
                                   stmt.value.func.value.attr.endswith("_usecase")):
                                raise AssertionError(
                                    f"Workflowì— í—ˆìš©ë˜ì§€ ì•Šì€ í˜¸ì¶œ: "
                                    f"{ast.get_source_segment(src, stmt)}"
                                )
    ```
  - [ ] ì¡°ê±´ë¬¸/í•„í„°ë§ ë¡œì§ì´ ì—†ëŠ”ì§€ ê²€ì¦ (ìë™í™”ëœ êµ¬ì¡° í…ŒìŠ¤íŠ¸ë¡œ)
- [ ] ê¸°ì¡´ ê¸°ëŠ¥ ë™ì‘ í™•ì¸

##### Step 1.1.3: MainWindow ì˜ì¡´ì„± ëª…ì‹œí™” ë° ì§ì ‘ import ì œê±°
- [ ] MainWindow ìƒì„±ìì—ì„œ ì˜ì¡´ì„± ë°›ë„ë¡ ë³€ê²½
  - [ ] `ResultStore` ì£¼ì…
  - [ ] UseCaseë“¤ ì£¼ì… (`ScanFilesUseCase`, `FindDuplicatesUseCase` ë“±)
  - [ ] `ILogger` ì£¼ì… (Port ì¸í„°í˜ì´ìŠ¤)
  - [ ] **`FileRepository` ì§ì ‘ ìƒì„± ì œê±°** (UseCaseë¥¼ í†µí•´ ê°„ì ‘ ì ‘ê·¼)
- [ ] **GUIì—ì„œ domain/infra ì§ì ‘ import ì œê±°**:
  - [ ] `from infra.db.file_repository import FileRepository` ì œê±°
  - [ ] `from domain.models.*` ì§ì ‘ import ì œê±° (í•„ìš” ì‹œ UseCase ê²°ê³¼ë§Œ ì‚¬ìš©)
  - [ ] `from common.logging import setup_logging` ì œê±° â†’ `ILogger` Port ì‚¬ìš©
- [ ] Factory íŒ¨í„´ ë„ì… (ì„ íƒì )
  - [ ] `create_main_window()` í•¨ìˆ˜ ìƒì„± (Bootstrapì—ì„œ ì‚¬ìš©)
- [ ] ë‹¨ìœ„ í…ŒìŠ¤íŠ¸ ì‘ì„± (ì˜ì¡´ì„± Mock)
- [ ] GUI í…ŒìŠ¤íŠ¸ë¡œ ìˆ˜ë™ í™•ì¸
- [ ] **ì˜ì¡´ì„± ë°©í–¥ ê²€ì¦**: `grep -r "from infra\|from domain" gui/views/main_window.py` ê²°ê³¼ ì—†ìŒ í™•ì¸

##### Step 1.1.4: ë‹¨ì¼ ì—”íŠ¸ë¦¬í¬ì¸íŠ¸ ì›ì¹™ ì ìš© ë° sys.path hack ì œê±°
- [ ] `src/app/main.py`ì—ì„œ **sys.path hack ì œê±°**
  - [ ] ì˜¬ë°”ë¥¸ import ê²½ë¡œ ì‚¬ìš© (ìƒëŒ€ import ë˜ëŠ” íŒ¨í‚¤ì§€ êµ¬ì¡° ê°œì„ )
  - [ ] `src/`ë¥¼ íŒ¨í‚¤ì§€ë¡œ êµ¬ì„±í•˜ì—¬ ê²½ë¡œ hack ë¶ˆí•„ìš”í•˜ê²Œ
- [ ] `src/main.py`ê°€ `app/main.py`ë¥¼ í˜¸ì¶œí•˜ë„ë¡ ìˆ˜ì • (ê¸°ì¡´ í˜¸í™˜ì„±)
  - [ ] ë‹¨ìˆœíˆ `from app.main import main; main()` í˜¸ì¶œ
  - [ ] sys.path hack ì—†ì´ ë™ì‘í•˜ë„ë¡
- [ ] ëª¨ë“  ë‹¤ë¥¸ ì§„ì…ì  ì œê±° ë˜ëŠ” `app/main.py`ë¡œ ë¦¬ë‹¤ì´ë ‰íŠ¸
- [ ] ì§„ì…ì  ë¬¸ì„œí™” (`docs/entry_points.md`)
- [ ] ì‹¤í–‰ ìŠ¤í¬ë¦½íŠ¸(`run.bat`, `run.ps1`) ì—…ë°ì´íŠ¸ í™•ì¸
- [ ] ë¬¸ì„œ ì—…ë°ì´íŠ¸ (`README.md`, `protocols/development_protocol.md`)

#### ë¦¬ìŠ¤í¬ ê´€ë¦¬
- **ë¦¬ìŠ¤í¬**: GUI íŒŒì´í”„ë¼ì¸ ì¡°ë¦½ ë¡œì§ ë¶„ë¦¬ ì‹œ ì—°ê²° ì˜¤ë¥˜ ê°€ëŠ¥
- **ì™„í™”ì±…**: 
  - ë‹¨ê³„ë³„ ë¦¬íŒ©í† ë§ (í•œ ë²ˆì— í•˜ë‚˜ì”©)
  - ê° ë‹¨ê³„ë§ˆë‹¤ í…ŒìŠ¤íŠ¸ ë° ìˆ˜ë™ í™•ì¸
  - Git ë¸Œëœì¹˜ í™œìš© (`refactor/bootstrap-separation`)

#### ì˜ˆìƒ ì†Œìš” ì‹œê°„
- Step 1.1.1: 2ì‹œê°„
- Step 1.1.2: 3ì‹œê°„
- Step 1.1.3: 2ì‹œê°„
- Step 1.1.4: 1ì‹œê°„
- **ì´ê³„**: 8ì‹œê°„

---

### Phase 1.15: Ports ì •ì˜ ë° Infrastructure ë§ˆìŠ¤í‚¹ (ì¤‘ìš”!)

> **ëª©í‘œ**: Domain/UseCaseê°€ Infrastructureì— ì˜ì¡´í•˜ì§€ ì•Šë„ë¡ Ports(ì¸í„°í˜ì´ìŠ¤) ì •ì˜ ë° ê¸°ì¡´ infraë¥¼ í¬íŠ¸ ë’¤ë¡œ ìˆ¨ê¸°ê¸°

#### ëª©í‘œ
- Domain Ports ì •ì˜ (ì¸í„°í˜ì´ìŠ¤)
- ê¸°ì¡´ Infrastructureë¥¼ Ports êµ¬í˜„ìœ¼ë¡œ ë§ˆìŠ¤í‚¹
- Domain/UseCaseì—ì„œ Portsë§Œ importí•˜ë„ë¡ ì „í™˜

#### ì‘ì—… ì²´í¬ë¦¬ìŠ¤íŠ¸

##### Step 1.15.1: Domain Ports ì •ì˜ (ê¸°ì¡´ êµ¬í˜„ì²´ APIë¥¼ ìŠ¤ìº”í•˜ì—¬ ì¶”ì¶œ! + ë³€ê²½ ê°€ë“œ!)
- [ ] `src/domain/ports/` ë””ë ‰í† ë¦¬ ìƒì„±
- [ ] `src/domain/ports/__init__.py` ìƒì„± (export)
- [ ] **ê¸°ì¡´ Infrastructure êµ¬í˜„ì²´ì˜ public API ìŠ¤ìº”** (í¬íŠ¸ ì •ì˜ ì „ í•„ìˆ˜!)
  - [ ] `infra/db/file_repository.py`ì˜ `FileRepository` í´ë˜ìŠ¤ ë©”ì„œë“œ ëª©ë¡ ì‘ì„±
  - [ ] `infra/hashing/hash_calculator.py`ì˜ `HashCalculator` í´ë˜ìŠ¤ ë©”ì„œë“œ ëª©ë¡ ì‘ì„±
  - [ ] `infra/encoding/encoding_detector.py`ì˜ `EncodingDetector` í´ë˜ìŠ¤ ë©”ì„œë“œ ëª©ë¡ ì‘ì„±
  - [ ] ì‹¤ì œ ì‚¬ìš©ë˜ëŠ” ë©”ì„œë“œë§Œ Protocolì— í¬í•¨ (ë¶ˆí•„ìš”í•œ ë©”ì„œë“œ ì œì™¸)
- [ ] `src/domain/ports/file_repository.py` ìƒì„±
  - [ ] `IFileRepository` Protocol ì •ì˜ (Python `typing.Protocol`)
  - [ ] **`@runtime_checkable` ë°ì½”ë ˆì´í„° ì¶”ê°€ (í•„ìˆ˜!)**:
    ```python
    from typing import Protocol, runtime_checkable
    
    @runtime_checkable
    class IFileRepository(Protocol):
        """íŒŒì¼ ì €ì¥ì†Œ ì¸í„°í˜ì´ìŠ¤."""
        def save_meta(self, file_meta: FileMeta) -> None: ...
        def find_by_id(self, file_id: int) -> Optional[File]: ...
        # ...
    ```
  - [ ] **ê¸°ì¡´ êµ¬í˜„ì²´ì˜ ì‹¤ì œ ì‹œê·¸ë‹ˆì²˜ë¥¼ ê·¸ëŒ€ë¡œ ë°˜ì˜** (ì´ˆê¸° í¬íŠ¸ ì •ì˜ëŠ” í˜„ì¬ infra APIë¥¼ íˆ¬ì˜)
  - [ ] ì˜ˆì‹œ: `save_meta(file_meta: FileMeta) -> None` (ì‹¤ì œ ë©”ì„œë“œ ì‹œê·¸ë‹ˆì²˜ í™•ì¸ í›„ ìˆ˜ì •)
  - [ ] ì˜ˆì‹œ: `find_by_id(file_id: int) -> Optional[File]` (ì‹¤ì œ ë©”ì„œë“œ ì‹œê·¸ë‹ˆì²˜ í™•ì¸ í›„ ìˆ˜ì •)
  - [ ] ì˜ˆì‹œ: `find_all() -> list[File]` (ì‹¤ì œ ë©”ì„œë“œ ì¡´ì¬ ì‹œì—ë§Œ í¬í•¨)
  - [ ] íƒ€ì… íŒíŒ… ëª…í™•íˆ
- [ ] `src/domain/ports/hash_service.py` ìƒì„±
  - [ ] `IHashService` Protocol ì •ì˜
  - [ ] **`@runtime_checkable` ë°ì½”ë ˆì´í„° ì¶”ê°€ (í•„ìˆ˜!)**:
    ```python
    from typing import Protocol, runtime_checkable
    
    @runtime_checkable
    class IHashService(Protocol):
        """í•´ì‹œ ì„œë¹„ìŠ¤ ì¸í„°í˜ì´ìŠ¤."""
        def calculate_md5(self, file_path: Path) -> str: ...
        # ...
    ```
  - [ ] **ê¸°ì¡´ êµ¬í˜„ì²´ì˜ ì‹¤ì œ ì‹œê·¸ë‹ˆì²˜ë¥¼ ê·¸ëŒ€ë¡œ ë°˜ì˜**
  - [ ] ì˜ˆì‹œ: `calculate_md5(file_path: Path) -> str` (ì‹¤ì œ ë©”ì„œë“œ ì‹œê·¸ë‹ˆì²˜ í™•ì¸ í›„ ìˆ˜ì •)
  - [ ] ì˜ˆì‹œ: `calculate_sha256(file_path: Path) -> str` (ì‹¤ì œ ë©”ì„œë“œ ì¡´ì¬ ì‹œì—ë§Œ í¬í•¨)
  - [ ] ì˜ˆì‹œ: `calculate_fingerprint(file_path: Path) -> str` (ì‹¤ì œ ë©”ì„œë“œ ì¡´ì¬ ì‹œì—ë§Œ í¬í•¨)
- [ ] `src/domain/ports/encoding_detector.py` ìƒì„±
  - [ ] `IEncodingDetector` Protocol ì •ì˜
  - [ ] **`@runtime_checkable` ë°ì½”ë ˆì´í„° ì¶”ê°€ (í•„ìˆ˜!)**:
    ```python
    from typing import Protocol, runtime_checkable
    
    @runtime_checkable
    class IEncodingDetector(Protocol):
        """ì¸ì½”ë”© ê°ì§€ ì¸í„°í˜ì´ìŠ¤."""
        def detect_encoding(self, file_path: Path) -> EncodingResult: ...
        # ...
    ```
  - [ ] **ê¸°ì¡´ êµ¬í˜„ì²´ì˜ ì‹¤ì œ ì‹œê·¸ë‹ˆì²˜ë¥¼ ê·¸ëŒ€ë¡œ ë°˜ì˜**
  - [ ] ì˜ˆì‹œ: `detect_encoding(file_path: Path) -> EncodingResult` (ì‹¤ì œ ë©”ì„œë“œ ì‹œê·¸ë‹ˆì²˜ í™•ì¸ í›„ ìˆ˜ì •)
  - [ ] `EncodingResult` ValueObject ì •ì˜ (`domain/value_objects/encoding_result.py`, dataclass)
- [ ] ë‹¨ìœ„ í…ŒìŠ¤íŠ¸ ì‘ì„± (`tests/domain/ports/test_*.py`)
  - [ ] Protocol ì •ì˜ê°€ ì˜¬ë°”ë¥¸ì§€ í™•ì¸
  - [ ] **`@runtime_checkable` ì ìš© í›„ ì‹¤ì œ êµ¬í˜„ì²´ê°€ Protocolì„ êµ¬í˜„í•˜ëŠ”ì§€ í™•ì¸**:
    ```python
    def test_file_repository_implements_protocol():
        """FileRepositoryê°€ IFileRepository Protocolì„ êµ¬í˜„í•˜ëŠ”ì§€ í™•ì¸."""
        from infra.db.file_repository import FileRepository
        from domain.ports.file_repository import IFileRepository
        
        repo = FileRepository(...)
        # @runtime_checkableì´ ì—†ìœ¼ë©´ False ë°˜í™˜ (ì£¼ì˜!)
        assert isinstance(repo, IFileRepository), "FileRepositoryëŠ” IFileRepositoryë¥¼ êµ¬í˜„í•´ì•¼ í•¨"
    ```

**ì¤‘ìš”**: 
- Ports ì‹œê·¸ë‹ˆì²˜ëŠ” ë¬¸ì„œì— í™•ì •ê°’ìœ¼ë¡œ ë°•ì§€ ë§ê³ , "ì´ˆê¸° í¬íŠ¸ ì •ì˜ëŠ” í˜„ì¬ infra APIë¥¼ ê·¸ëŒ€ë¡œ íˆ¬ì˜"ì´ë¼ê³  ëª…ì‹œ. ì‹¤ì œ êµ¬í˜„ ì‹œ ê¸°ì¡´ êµ¬í˜„ì²´ë¥¼ ë¨¼ì € ë¶„ì„í•˜ì—¬ í•„ìš”í•œ ë©”ì„œë“œë§Œ í¬í•¨.
- **`@runtime_checkable` ë°ì½”ë ˆì´í„° í•„ìˆ˜**: Protocolì„ ëŸ°íƒ€ì„ì—ì„œ `isinstance(impl, IPort)`ë¡œ ê²€ì‚¬í•˜ë ¤ë©´ `from typing import runtime_checkable` ë° `@runtime_checkable` ë°ì½”ë ˆì´í„°ê°€ ë°˜ë“œì‹œ í•„ìš”í•©ë‹ˆë‹¤. ì´ ê·œì¹™ì´ ì—†ìœ¼ë©´ ê³„íšì„œì˜ í…ŒìŠ¤íŠ¸ ì˜ˆì‹œê°€ ë™ì‘í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.

**Ports ë³€ê²½ ê°€ë“œ (v1.3 ê·œì¹™)**:
- Port ë³€ê²½ ì‹œ **ë°˜ë“œì‹œ Decision Logì— ê¸°ë¡** (í•„ìˆ˜!)
- PortëŠ” "UseCase ìš”êµ¬"ê°€ ì•„ë‹Œ **"Domain í•„ìš”" ê¸°ì¤€**ìœ¼ë¡œë§Œ í™•ì¥
- ìƒˆ ê¸°ëŠ¥ ì¶”ê°€ ì‹œ "Portì— ë©”ì„œë“œ í•˜ë‚˜ë§Œ ë”..."ëŠ” ê¸ˆì§€ (Port ë¹„ëŒ€í™” ë°©ì§€)
- Port ë³€ê²½ì€ Phase 1.15 ì´í›„ **Phaseë³„ ë¦¬ë·° ì‹œì ì—ë§Œ í—ˆìš©**
- Port ë³€ê²½ ì‹œ ì²´í¬ë¦¬ìŠ¤íŠ¸:
  - [ ] Decision Logì— ë³€ê²½ ì´ìœ  ê¸°ë¡
  - [ ] Domain ê³„ì¸µì—ì„œ ì‹¤ì œë¡œ í•„ìš”í•œê°€? ê²€ì¦
  - [ ] ê¸°ì¡´ Portë¡œ ëŒ€ì²´ ë¶ˆê°€ëŠ¥í•œê°€? ê²€í† 
  - [ ] Port ë³€ê²½ì´ Domain ìˆœìˆ˜ì„±ì„ í•´ì¹˜ì§€ ì•ŠëŠ”ê°€? í™•ì¸

##### Step 1.15.2: ê¸°ì¡´ Infrastructureë¥¼ Ports êµ¬í˜„ìœ¼ë¡œ ì „í™˜
- [ ] `infra/db/file_repository.py` ìˆ˜ì •
  - [ ] `FileRepository` í´ë˜ìŠ¤ê°€ `IFileRepository` êµ¬í˜„í•˜ë„ë¡ ë³€ê²½
  - [ ] ê¸°ì¡´ ë¡œì§ ìœ ì§€ (ë³€ê²½ ì—†ìŒ, ë‹¨ Protocol êµ¬í˜„ë§Œ)
- [ ] `infra/hashing/hash_calculator.py` ìˆ˜ì •
  - [ ] `HashCalculator` í´ë˜ìŠ¤ê°€ `IHashService` êµ¬í˜„í•˜ë„ë¡ ë³€ê²½
- [ ] `infra/encoding/encoding_detector.py` ìˆ˜ì •
  - [ ] `EncodingDetector` í´ë˜ìŠ¤ê°€ `IEncodingDetector` êµ¬í˜„í•˜ë„ë¡ ë³€ê²½
- [ ] ê° êµ¬í˜„ì²´ì— ë‹¨ìœ„ í…ŒìŠ¤íŠ¸ ì‘ì„± (Protocol ì¤€ìˆ˜ í™•ì¸)

##### Step 1.15.3: UseCaseì—ì„œ Portsë§Œ importí•˜ë„ë¡ ë³€ê²½
- [ ] `usecases/scan_files.py` ìˆ˜ì •
  - [ ] `from infra.db.file_repository import FileRepository` ì œê±°
  - [ ] `from domain.ports.file_repository import IFileRepository` ì¶”ê°€
  - [ ] ìƒì„±ìì—ì„œ `IFileRepository` ë°›ë„ë¡ ë³€ê²½
  - [ ] Bootstrapì—ì„œ êµ¬í˜„ì²´ ì£¼ì…
- [ ] ë‹¤ë¥¸ UseCaseë“¤ë„ ë™ì¼í•˜ê²Œ ë³€ê²½
- [ ] Domain Serviceì—ì„œë„ Portsë§Œ importí•˜ë„ë¡ ë³€ê²½
- [ ] ë‹¨ìœ„ í…ŒìŠ¤íŠ¸ ì‘ì„± (Mock Port ì‚¬ìš©)
- [ ] í†µí•© í…ŒìŠ¤íŠ¸ë¡œ ë™ì‘ í™•ì¸

##### Step 1.15.4: ì •ë¦¬ ë° ê²€ì¦
- [ ] Domain/UseCaseì—ì„œ `infra/` ì§ì ‘ import ê²€ìƒ‰ (`grep -r "from infra"`)
- [ ] ë°œê²¬ëœ ëª¨ë“  ì§ì ‘ import ì œê±°
- [ ] Bootstrapì—ì„œ ëª¨ë“  ì˜ì¡´ì„± ì£¼ì… (DI ì»¨í…Œì´ë„ˆ ë„ì… ê²€í† )
- [ ] ì˜ì¡´ì„± ë°©í–¥ ê²€ì¦ (ì˜ì¡´ì„± ê·¸ë˜í”„ ìƒì„±)
- [ ] ë¬¸ì„œ ì—…ë°ì´íŠ¸

#### ë¦¬ìŠ¤í¬ ê´€ë¦¬
- **ë¦¬ìŠ¤í¬**: ê¸°ì¡´ ì½”ë“œì™€ì˜ í˜¸í™˜ì„± ê¹¨ì§
  - **ì™„í™”ì±…**: ì ì§„ì  ì „í™˜, ì–´ëŒ‘í„° íŒ¨í„´ í™œìš©
- **ë¦¬ìŠ¤í¬**: Ports ì •ì˜ê°€ ë¶ˆì™„ì „í•  ìˆ˜ ìˆìŒ
  - **ì™„í™”ì±…**: ê¸°ì¡´ êµ¬í˜„ì²´ë¥¼ ë¨¼ì € ë¶„ì„í•˜ì—¬ í•„ìš”í•œ ë©”ì„œë“œ ëª¨ë‘ í¬í•¨

#### ì˜ˆìƒ ì†Œìš” ì‹œê°„
- Step 1.15.1: 3ì‹œê°„
- Step 1.15.2: 2ì‹œê°„
- Step 1.15.3: 4ì‹œê°„
- Step 1.15.4: 2ì‹œê°„
- **ì´ê³„**: 11ì‹œê°„

---

### Phase 1.2: `domain/models/file_record.py` Pydantic ì œê±° ë° êµ¬ì¡° ì •ë¦¬

#### ëª©í‘œ
- **FileRecordì˜ Pydantic ì˜ì¡´ì„± ì œê±°** (Domain Pydantic ê¸ˆì§€ ì›ì¹™)
- Entity, ValueObject, Serviceë¡œ ì±…ì„ ë¶„ë¦¬
- ìƒíƒœ ê´€ë¦¬ì™€ ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ ë¶„ë¦¬
- í…ŒìŠ¤íŠ¸ ê°€ëŠ¥í•œ ìˆœìˆ˜ í•¨ìˆ˜/í´ë˜ìŠ¤ë¡œ ì „í™˜

#### Before (ë¬¸ì œì )
```python
# domain/models/file_record.py (í˜„ì¬ - ì•½ 70ì¤„)
from pydantic import BaseModel, Field  # âŒ Domainì—ì„œ Pydantic ê¸ˆì§€!

class FileRecord(BaseModel):
    """íŒŒì¼ 1ê°œë¥¼ ëŒ€í‘œí•˜ëŠ” ì •ê·œí™”ëœ ë ˆì½”ë“œ."""
    file_id: int = Field(...)
    path: Path = Field(...)
    # ... 15ê°œ í•„ë“œ
    # ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ì€ ê±°ì˜ ì—†ìœ¼ë‚˜, Pydantic ì˜ì¡´ì„± ì¡´ì¬
    # Phase 2ì—ì„œ ë‹¤ë¥¸ Domain ëª¨ë¸ë“¤(duplicate_group, candidate_edge ë“±)ê³¼ í•¨ê»˜ ëŒ€ëŸ‰ ë§ˆì´ê·¸ë ˆì´ì…˜ í•„ìš”

**ì°¸ê³ **: ì‹¤ì œ ì½”ë“œ ë¶„ì„ ê²°ê³¼ `file_record.py`ëŠ” ì•½ 70ì¤„ë¡œ ì‘ê³  ë©”ì„œë“œë„ ê±°ì˜ ì—†ì–´ "God Model"ì´ë¼ê¸°ë³´ë‹¤ëŠ” **Pydantic ì˜ì¡´ì„± ì œê±°**ê°€ ì£¼ìš” ëª©í‘œì…ë‹ˆë‹¤.
```

#### After (ëª©í‘œ êµ¬ì¡°)
```python
# domain/entities/file.py
class File(Entity):
    """íŒŒì¼ ì—”í‹°í‹° (ì‹ë³„ì + ìƒíƒœ)."""
    file_id: FileId
    path: FilePath  # ValueObject
    metadata: FileMetadata  # ValueObject
    hash_info: FileHashInfo  # ValueObject

# domain/value_objects/file_hash.py
class FileHashInfo(ValueObject):
    """í•´ì‹œ ì •ë³´ ê°’ ê°ì²´ (ë¶ˆë³€)."""
    strong_hash: Optional[str]
    fast_fingerprint: Optional[str]
    normalized_fingerprint: Optional[str]
    simhash64: Optional[int]

# domain/services/file_compare.py
class FileComparisonService:
    """íŒŒì¼ ë¹„êµ ë„ë©”ì¸ ì„œë¹„ìŠ¤."""
    def are_identical(self, file1: File, file2: File) -> bool
    def are_similar(self, file1: File, file2: File, threshold: float) -> bool
```

#### ì‘ì—… ì²´í¬ë¦¬ìŠ¤íŠ¸

##### Step 1.2.1: Value Objects ë¶„ë¦¬ (Pydantic ê¸ˆì§€!)
- [ ] `src/domain/value_objects/` ë””ë ‰í† ë¦¬ ìƒì„±
- [ ] `src/domain/value_objects/__init__.py` ìƒì„± (export)
- [ ] `src/domain/value_objects/file_hash.py` ìƒì„±
  - [ ] `FileHashInfo` í´ë˜ìŠ¤ ì •ì˜ (**dataclass ì‚¬ìš©, Pydantic ê¸ˆì§€!**)
  - [ ] `@dataclass(frozen=True)` ë°ì½”ë ˆì´í„° ì‚¬ìš© (ë¶ˆë³€)
  - [ ] `hash_strong`, `fingerprint_fast`, `fingerprint_norm`, `simhash64` í¬í•¨
  - [ ] ê²€ì¦ ë¡œì§ì€ ìƒì„±ì ë˜ëŠ” í´ë˜ìŠ¤ ë©”ì„œë“œë¡œ êµ¬í˜„ (ìˆœìˆ˜ í•¨ìˆ˜)
- [ ] `src/domain/value_objects/file_path.py` ìƒì„±
  - [ ] `FilePath` í´ë˜ìŠ¤ ì •ì˜ (**dataclass ì‚¬ìš©**)
  - [ ] `@dataclass(frozen=True)` ë°ì½”ë ˆì´í„° ì‚¬ìš©
  - [ ] `path`, `name`, `ext`, `size`, `mtime` í¬í•¨
  - [ ] ê²½ë¡œ ê²€ì¦ ë¡œì§ì€ í´ë˜ìŠ¤ ë©”ì„œë“œë¡œ êµ¬í˜„
- [ ] `src/domain/value_objects/file_metadata.py` ìƒì„±
  - [ ] `FileMetadata` í´ë˜ìŠ¤ ì •ì˜ (**dataclass ì‚¬ìš©**)
  - [ ] `@dataclass(frozen=True)` ë°ì½”ë ˆì´í„° ì‚¬ìš©
  - [ ] `encoding_detected`, `encoding_confidence`, `newline`, `is_text` í¬í•¨
  - [ ] ë©”íƒ€ë°ì´í„° ê²€ì¦ ë¡œì§ì€ í´ë˜ìŠ¤ ë©”ì„œë“œë¡œ êµ¬í˜„
- [ ] ê¸°ì¡´ `FileRecord`ì—ì„œ ValueObjectë¡œ ë§ˆì´ê·¸ë ˆì´ì…˜í•˜ëŠ” í—¬í¼ í•¨ìˆ˜ ì‘ì„±
  - [ ] í—¬í¼ í•¨ìˆ˜ëŠ” `usecases/` ë˜ëŠ” `infra/`ì— ë°°ì¹˜ (Domainì´ ì•„ë‹Œ ê³³)
- [ ] ë‹¨ìœ„ í…ŒìŠ¤íŠ¸ ì‘ì„± (`tests/domain/value_objects/test_file_hash.py` ë“±)
- [ ] Pydantic importê°€ ì—†ëŠ”ì§€ í™•ì¸ (`grep -r "from pydantic" domain/`)
- [ ] ê¸°ì¡´ ì½”ë“œì™€ í˜¸í™˜ì„± í™•ì¸

##### Step 1.2.2: Entity ë¶„ë¦¬
- [ ] `src/domain/entities/` ë””ë ‰í† ë¦¬ ìƒì„±
- [ ] `src/domain/entities/__init__.py` ìƒì„±
- [ ] `src/domain/entities/base.py` ìƒì„±
  - [ ] `Entity` ë² ì´ìŠ¤ í´ë˜ìŠ¤ ì •ì˜ (ì‹ë³„ì ê¸°ë°˜)
  - [ ] `__eq__`, `__hash__` êµ¬í˜„
- [ ] `src/domain/value_objects/file_id.py` ìƒì„± (FileId íƒ€ì… ì •ì˜, domain/value_objectsì—!)
  - [ ] `FileId` íƒ€ì… ì •ì˜ (`NewType` ë˜ëŠ” `TypeAlias` ì‚¬ìš©)
    ```python
    from typing import NewType
    FileId = NewType("FileId", int)  # ë˜ëŠ” intë¥¼ ì§ì ‘ ì‚¬ìš© (ê°„ë‹¨í•œ ê²½ìš°)
    ```
  - [ ] íƒ€ì… ì•ˆì „ì„±ì„ ìœ„í•œ ë˜í¼ (ì„ íƒì , ë³µì¡ë„ vs ì•ˆì „ì„± íŠ¸ë ˆì´ë“œì˜¤í”„)
- [ ] `src/domain/entities/file.py` ìƒì„±
  - [ ] `File` ì—”í‹°í‹° í´ë˜ìŠ¤ ì •ì˜
  - [ ] `file_id: FileId` (domain/value_objects/file_id.pyì—ì„œ import)
  - [ ] `path: FilePath` (ValueObject, ë¶ˆë³€)
  - [ ] `metadata: FileMetadata` (ValueObject, ë¶ˆë³€)
  - [ ] `hash_info: FileHashInfo` (ValueObject, ë¶ˆë³€)
  - [ ] `flags: set[str]` (ìƒíƒœ í”Œë˜ê·¸, ë³€ê²½ ê°€ëŠ¥)
  - [ ] `errors: list[int]` (ë¬´ê²°ì„± ì´ìŠˆ ì°¸ì¡°, ë³€ê²½ ê°€ëŠ¥)
  - [ ] **Entity ë³€ê²½ ê°€ëŠ¥ì„± ê·œì¹™ (v1.3 ê·œì¹™)**:
    - âœ… **í—ˆìš©ë˜ëŠ” ë³€ê²½**:
      - `flags` ì¶”ê°€/ì œê±° (`add_flag()`, `remove_flag()` ë©”ì„œë“œ)
      - `errors` ë¦¬ìŠ¤íŠ¸ì— issue_id ì¶”ê°€/ì œê±° (`add_error()`, `remove_error()` ë©”ì„œë“œ)
      - ë©”íƒ€ë°ì´í„° êµì²´ (`update_metadata(new_metadata: FileMetadata)` - ìƒˆ ValueObjectë¡œ êµì²´)
    - âŒ **ê¸ˆì§€ë˜ëŠ” ë³€ê²½**:
      - `file_id` ë³€ê²½ (ì‹ë³„ìëŠ” ë¶ˆë³€)
      - `path` ì§ì ‘ ìˆ˜ì • (ValueObjectëŠ” ë¶ˆë³€, êµì²´ë§Œ ê°€ëŠ¥)
      - ê³„ì‚°/íŒì • ë¡œì§ (`is_xxx()`, `compute_xxx()` ë“±) â†’ Serviceë¡œ ì´ë™
      - ë‹¤ë¥¸ Entity ì°¸ì¡° ì¶”ê°€ â†’ IDë§Œ ì‚¬ìš©
    - ì˜ˆì‹œ ì½”ë“œ:
      ```python
      class File(Entity):
          def add_flag(self, flag: str) -> None:
              """í”Œë˜ê·¸ ì¶”ê°€ (í—ˆìš©)."""
              self.flags.add(flag)
          
          def add_error(self, issue_id: int) -> None:
              """ì—ëŸ¬ ì°¸ì¡° ì¶”ê°€ (í—ˆìš©)."""
              if issue_id not in self.errors:
                  self.errors.append(issue_id)
          
          def update_metadata(self, new_metadata: FileMetadata) -> None:
              """ë©”íƒ€ë°ì´í„° êµì²´ (í—ˆìš©)."""
              self.metadata = new_metadata  # ìƒˆ ValueObjectë¡œ êµì²´
          
          # âŒ ê¸ˆì§€: ê³„ì‚° ë¡œì§
          # def is_duplicate(self, other: File) -> bool:  # Serviceë¡œ ì´ë™!
          #     ...
      ```
- [ ] `FileRecord` â†’ `File` ë³€í™˜ ì–´ëŒ‘í„° ì‘ì„± (í˜¸í™˜ì„± ìœ ì§€)
- [ ] ë‹¨ìœ„ í…ŒìŠ¤íŠ¸ ì‘ì„± (`tests/domain/entities/test_file.py`)
  - [ ] í—ˆìš©ëœ ë³€ê²½ ë©”ì„œë“œ í…ŒìŠ¤íŠ¸
  - [ ] ê¸ˆì§€ëœ ë³€ê²½ì´ ì—†ëŠ”ì§€ ê²€ì¦ (ì½”ë“œ ë¦¬ë·° ë˜ëŠ” ì •ì  ë¶„ì„)
- [ ] ê¸°ì¡´ UseCaseì™€ í˜¸í™˜ì„± í™•ì¸

##### Step 1.2.3: Domain Services ë¶„ë¦¬
- [ ] `src/domain/services/file_compare.py` ìƒì„±
  - [ ] `FileComparisonService` í´ë˜ìŠ¤ ì •ì˜
  - [ ] `are_identical(file1: File, file2: File) -> bool` ë©”ì„œë“œ
  - [ ] `are_similar(file1: File, file2: File, threshold: float) -> bool` ë©”ì„œë“œ
  - [ ] `compare_hashes(hash1: FileHashInfo, hash2: FileHashInfo) -> ComparisonResult` ë©”ì„œë“œ
- [ ] `src/domain/services/duplicate_detector.py` ìƒì„±
  - [ ] `DuplicateDetectionService` í´ë˜ìŠ¤ ì •ì˜
  - [ ] ì¤‘ë³µ íƒì§€ ë¡œì§ ì´ë™ (ê¸°ì¡´ FileRecordì—ì„œ)
  - [ ] ë‹¨ê³„ì  íƒì§€ ë¡œì§ (raw hash â†’ normalized â†’ similarity)
- [ ] `src/domain/services/__init__.py` ì—…ë°ì´íŠ¸ (export)
- [ ] ê¸°ì¡´ `FileRecord`ì˜ `is_xxx()`, `has_xxx()` ë©”ì„œë“œë¥¼ Serviceë¡œ ë³€í™˜
- [ ] ë‹¨ìœ„ í…ŒìŠ¤íŠ¸ ì‘ì„± (`tests/domain/services/test_file_compare.py`)
- [ ] í†µí•© í…ŒìŠ¤íŠ¸ë¡œ ê¸°ì¡´ ë™ì‘ í™•ì¸

##### Step 1.2.4: ë§ˆì´ê·¸ë ˆì´ì…˜ ì–´ëŒ‘í„° ë° ì ì§„ì  ì „í™˜
- [ ] `src/domain/models/file_record.py`ì— ì–´ëŒ‘í„° í´ë˜ìŠ¤ ì¶”ê°€
  - [ ] `FileRecordAdapter` í´ë˜ìŠ¤ ì •ì˜ (ìƒˆë¡œìš´ `File` ì—”í‹°í‹° ë˜í•‘)
  - [ ] ê¸°ì¡´ ì½”ë“œì™€ì˜ í˜¸í™˜ì„± ìœ ì§€
- [ ] UseCaseì—ì„œ ì ì§„ì ìœ¼ë¡œ ìƒˆ êµ¬ì¡° ì‚¬ìš©
  - [ ] `scan_files.py`ë¶€í„° ì‹œì‘
  - [ ] í•˜ë‚˜ì”© ë§ˆì´ê·¸ë ˆì´ì…˜í•˜ë©° í…ŒìŠ¤íŠ¸
- [ ] ë ˆê±°ì‹œ `FileRecord`ë¥¼ ì‚¬ìš©í•˜ëŠ” ì½”ë“œ ì‹ë³„ ë° ë¬¸ì„œí™”
- [ ] Deprecation ê²½ê³  ì¶”ê°€ (í–¥í›„ ì œê±° ì˜ˆì • í‘œì‹œ)
  ```python
  import warnings
  
  class FileRecordAdapter:
      def __init__(self, ...):
          warnings.warn(
              "FileRecordAdapter is deprecated. Use File entity instead.",
              DeprecationWarning,
              stacklevel=2
          )
  ```
- [ ] ì „ì²´ í…ŒìŠ¤íŠ¸ í†µê³¼ í™•ì¸
- [ ] ì„±ëŠ¥ ì˜í–¥ ì¸¡ì • (ë³€í™” ì—†ì–´ì•¼ í•¨)

##### Step 1.2.5: Adapter ì œê±° ê¸°ì¤€ ë° ì‹œì  ëª…ì‹œ (v1.3 ê·œì¹™)
- [ ] **Adapter ì œê±° ì¡°ê±´ ì •ì˜**:
  - [ ] ëª¨ë“  UseCaseê°€ ìƒˆ `File` ì—”í‹°í‹° ì‚¬ìš© (100% ë§ˆì´ê·¸ë ˆì´ì…˜ ì™„ë£Œ)
  - [ ] `FileRecordAdapter`ë¥¼ ì‚¬ìš©í•˜ëŠ” ì½”ë“œê°€ 0ê°œ (`grep -r "FileRecordAdapter"` ê²°ê³¼ ì—†ìŒ)
  - [ ] ëª¨ë“  í…ŒìŠ¤íŠ¸ê°€ ìƒˆ êµ¬ì¡° ì‚¬ìš© (Adapter ê²½ë¡œ ì œê±°)
  - [ ] Golden Tests í†µê³¼ (ìƒˆ êµ¬ì¡° ê¸°ì¤€)
- [ ] **ì œê±° ì‹œì **: Phase 2.3 (Phase 2 í†µí•© í…ŒìŠ¤íŠ¸) ì™„ë£Œ ì‹œì 
  - [ ] Phase 2.3 ì™„ë£Œ í›„ `domain/models/file_record.py` ì‚­ì œ ê²€í† 
  - [ ] Deprecation ê²½ê³  ì œê±°
  - [ ] ê´€ë ¨ ë¬¸ì„œ ì—…ë°ì´íŠ¸
- [ ] Adapter ì œê±° í›„ ì „ì²´ í…ŒìŠ¤íŠ¸ ì¬ì‹¤í–‰ ë° ê²€ì¦

##### Step 1.2.6: ì •ë¦¬ ë° ë¬¸ì„œí™”
- [ ] ë§ˆì´ê·¸ë ˆì´ì…˜ ê°€ì´ë“œ ë¬¸ì„œ ì‘ì„± (`docs/refactoring/file_record_migration.md`)
- [ ] ì•„í‚¤í…ì²˜ ë‹¤ì´ì–´ê·¸ë¨ ì—…ë°ì´íŠ¸
- [ ] API ë¬¸ì„œ ì—…ë°ì´íŠ¸ (Docstring)
- [ ] `protocols/development_protocol.md` ì—…ë°ì´íŠ¸ (ìƒˆë¡œìš´ êµ¬ì¡° ë°˜ì˜)

#### ë¦¬ìŠ¤í¬ ê´€ë¦¬
- **ë¦¬ìŠ¤í¬ 1**: ê¸°ì¡´ ì½”ë“œì™€ì˜ í˜¸í™˜ì„± ê¹¨ì§
  - **ì™„í™”ì±…**: ì–´ëŒ‘í„° íŒ¨í„´ ì‚¬ìš©, ì ì§„ì  ë§ˆì´ê·¸ë ˆì´ì…˜
- **ë¦¬ìŠ¤í¬ 2**: ì„±ëŠ¥ ì €í•˜ (ì¶”ê°€ ê°ì²´ ìƒì„±)
  - **ì™„í™”ì±…**: í”„ë¡œíŒŒì¼ë§ìœ¼ë¡œ ì¸¡ì •, í•„ìš”í•œ ê²½ìš° ìµœì í™”
- **ë¦¬ìŠ¤í¬ 3**: í…ŒìŠ¤íŠ¸ ì½”ë“œ ëŒ€ëŸ‰ ë³€ê²½
  - **ì™„í™”ì±…**: í…ŒìŠ¤íŠ¸ í—¬í¼ í•¨ìˆ˜ ë¦¬íŒ©í† ë§, ì ì§„ì  ë³€ê²½

#### ì˜ˆìƒ ì†Œìš” ì‹œê°„
- Step 1.2.1: 4ì‹œê°„
- Step 1.2.2: 3ì‹œê°„
- Step 1.2.3: 4ì‹œê°„
- Step 1.2.4: 5ì‹œê°„
- Step 1.2.5: 1ì‹œê°„ (Adapter ì œê±° ê¸°ì¤€ ì •ì˜)
- Step 1.2.6: 1ì‹œê°„ (ì •ë¦¬ ë° ë¬¸ì„œí™”)
- **ì´ê³„**: 18ì‹œê°„

---

### Phase 1.3: Phase 1 í†µí•© í…ŒìŠ¤íŠ¸ ë° ê²€ì¦

#### ëª©í‘œ
- Phase 1ì˜ ëª¨ë“  ë³€ê²½ì‚¬í•­ì´ ì •ìƒ ë™ì‘í•˜ëŠ”ì§€ í™•ì¸
- ì„±ëŠ¥ íšŒê·€ ì—†ìŒ í™•ì¸
- ë¬¸ì„œ ì¼ê´€ì„± í™•ì¸

#### ì‘ì—… ì²´í¬ë¦¬ìŠ¤íŠ¸

- [ ] ì „ì²´ ë‹¨ìœ„ í…ŒìŠ¤íŠ¸ ì‹¤í–‰ ë° í†µê³¼ í™•ì¸
- [ ] í†µí•© í…ŒìŠ¤íŠ¸ ì‹¤í–‰ (GUI í¬í•¨)
- [ ] ìˆ˜ë™ í…ŒìŠ¤íŠ¸ ìˆ˜í–‰
  - [ ] ì• í”Œë¦¬ì¼€ì´ì…˜ ì •ìƒ ì‹œì‘ í™•ì¸
  - [ ] íŒŒì¼ ìŠ¤ìº” ê¸°ëŠ¥ í™•ì¸
  - [ ] ì¤‘ë³µ íƒì§€ ê¸°ëŠ¥ í™•ì¸
  - [ ] GUI ë°˜ì‘ì„± í™•ì¸
- [ ] ì„±ëŠ¥ ë²¤ì¹˜ë§ˆí¬ ì‹¤í–‰ (êµ¬ì²´ì  ì¸¡ì •)
  - [ ] ìŠ¤ìº” ì²˜ë¦¬ëŸ‰: `files/sec` (1000ê°œ íŒŒì¼ ê¸°ì¤€)
  - [ ] ì¤‘ë³µ íƒì§€ ì²˜ë¦¬ëŸ‰: `groups/sec` (100ê°œ ê·¸ë£¹ ê¸°ì¤€)
  - [ ] ë©”ëª¨ë¦¬ ì‚¬ìš©ëŸ‰: peak RSS (MB)
  - [ ] CPU ì‹œê°„: process time (ì´ˆ)
  - [ ] ê¸°ì¤€ì„ (`benchmark_baseline.json`) ëŒ€ë¹„ Â±5% ì´ë‚´ í™•ì¸
- [ ] ì½”ë“œ ì»¤ë²„ë¦¬ì§€ í™•ì¸ (ëª©í‘œ: 80% ì´ìƒ ìœ ì§€)
- [ ] ë¦°í„°/í¬ë§¤í„° ì‹¤í–‰ (`ruff check`, `ruff format`)
- [ ] íƒ€ì… ì²´í¬ ì‹¤í–‰ (`mypy src/`)
- [ ] ë¬¸ì„œ ë¦¬ë·°
  - [ ] README.md ì—…ë°ì´íŠ¸ í™•ì¸
  - [ ] í”„ë¡œí† ì½œ ë¬¸ì„œ ì—…ë°ì´íŠ¸ í™•ì¸
  - [ ] ì£¼ì„/Docstring ì—…ë°ì´íŠ¸ í™•ì¸
- [ ] Git ì»¤ë°‹ ë° íƒœê·¸ ìƒì„±
  - [ ] ì˜ë¯¸ ìˆëŠ” ì»¤ë°‹ ë©”ì‹œì§€ ì‘ì„±
  - [ ] `refactor/phase1-complete` íƒœê·¸ ìƒì„±

#### ì˜ˆìƒ ì†Œìš” ì‹œê°„
- **ì´ê³„**: 3ì‹œê°„

---

## ğŸ—ï¸ Phase 2: ë„ë©”ì¸ ì •ì œ (P1 - êµ¬ì¡° ì•ˆì •í™”)

> **ëª©í‘œ**: Domain ê³„ì¸µì˜ ëª¨ë¸ë“¤ì„ ì˜ë¯¸ ë‹¨ìœ„ë¡œ ì¬ë¶„ë¥˜í•˜ê³ , ë¹„êµ/íŒë‹¨ ë¡œì§ì„ Serviceë¡œ ì´ë™

### Phase 2.1: Domain Models ì¬ë¶„ë¥˜

#### ëª©í‘œ
- `domain/models/` í´ë”ì˜ ëª¨ë“  ëª¨ë¸ì„ Entity, ValueObject, Aggregateë¡œ ë¶„ë¥˜
- ëª¨ë¸ ê°„ ì•”ë¬µì  ì˜ì¡´ì„± ì œê±°
- ëª…í™•í•œ ê³„ì¸µ êµ¬ì¡° í™•ë¦½

#### ì‘ì—… ì²´í¬ë¦¬ìŠ¤íŠ¸

##### Step 2.1.1: ëª¨ë¸ ë¶„ì„ ë° ë¶„ë¥˜ ê³„íš
- [ ] `domain/models/` í´ë”ì˜ ëª¨ë“  íŒŒì¼ ëª©ë¡ ì‘ì„±
  - [ ] `action_plan.py`
  - [ ] `candidate_edge.py`
  - [ ] `duplicate_group.py`
  - [ ] `evidence.py`
  - [ ] `file_feature.py`
  - [ ] `file_meta.py`
  - [ ] `preview_stats.py`
  - [ ] `integrity_issue.py`
- [ ] ê° ëª¨ë¸ì˜ ì±…ì„ ë¶„ì„
  - [ ] ìƒíƒœë§Œ ê°€ì§€ê³  ìˆëŠ”ê°€? â†’ Entity/ValueObject í›„ë³´
  - [ ] ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ì„ ê°€ì§€ê³  ìˆëŠ”ê°€? â†’ Serviceë¡œ ì´ë™ í•„ìš”
  - [ ] ë‹¤ë¥¸ ëª¨ë¸ì„ ì°¸ì¡°í•˜ëŠ”ê°€? â†’ Aggregate í›„ë³´
- [ ] ë¶„ë¥˜ ê³„íš ë¬¸ì„œ ì‘ì„± (`docs/refactoring/model_classification.md`)
- [ ] íŒ€ ë¦¬ë·° (í•„ìš”ì‹œ)

##### Step 2.1.2: DuplicateGroup â†’ Aggregate ë¶„ë¦¬ (ID ê¸°ë°˜ ì°¸ì¡° ê°•ì œ!)
- [ ] `domain/aggregates/` ë””ë ‰í† ë¦¬ ìƒì„±
- [ ] `domain/aggregates/duplicate_group.py` ìƒì„±
  - [ ] `DuplicateGroup` Aggregate ì •ì˜ (**dataclass, ë¶ˆë³€**)
  - [ ] **`File` ì—”í‹°í‹° ë¦¬ìŠ¤íŠ¸ í¬í•¨ ê¸ˆì§€!** `file_ids: list[int]`ë§Œ í¬í•¨ (ID ê¸°ë°˜ ì°¸ì¡°)
  - [ ] `CandidateEdge` ValueObject í¬í•¨ (ì´ë¯¸ ID ê¸°ë°˜ ì°¸ì¡°)
  - [ ] `Evidence` ValueObject í¬í•¨ (ì´ë¯¸ ID ê¸°ë°˜ ì°¸ì¡°)
  - [ ] ë¶ˆë³€ì„± ë³´ì¥ (`@dataclass(frozen=True)`)
  - [ ] **í•¨ìˆ˜í˜• ì—…ë°ì´íŠ¸ íŒ¨í„´** êµ¬í˜„:
    ```python
    @dataclass(frozen=True)
    class DuplicateGroup:
        file_ids: tuple[int, ...]  # ë¶ˆë³€ íŠœí”Œ
        edges: tuple[CandidateEdge, ...]
        evidence: tuple[Evidence, ...]
        
        def with_added_edge(self, edge: CandidateEdge) -> "DuplicateGroup":
            """ìƒˆ ì—£ì§€ë¥¼ ì¶”ê°€í•œ ìƒˆ ì¸ìŠ¤í„´ìŠ¤ ë°˜í™˜ (ë¶ˆë³€ì„± ìœ ì§€)."""
            return DuplicateGroup(
                file_ids=self.file_ids,
                edges=self.edges + (edge,),
                evidence=self.evidence
            )
    ```
  - [ ] í•„ìš”í•œ File ê°ì²´ëŠ” Service/Repo lookupìœ¼ë¡œ ê°€ì ¸ì˜¤ê¸°:
    ```python
    class DuplicateGroupService:
        def get_files(self, group: DuplicateGroup, repo: IFileRepository) -> list[File]:
            """File ê°ì²´ë¥¼ í•„ìš” ì‹œì—ë§Œ lookup."""
            return [repo.find_by_id(file_id) for file_id in group.file_ids]
    ```
- [ ] ê¸°ì¡´ `duplicate_group.py`ì—ì„œ ë§ˆì´ê·¸ë ˆì´ì…˜
- [ ] ê´€ë ¨ UseCase ì—…ë°ì´íŠ¸ (Service lookup ì‚¬ìš©)
- [ ] File ê°ì²´ ì§ì ‘ ì°¸ì¡°ê°€ ì•„ë‹Œ IDë§Œ ì‚¬ìš©í•˜ëŠ”ì§€ ê²€ì¦ (`grep -r "files: list\[File\]" domain/aggregates/`)
- [ ] ë‹¨ìœ„ í…ŒìŠ¤íŠ¸ ì‘ì„± (`tests/domain/aggregates/test_duplicate_group.py`)
- [ ] í†µí•© í…ŒìŠ¤íŠ¸ë¡œ ë™ì‘ í™•ì¸

##### Step 2.1.3: CandidateEdge, Evidence â†’ ValueObject ë¶„ë¦¬ (ID ê¸°ë°˜ ì°¸ì¡° ê°•ì œ!)
- [ ] `domain/value_objects/candidate_edge.py` ìƒì„±
  - [ ] `CandidateEdge` ValueObject ì •ì˜ (**dataclass, ë¶ˆë³€**)
  - [ ] **ë‘ `File` ì—”í‹°í‹° ì°¸ì¡° ê¸ˆì§€!** `file_id_1: int`, `file_id_2: int`ë§Œ ì €ì¥ (ID ê¸°ë°˜)
  - [ ] ë¹„êµ ê²°ê³¼ ê°’ í¬í•¨ (`similarity: float` ë“±)
  - [ ] `@dataclass(frozen=True)` ë°ì½”ë ˆì´í„° ì‚¬ìš©
- [ ] `domain/value_objects/evidence.py` ìƒì„±
  - [ ] `Evidence` ValueObject ì •ì˜ (**dataclass, ë¶ˆë³€**)
  - [ ] ì¦ê±° íƒ€ì…, ì‹ ë¢°ë„, ë°ì´í„° í¬í•¨
  - [ ] `@dataclass(frozen=True)` ë°ì½”ë ˆì´í„° ì‚¬ìš©
  - [ ] **File ê°ì²´ ì°¸ì¡° ê¸ˆì§€!** í•„ìš” ì‹œ `file_id: int`ë§Œ ì €ì¥
- [ ] ê¸°ì¡´ ëª¨ë¸ì—ì„œ ë§ˆì´ê·¸ë ˆì´ì…˜
- [ ] ê°ì²´ ì°¸ì¡°ê°€ ì•„ë‹Œ IDë§Œ ì‚¬ìš©í•˜ëŠ”ì§€ ê²€ì¦ (`grep -r "file: File" domain/value_objects/`)
- [ ] ë‹¨ìœ„ í…ŒìŠ¤íŠ¸ ì‘ì„±
- [ ] í†µí•© í…ŒìŠ¤íŠ¸ë¡œ ë™ì‘ í™•ì¸

##### Step 2.1.4: FileFeature, FileMeta â†’ ValueObject í†µí•©
- [ ] `FileFeature`ì™€ `FileMetadata` í†µí•© ê²€í† 
  - [ ] ì¤‘ë³µ í•„ë“œ ì œê±°
  - [ ] ë‹¨ì¼ `FileMetadata` ValueObjectë¡œ í†µí•©
- [ ] `domain/value_objects/file_metadata.py` ì—…ë°ì´íŠ¸
  - [ ] ëª¨ë“  ë©”íƒ€ë°ì´í„° í¬í•¨
  - [ ] ê²€ì¦ ë¡œì§ ì¶”ê°€
- [ ] ê¸°ì¡´ ì½”ë“œ ë§ˆì´ê·¸ë ˆì´ì…˜
- [ ] ë‹¨ìœ„ í…ŒìŠ¤íŠ¸ ì‘ì„±
- [ ] í†µí•© í…ŒìŠ¤íŠ¸ë¡œ ë™ì‘ í™•ì¸

##### Step 2.1.5: PreviewStats â†’ ValueObject ë¶„ë¦¬
- [ ] `domain/value_objects/preview_stats.py` ìƒì„±
  - [ ] `PreviewStats` ValueObject ì •ì˜ (ë¶ˆë³€)
  - [ ] ì§‘ê³„ ê²°ê³¼ë§Œ í¬í•¨ (ê³„ì‚° ë¡œì§ ì œì™¸)
- [ ] ê³„ì‚° ë¡œì§ì€ UseCaseë‚˜ Serviceë¡œ ì´ë™
- [ ] ê¸°ì¡´ ì½”ë“œ ë§ˆì´ê·¸ë ˆì´ì…˜
- [ ] ë‹¨ìœ„ í…ŒìŠ¤íŠ¸ ì‘ì„±
- [ ] í†µí•© í…ŒìŠ¤íŠ¸ë¡œ ë™ì‘ í™•ì¸

##### Step 2.1.6: ActionPlan â†’ Aggregate ë˜ëŠ” Service ê²€í† 
- [ ] `ActionPlan`ì˜ ì±…ì„ ë¶„ì„
  - [ ] ìƒíƒœë§Œ ìˆëŠ”ê°€? â†’ Aggregate
  - [ ] ìƒì„± ë¡œì§ì´ ë³µì¡í•œê°€? â†’ Service
- [ ] ê²°ì •ì— ë”°ë¼ ì ì ˆí•œ ìœ„ì¹˜ë¡œ ì´ë™
- [ ] ê¸°ì¡´ ì½”ë“œ ë§ˆì´ê·¸ë ˆì´ì…˜
- [ ] ë‹¨ìœ„ í…ŒìŠ¤íŠ¸ ì‘ì„±
- [ ] í†µí•© í…ŒìŠ¤íŠ¸ë¡œ ë™ì‘ í™•ì¸

##### Step 2.1.7: IntegrityIssue â†’ Entity ë¶„ë¦¬ (ID ê¸°ë°˜ ì°¸ì¡° ê°•ì œ!)
- [ ] `domain/entities/integrity_issue.py` ìƒì„±
  - [ ] `IntegrityIssue` Entity ì •ì˜ (**dataclass, Pydantic ê¸ˆì§€!**)
  - [ ] ì‹ë³„ì(`issue_id: int`) í¬í•¨
  - [ ] **`File` ì—”í‹°í‹° ì°¸ì¡° ê¸ˆì§€!** `file_id: int`ë§Œ ì €ì¥ (ID ê¸°ë°˜ ì°¸ì¡°)
  - [ ] ì´ìŠˆ íƒ€ì…, ì‹¬ê°ë„, ë©”ì‹œì§€ í¬í•¨
  - [ ] í•„ìš” ì‹œ `@dataclass` ì‚¬ìš© (ë¶ˆë³€ì„±ì€ ì„ íƒì , EntityëŠ” ë³€ê²½ ê°€ëŠ¥í•  ìˆ˜ ìˆìŒ)
- [ ] ê¸°ì¡´ ëª¨ë¸ì—ì„œ ë§ˆì´ê·¸ë ˆì´ì…˜
- [ ] File ê°ì²´ ì§ì ‘ ì°¸ì¡°ê°€ ì•„ë‹Œ IDë§Œ ì‚¬ìš©í•˜ëŠ”ì§€ ê²€ì¦
- [ ] ë‹¨ìœ„ í…ŒìŠ¤íŠ¸ ì‘ì„±
- [ ] í†µí•© í…ŒìŠ¤íŠ¸ë¡œ ë™ì‘ í™•ì¸

##### Step 2.1.8: ë ˆê±°ì‹œ models í´ë” ì •ë¦¬
- [ ] ëª¨ë“  ëª¨ë¸ì´ ìƒˆ ìœ„ì¹˜ë¡œ ì´ë™ë˜ì—ˆëŠ”ì§€ í™•ì¸
- [ ] `domain/models/` í´ë”ì˜ íŒŒì¼ ê²€í† 
  - [ ] ì‚¬ìš©ë˜ì§€ ì•ŠëŠ” íŒŒì¼ ì‚­ì œ
  - [ ] ì–´ëŒ‘í„°ë§Œ ë‚¨ì€ íŒŒì¼ ì •ë¦¬
- [ ] `domain/models/__init__.py` ì—…ë°ì´íŠ¸
  - [ ] Deprecation ê²½ê³  ì¶”ê°€
  - [ ] ìƒˆ ìœ„ì¹˜ë¡œì˜ ë¦¬ë‹¤ì´ë ‰íŠ¸ (í˜¸í™˜ì„±)
- [ ] ì „ì²´ ì½”ë“œë² ì´ìŠ¤ì—ì„œ `domain.models` import ê²€ìƒ‰
- [ ] ì ì§„ì ìœ¼ë¡œ ìƒˆ importë¡œ ë³€ê²½
- [ ] Deprecation ê²½ê³  ì œê±° ì‹œì  ê³„íš ìˆ˜ë¦½

#### ë¦¬ìŠ¤í¬ ê´€ë¦¬
- **ë¦¬ìŠ¤í¬**: ëª¨ë¸ ê°„ ìˆœí™˜ ì˜ì¡´ì„± ë°œìƒ
  - **ì™„í™”ì±…**: ID ê¸°ë°˜ ì°¸ì¡° ì‚¬ìš©, ì˜ì¡´ì„± ë°©í–¥ ëª…í™•íˆ ì •ì˜
- **ë¦¬ìŠ¤í¬**: ê¸°ì¡´ UseCase ëŒ€ëŸ‰ ë³€ê²½
  - **ì™„í™”ì±…**: ì–´ëŒ‘í„° íŒ¨í„´, ì ì§„ì  ë§ˆì´ê·¸ë ˆì´ì…˜

#### ì˜ˆìƒ ì†Œìš” ì‹œê°„
- Step 2.1.1: 2ì‹œê°„
- Step 2.1.2: 3ì‹œê°„
- Step 2.1.3: 2ì‹œê°„
- Step 2.1.4: 2ì‹œê°„
- Step 2.1.5: 1ì‹œê°„
- Step 2.1.6: 2ì‹œê°„
- Step 2.1.7: 2ì‹œê°„
- Step 2.1.8: 3ì‹œê°„
- **ì´ê³„**: 17ì‹œê°„

---

### Phase 2.2: ë¹„êµ/íŒë‹¨ ë¡œì§ Serviceë¡œ ì´ë™

#### ëª©í‘œ
- Domain Modelì— ë‚¨ì•„ìˆëŠ” ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ì„ Domain Serviceë¡œ ì´ë™
- ìˆœìˆ˜ í•¨ìˆ˜ë¡œ ë³€í™˜í•˜ì—¬ í…ŒìŠ¤íŠ¸ ìš©ì´ì„± í–¥ìƒ
- íŒì • ê·œì¹™ì„ ëª…ì‹œì ìœ¼ë¡œ ë¶„ë¦¬

#### ì‘ì—… ì²´í¬ë¦¬ìŠ¤íŠ¸

##### Step 2.2.1: íŒì • ë¡œì§ ì‹ë³„
- [ ] `domain/models/` ë° `domain/entities/` í´ë” ì „ì²´ ìŠ¤ìº”
- [ ] `is_xxx()`, `has_xxx()`, `compute_xxx()`, `compare_xxx()` ë©”ì„œë“œ ëª©ë¡ ì‘ì„±
- [ ] ê° ë©”ì„œë“œì˜ ì±…ì„ ë¶„ì„
  - [ ] ë‹¨ìˆœ ìƒíƒœ ì²´í¬? â†’ Propertyë¡œ ìœ ì§€ ê°€ëŠ¥
  - [ ] ê³„ì‚°/íŒì • ë¡œì§? â†’ Serviceë¡œ ì´ë™
- [ ] ì´ë™ ê³„íš ë¬¸ì„œ ì‘ì„±

##### Step 2.2.2: ë²„ì „ ì„ íƒ ì •ì±… ë° Service ìƒì„± (Policy vs Service êµ¬ë¶„!)
- [ ] `domain/policies/version_selection.py` ìƒì„± (ë¨¼ì €)
  - [ ] ìˆœìˆ˜ í•¨ìˆ˜ë¡œ ë²„ì „ ì„ íƒ ê·œì¹™ ì •ì˜
  - [ ] `select_by_filename(files: list[File]) -> Optional[File]` (ìˆœìˆ˜ í•¨ìˆ˜)
  - [ ] `select_by_mtime(files: list[File]) -> Optional[File]` (ìˆœìˆ˜ í•¨ìˆ˜)
  - [ ] `select_by_size(files: list[File]) -> Optional[File]` (ìˆœìˆ˜ í•¨ìˆ˜)
  - [ ] ê° í•¨ìˆ˜ëŠ” ë¶€ì‘ìš© ì—†ìŒ (ìˆœìˆ˜ í•¨ìˆ˜)
- [ ] `domain/services/version_selector.py` ìƒì„± (ê·¸ ë‹¤ìŒ)
  - [ ] `VersionSelectionService` í´ë˜ìŠ¤ ì •ì˜
  - [ ] `select_best_version(files: list[File]) -> File` ë©”ì„œë“œ
  - [ ] **Policy í•¨ìˆ˜ë“¤ì„ ìˆœì°¨ì ìœ¼ë¡œ í˜¸ì¶œí•˜ì—¬ ì¡°í•©**
  - [ ] ë³µì¡í•œ íŒì • ë¡œì§ í¬í•¨
- [ ] ê¸°ì¡´ ì½”ë“œì—ì„œ íŒì • ë¡œì§ ì¶”ì¶œ
- [ ] ë‹¨ìœ„ í…ŒìŠ¤íŠ¸ ì‘ì„±
  - [ ] Policy í•¨ìˆ˜ë“¤ í…ŒìŠ¤íŠ¸ (`tests/domain/policies/test_version_selection.py`)
  - [ ] Service í´ë˜ìŠ¤ í…ŒìŠ¤íŠ¸ (`tests/domain/services/test_version_selector.py`)
  - [ ] ë‹¤ì–‘í•œ ì‹œë‚˜ë¦¬ì˜¤ í…ŒìŠ¤íŠ¸
  - [ ] Edge case í…ŒìŠ¤íŠ¸
- [ ] í†µí•© í…ŒìŠ¤íŠ¸ë¡œ ë™ì‘ í™•ì¸

##### Step 2.2.3: ì¤‘ë³µ íƒì§€ ë¡œì§ Service ê°•í™”
- [ ] `domain/services/duplicate_detector.py` í™•ì¥ (Phase 1.2.3ì—ì„œ ìƒì„±ë¨)
  - [ ] ë‹¨ê³„ì  íƒì§€ ë¡œì§ ìƒì„¸ êµ¬í˜„
    - [ ] Raw hash ë¹„êµ
    - [ ] Normalized hash ë¹„êµ
    - [ ] SimHash ìœ ì‚¬ë„ ë¹„êµ
  - [ ] ì„ê³„ê°’ ê¸°ë°˜ íŒì •
  - [ ] ì‹ ë¢°ë„ ê³„ì‚°
- [ ] ê¸°ì¡´ UseCaseì—ì„œ ë¡œì§ ì´ë™
- [ ] ë‹¨ìœ„ í…ŒìŠ¤íŠ¸ ì‘ì„±
- [ ] í†µí•© í…ŒìŠ¤íŠ¸ë¡œ ë™ì‘ í™•ì¸

##### Step 2.2.4: ë¬´ê²°ì„± ê²€ì‚¬ ë¡œì§ Service ìƒì„±
- [ ] `domain/services/integrity_checker.py` ìƒì„±
  - [ ] `IntegrityCheckService` í´ë˜ìŠ¤ ì •ì˜
  - [ ] `check_file(file: File) -> list[IntegrityIssue]` ë©”ì„œë“œ
  - [ ] ì¸ì½”ë”© ê²€ì¦ ë¡œì§
  - [ ] ë¹ˆ íŒŒì¼ ê²€ì¦ ë¡œì§
  - [ ] ì¤„ë°”ê¿ˆ ì¼ê´€ì„± ê²€ì¦ ë¡œì§
- [ ] ê¸°ì¡´ UseCaseì—ì„œ ë¡œì§ ì´ë™
- [ ] ë‹¨ìœ„ í…ŒìŠ¤íŠ¸ ì‘ì„± (`tests/domain/services/test_integrity_checker.py`)
- [ ] í†µí•© í…ŒìŠ¤íŠ¸ë¡œ ë™ì‘ í™•ì¸

##### Step 2.2.5: ì¦ê±° ìƒì„± ë¡œì§ Service ìƒì„±
- [ ] `domain/services/evidence_builder.py` ìƒì„±
  - [ ] `EvidenceBuilderService` í´ë˜ìŠ¤ ì •ì˜
  - [ ] `build_evidence(file1: File, file2: File, comparison_result: ComparisonResult) -> Evidence` ë©”ì„œë“œ
  - [ ] ì¦ê±° íƒ€ì… ê²°ì • ë¡œì§
  - [ ] ì‹ ë¢°ë„ ê³„ì‚° ë¡œì§
- [ ] ê¸°ì¡´ ì½”ë“œì—ì„œ ë¡œì§ ì´ë™
- [ ] ë‹¨ìœ„ í…ŒìŠ¤íŠ¸ ì‘ì„±
- [ ] í†µí•© í…ŒìŠ¤íŠ¸ë¡œ ë™ì‘ í™•ì¸

##### Step 2.2.6: Entity/ValueObjectì—ì„œ ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ ì œê±°
- [ ] Entity í´ë˜ìŠ¤ì—ì„œ `is_xxx()`, `has_xxx()` ë©”ì„œë“œ ì œê±°
  - [ ] Propertyë¡œ ë³€í™˜ ê°€ëŠ¥í•œ ê²ƒì€ Propertyë¡œ
  - [ ] ê³„ì‚° ë¡œì§ì€ Serviceë¡œ ì´ë™ ì™„ë£Œ í™•ì¸
- [ ] ValueObjectì—ì„œ ê³„ì‚° ë¡œì§ ì œê±°
  - [ ] ë¶ˆë³€ì„±ë§Œ ìœ ì§€
  - [ ] ê²€ì¦ ë¡œì§ì€ ìœ ì§€ (ìƒì„± ì‹œì )
- [ ] ì „ì²´ ì½”ë“œë² ì´ìŠ¤ì—ì„œ ì‚¬ìš©ì²˜ ì—…ë°ì´íŠ¸
- [ ] ë‹¨ìœ„ í…ŒìŠ¤íŠ¸ ì—…ë°ì´íŠ¸
- [ ] í†µí•© í…ŒìŠ¤íŠ¸ë¡œ ë™ì‘ í™•ì¸

##### Step 2.2.7: ì •ë¦¬ ë° ë¬¸ì„œí™”
- [ ] Domain Service ëª©ë¡ ë¬¸ì„œí™”
- [ ] ê° Serviceì˜ ì±…ì„ ëª…ì‹œ
- [ ] ì‚¬ìš© ì˜ˆì‹œ ì½”ë“œ ì‘ì„±
- [ ] `protocols/development_protocol.md` ì—…ë°ì´íŠ¸

#### ë¦¬ìŠ¤í¬ ê´€ë¦¬
- **ë¦¬ìŠ¤í¬**: ì„±ëŠ¥ ì €í•˜ (Service í˜¸ì¶œ ì˜¤ë²„í—¤ë“œ)
  - **ì™„í™”ì±…**: í”„ë¡œíŒŒì¼ë§ìœ¼ë¡œ ì¸¡ì •, í•„ìš”í•œ ê²½ìš° ìºì‹±

#### ì˜ˆìƒ ì†Œìš” ì‹œê°„
- Step 2.2.1: 2ì‹œê°„
- Step 2.2.2: 3ì‹œê°„
- Step 2.2.3: 3ì‹œê°„
- Step 2.2.4: 3ì‹œê°„
- Step 2.2.5: 2ì‹œê°„
- Step 2.2.6: 4ì‹œê°„
- Step 2.2.7: 1ì‹œê°„
- **ì´ê³„**: 18ì‹œê°„

---

### Phase 2.3: Phase 2 í†µí•© í…ŒìŠ¤íŠ¸ ë° ê²€ì¦

#### ì‘ì—… ì²´í¬ë¦¬ìŠ¤íŠ¸

- [ ] ì „ì²´ ë‹¨ìœ„ í…ŒìŠ¤íŠ¸ ì‹¤í–‰ ë° í†µê³¼ í™•ì¸
- [ ] í†µí•© í…ŒìŠ¤íŠ¸ ì‹¤í–‰ (ëª¨ë“  UseCase)
- [ ] ìˆ˜ë™ í…ŒìŠ¤íŠ¸ ìˆ˜í–‰
  - [ ] ì¤‘ë³µ íƒì§€ ì •í™•ë„ í™•ì¸
  - [ ] ë²„ì „ ì„ íƒ ì •í™•ë„ í™•ì¸
  - [ ] ë¬´ê²°ì„± ê²€ì‚¬ ì •í™•ë„ í™•ì¸
- [ ] ì„±ëŠ¥ ë²¤ì¹˜ë§ˆí¬ ì‹¤í–‰
  - [ ] ê¸°ì¡´ ëŒ€ë¹„ ì„±ëŠ¥ ìœ ì§€ í™•ì¸
- [ ] ì½”ë“œ ì»¤ë²„ë¦¬ì§€ í™•ì¸
- [ ] ë¦°í„°/í¬ë§¤í„° ì‹¤í–‰
- [ ] íƒ€ì… ì²´í¬ ì‹¤í–‰
- [ ] ë¬¸ì„œ ë¦¬ë·°
- [ ] Git ì»¤ë°‹ ë° íƒœê·¸ ìƒì„± (`refactor/phase2-complete`)

#### ì˜ˆìƒ ì†Œìš” ì‹œê°„
- **ì´ê³„**: 3ì‹œê°„

---

## ğŸ”§ Phase 3: ì¸í”„ë¼ ì •ë¦¬ (P1-P2 - ì•ˆì •í™”)

> **ëª©í‘œ**: Infrastructure ê³„ì¸µ ì •ë¦¬ ë° ì—ëŸ¬ ì²˜ë¦¬/ì„¤ì • ê´€ë¦¬ ì²´ê³„í™”

### Phase 3.1: Logging ê³„ì¸µí™”

#### ëª©í‘œ
- ì „ì—­ logger ì œê±°
- ì¸í„°í˜ì´ìŠ¤ ê¸°ë°˜ ë¡œê¹…ìœ¼ë¡œ ì „í™˜
- Domain ê³„ì¸µì´ Infrastructureì— ì˜ì¡´í•˜ì§€ ì•Šë„ë¡

#### Before
```python
# common/logging.py (í˜„ì¬)
def setup_logging(...) -> logging.Logger:
    logger = logging.getLogger("NovelGuard")
    # ì „ì—­ ì„¤ì •
    return logger
```

#### After
```python
# domain/ports/logger.py (PortsëŠ” Domainì— ì •ì˜!)
from typing import Protocol

class ILogger(Protocol):
    """ë¡œê¹… ì¸í„°í˜ì´ìŠ¤ (Domain Port)."""
    def info(self, message: str) -> None: ...
    def warning(self, message: str) -> None: ...
    def error(self, message: str) -> None: ...
    def debug(self, message: str) -> None: ...

# infra/logging/std_logger.py (Infraì—ì„œ êµ¬í˜„)
from domain.ports.logger import ILogger

class StdLogger:
    """í‘œì¤€ ë¼ì´ë¸ŒëŸ¬ë¦¬ ê¸°ë°˜ Logger êµ¬í˜„ (ILogger Protocol êµ¬í˜„)."""
    def info(self, message: str) -> None: ...
    def warning(self, message: str) -> None: ...
    def error(self, message: str) -> None: ...
    def debug(self, message: str) -> None: ...

# domain/services/... (ILogger ì£¼ì…ë°›ì•„ ì‚¬ìš©)
from domain.ports.logger import ILogger  # Domainì€ Portë§Œ import!

class FileComparisonService:
    def __init__(self, logger: ILogger):
        self.logger = logger
```

#### ì‘ì—… ì²´í¬ë¦¬ìŠ¤íŠ¸

##### Step 3.1.1: Logging ì¸í„°í˜ì´ìŠ¤ ì •ì˜ (domain/portsì—!)
- [ ] `src/domain/ports/logger.py` ìƒì„± (**infra/loggingì´ ì•„ë‹Œ domain/portsì—!**)
  - [ ] `ILogger` Protocol ì •ì˜ (Python `typing.Protocol`)
  - [ ] `info(message: str) -> None`
  - [ ] `warning(message: str) -> None`
  - [ ] `error(message: str) -> None`
  - [ ] `debug(message: str) -> None`
  - [ ] ì»¨í…ìŠ¤íŠ¸ ì •ë³´ ì§€ì› (ì„ íƒì , ì˜ˆ: `info(message: str, context: dict[str, Any] | None = None)`)
- [ ] íƒ€ì… íŒíŒ… ëª…í™•íˆ
- [ ] `domain/ports/__init__.py`ì— export ì¶”ê°€

##### Step 3.1.2: í‘œì¤€ Logger êµ¬í˜„ (infraì—ì„œ Protocol êµ¬í˜„)
- [ ] `src/infra/logging/` ë””ë ‰í† ë¦¬ ìƒì„±
- [ ] `src/infra/logging/__init__.py` ìƒì„± (export)
- [ ] `src/infra/logging/std_logger.py` ìƒì„±
  - [ ] `from domain.ports.logger import ILogger` import
  - [ ] `StdLogger` í´ë˜ìŠ¤ ì •ì˜ (`ILogger` Protocol êµ¬í˜„)
  - [ ] ê¸°ì¡´ `setup_logging()` ë¡œì§ ì´ë™
  - [ ] íŒŒì¼ í•¸ë“¤ëŸ¬, ì½˜ì†” í•¸ë“¤ëŸ¬ ì„¤ì •
- [ ] Factory í•¨ìˆ˜ ìƒì„±
  - [ ] `create_std_logger(...) -> ILogger` í•¨ìˆ˜ (`domain.ports.logger.ILogger` ë°˜í™˜)
- [ ] ë‹¨ìœ„ í…ŒìŠ¤íŠ¸ ì‘ì„± (`tests/infra/logging/test_std_logger.py`)
  - [ ] `ILogger` Protocol ì¤€ìˆ˜ í™•ì¸ (`isinstance(logger, ILogger)`)
- [ ] ê¸°ì¡´ ë¡œê¹… ë™ì‘ê³¼ ë™ì¼í•œì§€ í™•ì¸

##### Step 3.1.3: Domain/UseCaseì—ì„œ ì¸í„°í˜ì´ìŠ¤ ì‚¬ìš© (ë¡œê¹… ì„ íƒì  ì›ì¹™ ì ìš©!)
- [ ] **Domain Service ë¡œê¹… í•„ìš”ì„± í‰ê°€** (v1.3 ê·œì¹™)
  - [ ] ê° Domain Service ë¶„ì„:
    - "ì˜ì‚¬ê²°ì •/íŒì •/ê·œì¹™" Service(ì˜ˆ: `VersionSelectionService`, `DuplicateDetectionService`) â†’ **ë¡œê¹… ê¸ˆì§€**
    - "I/Oê°€ í•„ìš”í•œ Service"(ì˜ˆ: íŒŒì¼ ì½ê¸° ì¤‘ ì˜¤ë¥˜) â†’ **ë¡œê¹… í—ˆìš©**
    - ìƒíƒœ/íŒì •ì— í•„ìˆ˜ì ì¸ ê²½ìš°ì—ë§Œ ë¡œê¹… ì£¼ì…
- [ ] Domain Serviceì—ì„œ `ILogger` **ì„ íƒì ìœ¼ë¡œ** ì£¼ì…ë°›ë„ë¡ ë³€ê²½
  - [ ] ë¡œê¹…ì´ í•„ìš”í•œ Serviceë§Œ ìƒì„±ìì—ì„œ `ILogger` ë°›ê¸° (Optional[ILogger] í—ˆìš©)
  - [ ] ë¡œê¹…ì´ ë¶ˆí•„ìš”í•œ ServiceëŠ” logger íŒŒë¼ë¯¸í„° ì—†ìŒ
  - [ ] ì „ì—­ `logger` ì‚¬ìš© ì œê±°
  - [ ] ì˜ˆì‹œ:
    ```python
    # âœ… ë¡œê¹… ê¸ˆì§€: ì˜ì‚¬ê²°ì • Service
    class VersionSelectionService:
        def __init__(self):  # logger ì—†ìŒ
            ...
        def select_best_version(self, files: list[File]) -> File:
            # íŒì • ë¡œì§ë§Œ (ë¡œê¹… ë¶ˆí•„ìš”)
            ...
    
    # âœ… ë¡œê¹… í—ˆìš©: I/O Service
    class FileComparisonService:
        def __init__(self, logger: ILogger):  # logger í•„ìš”
            self.logger = logger
        def are_identical(self, file1: File, file2: File) -> bool:
            try:
                # íŒŒì¼ ì½ê¸° ì¤‘ ì˜¤ë¥˜ ë°œìƒ ê°€ëŠ¥ â†’ ë¡œê¹… í•„ìš”
                ...
            except Exception as e:
                self.logger.error(f"íŒŒì¼ ë¹„êµ ì‹¤íŒ¨: {e}")
                raise
    ```
- [ ] UseCaseì—ì„œ `ILogger` ì£¼ì…ë°›ë„ë¡ ë³€ê²½ (UseCaseëŠ” ëª¨ë‘ ë¡œê¹… í—ˆìš©)
- [ ] Bootstrapì—ì„œ Logger ìƒì„± ë° **ì„ íƒì ìœ¼ë¡œ** ì£¼ì… (í•„ìš”í•œ Serviceë§Œ)
- [ ] ë‹¨ìœ„ í…ŒìŠ¤íŠ¸ ì‘ì„±
  - [ ] ë¡œê¹…ì´ ì—†ëŠ” ServiceëŠ” Mock Logger ë¶ˆí•„ìš” (í…ŒìŠ¤íŠ¸ ë‹¨ìˆœí™”)
  - [ ] ë¡œê¹…ì´ ìˆëŠ” Serviceë§Œ Mock Logger ì‚¬ìš©
- [ ] í†µí•© í…ŒìŠ¤íŠ¸ë¡œ ë™ì‘ í™•ì¸

##### Step 3.1.4: GUI/Workersì—ì„œ ì¸í„°í˜ì´ìŠ¤ ì‚¬ìš©
- [ ] GUI ì»´í¬ë„ŒíŠ¸ì—ì„œ `ILogger` ì‚¬ìš©í•˜ë„ë¡ ë³€ê²½
- [ ] Workerì—ì„œ `ILogger` ì‚¬ìš©í•˜ë„ë¡ ë³€ê²½
- [ ] ì „ì—­ `logger` import ì œê±°
- [ ] ë‹¨ìœ„ í…ŒìŠ¤íŠ¸ ì‘ì„±
- [ ] í†µí•© í…ŒìŠ¤íŠ¸ë¡œ ë™ì‘ í™•ì¸

##### Step 3.1.5: ë ˆê±°ì‹œ ì •ë¦¬
- [ ] `common/logging.py`ì— Deprecation ê²½ê³  ì¶”ê°€
- [ ] ì‚¬ìš©ì²˜ ì ì§„ì ìœ¼ë¡œ ë³€ê²½
- [ ] ëª¨ë“  ì „í™˜ ì™„ë£Œ í›„ `common/logging.py` ì‚­ì œ ë˜ëŠ” ìµœì†Œí™”
- [ ] ë¬¸ì„œ ì—…ë°ì´íŠ¸

#### ë¦¬ìŠ¤í¬ ê´€ë¦¬
- **ë¦¬ìŠ¤í¬**: ë¡œê¹… ëˆ„ë½ ê°€ëŠ¥ì„±
  - **ì™„í™”ì±…**: í†µí•© í…ŒìŠ¤íŠ¸ë¡œ ëª¨ë“  ë¡œê·¸ ë ˆë²¨ í™•ì¸

#### ì˜ˆìƒ ì†Œìš” ì‹œê°„
- Step 3.1.1: 1ì‹œê°„
- Step 3.1.2: 2ì‹œê°„
- Step 3.1.3: 3ì‹œê°„
- Step 3.1.4: 2ì‹œê°„
- Step 3.1.5: 1ì‹œê°„
- **ì´ê³„**: 9ì‹œê°„

---

### Phase 3.2: Error ê³„ì¸µí™”

#### ëª©í‘œ
- ì—ëŸ¬ íƒ€ì…ì„ ë„ë©”ì¸/ì¸í”„ë¼ë¡œ ëª…í™•íˆ êµ¬ë¶„
- ì˜ë¯¸ì  ê³„ì¸µ êµ¬ì¡° í™•ë¦½
- ì—ëŸ¬ í•¸ë“¤ë§ ì¼ê´€ì„± í–¥ìƒ

#### Before
```python
# common/errors.py (í˜„ì¬)
class NovelGuardError(Exception): ...
class FileEncodingError(NovelGuardError): ...
class DuplicateAnalysisError(NovelGuardError): ...
# ê¸°ìˆ /ë„ë©”ì¸ í˜¼í•©, ê³„ì¸µ ì—†ìŒ
```

#### After
```python
# common/errors.py (ëª©í‘œ)
class NovelGuardError(Exception): ...

# Domain Errors
class DomainError(NovelGuardError): ...
class ValidationError(DomainError): ...
class DuplicateDetectionError(DomainError): ...
class IntegrityCheckError(DomainError): ...

# Infrastructure Errors
class InfraError(NovelGuardError): ...
class FileSystemError(InfraError): ...
class DatabaseError(InfraError): ...
class EncodingDetectionError(InfraError): ...
```

#### ì‘ì—… ì²´í¬ë¦¬ìŠ¤íŠ¸

##### Step 3.2.1: ì—ëŸ¬ ê³„ì¸µ êµ¬ì¡° ì„¤ê³„
- [ ] í˜„ì¬ `common/errors.py`ì˜ ëª¨ë“  ì—ëŸ¬ í´ë˜ìŠ¤ ëª©ë¡ ì‘ì„±
- [ ] ê° ì—ëŸ¬ì˜ ì±…ì„ ë¶„ì„
  - [ ] Domain ì—ëŸ¬ì¸ê°€? (ë¹„ì¦ˆë‹ˆìŠ¤ ê·œì¹™ ìœ„ë°˜)
  - [ ] Infrastructure ì—ëŸ¬ì¸ê°€? (ê¸°ìˆ ì  ì‹¤íŒ¨)
- [ ] ê³„ì¸µ êµ¬ì¡° ì„¤ê³„ ë¬¸ì„œ ì‘ì„±

##### Step 3.2.2: Domain Errors ì •ì˜
- [ ] `common/errors.py` ì—…ë°ì´íŠ¸
  - [ ] `DomainError` ë² ì´ìŠ¤ í´ë˜ìŠ¤ ì¶”ê°€
  - [ ] `ValidationError(DomainError)` ì¶”ê°€
  - [ ] `DuplicateDetectionError(DomainError)` ì¶”ê°€
  - [ ] `IntegrityCheckError(DomainError)` ì¶”ê°€
  - [ ] ê¸°ì¡´ ë„ë©”ì¸ ê´€ë ¨ ì—ëŸ¬ë¥¼ ìƒˆ ê³„ì¸µìœ¼ë¡œ ì´ë™
- [ ] ê° ì—ëŸ¬ì— ì ì ˆí•œ ë©”ì‹œì§€ í¬ë§· ì¶”ê°€
- [ ] Docstring ì‘ì„±

##### Step 3.2.3: Infrastructure Errors ì •ì˜
- [ ] `common/errors.py` ì—…ë°ì´íŠ¸
  - [ ] `InfraError` ë² ì´ìŠ¤ í´ë˜ìŠ¤ ì¶”ê°€
  - [ ] `FileSystemError(InfraError)` ì¶”ê°€
  - [ ] `DatabaseError(InfraError)` ì¶”ê°€
  - [ ] `EncodingDetectionError(InfraError)` ì¶”ê°€
  - [ ] ê¸°ì¡´ ì¸í”„ë¼ ê´€ë ¨ ì—ëŸ¬ë¥¼ ìƒˆ ê³„ì¸µìœ¼ë¡œ ì´ë™
- [ ] ê° ì—ëŸ¬ì— ì ì ˆí•œ ë©”ì‹œì§€ í¬ë§· ì¶”ê°€
- [ ] Docstring ì‘ì„±

##### Step 3.2.4: ì—ëŸ¬ ì‚¬ìš©ì²˜ ì—…ë°ì´íŠ¸ ë° ë³€í™˜ íŒ¨í„´ ì •ì˜
- [ ] ì „ì²´ ì½”ë“œë² ì´ìŠ¤ì—ì„œ ì—ëŸ¬ ì‚¬ìš©ì²˜ ê²€ìƒ‰
- [ ] Domain ê³„ì¸µì—ì„œ `InfraError` ì‚¬ìš© ê¸ˆì§€ í™•ì¸
- [ ] Infrastructure ê³„ì¸µì—ì„œ `DomainError` ì§ì ‘ ë°œìƒ ê¸ˆì§€ í™•ì¸
- [ ] **í‘œì¤€ ì—ëŸ¬ ë³€í™˜ íŒ¨í„´ ì •ì˜** (Exception Mapping Table)
  - [ ] `common/errors/exception_mapping.py` ìƒì„± (ë˜ëŠ” `usecases/error_mapper.py`)
  - [ ] í‘œì¤€ ë³€í™˜ í…Œì´ë¸” ì‘ì„±:
    ```python
    # infra â†’ domain ì—ëŸ¬ ë³€í™˜ ë§¤í•‘
    EXCEPTION_MAPPING: dict[type[InfraError], type[DomainError]] = {
        FileSystemError: IntegrityCheckError,
        EncodingDetectionError: IntegrityCheckError,
        DatabaseError: ValidationError,
        # ...
    }
    
    def map_infra_error(error: InfraError) -> DomainError:
        """Infra ì—ëŸ¬ë¥¼ Domain ì—ëŸ¬ë¡œ ë³€í™˜."""
        error_type = EXCEPTION_MAPPING.get(type(error), DomainError)
        return error_type(str(error)) from error
    ```
  - [ ] UseCaseì—ì„œ í‘œì¤€ ë³€í™˜ í•¨ìˆ˜ ì‚¬ìš©
    ```python
    # usecases/scan_files.py
    def execute(self, root_path: Path) -> list[File]:
        try:
            return self.repository.find_all()
        except InfraError as e:
            raise map_infra_error(e)  # í‘œì¤€ ë³€í™˜ íŒ¨í„´
    ```
- [ ] ë‹¨ìœ„ í…ŒìŠ¤íŠ¸ ì‘ì„± (ì—ëŸ¬ ë³€í™˜ í…ŒìŠ¤íŠ¸ í¬í•¨)
- [ ] í†µí•© í…ŒìŠ¤íŠ¸ë¡œ ë™ì‘ í™•ì¸

##### Step 3.2.5: ì—ëŸ¬ í•¸ë“¤ë§ ê°€ì´ë“œ ë¬¸ì„œí™”
- [ ] ì—ëŸ¬ ê³„ì¸µ êµ¬ì¡° ë‹¤ì´ì–´ê·¸ë¨ ì‘ì„±
- [ ] ê° ê³„ì¸µì—ì„œ ì‚¬ìš© ê°€ëŠ¥í•œ ì—ëŸ¬ ëª…ì‹œ
- [ ] **í‘œì¤€ ì—ëŸ¬ ë³€í™˜ ê·œì¹™ ë¬¸ì„œí™”** (Exception Mapping Table í¬í•¨)
  - [ ] ë³€í™˜ ë§¤í•‘ í…Œì´ë¸” ë¬¸ì„œí™”
  - [ ] UseCaseì—ì„œì˜ ì‚¬ìš© ì˜ˆì‹œ ë¬¸ì„œí™”
  - [ ] ë³€í™˜ íŒ¨í„´ ì›ì¹™ ëª…ì‹œ (ì¼ê´€ì„± ìœ ì§€)
- [ ] `protocols/development_protocol.md` ì—…ë°ì´íŠ¸

#### ì˜ˆìƒ ì†Œìš” ì‹œê°„
- Step 3.2.1: 1ì‹œê°„
- Step 3.2.2: 2ì‹œê°„
- Step 3.2.3: 2ì‹œê°„
- Step 3.2.4: 3ì‹œê°„
- Step 3.2.5: 1ì‹œê°„
- **ì´ê³„**: 9ì‹œê°„

---

### Phase 3.3: Settings ë¶„ë¦¬

#### ëª©í‘œ
- ëŸ°íƒ€ì„ ì„¤ì •ê³¼ ë¶ˆë³€ ìƒìˆ˜ ë¶„ë¦¬
- í…ŒìŠ¤íŠ¸/ë°°í¬ í™˜ê²½ ë¶„ë¦¬ ì§€ì›
- íƒ€ì… ì•ˆì „ì„± í–¥ìƒ

#### Before
```python
# app/settings.py (í˜„ì¬)
# í™˜ê²½ ì„¤ì • + ê³ ì • ìƒìˆ˜ í˜¼í•©
```

#### After
```python
# app/settings/config.py (ëŸ°íƒ€ì„ ì„¤ì •)
class AppConfig(BaseModel):
    log_level: str
    db_path: Path
    max_workers: int
    ...

# app/settings/constants.py (ë¶ˆë³€ ìƒìˆ˜)
class Constants:
    MAX_FILE_SIZE = 100 * 1024 * 1024  # 100MB
    DEFAULT_ENCODING = "utf-8"
    ...
```

#### ì‘ì—… ì²´í¬ë¦¬ìŠ¤íŠ¸

##### Step 3.3.1: ì„¤ì • ë¶„ì„ ë° ë¶„ë¥˜
- [ ] `app/settings.py`ì˜ ëª¨ë“  ì„¤ì • í•­ëª© ëª©ë¡ ì‘ì„±
- [ ] ê° í•­ëª©ì˜ íŠ¹ì„± ë¶„ì„
  - [ ] ëŸ°íƒ€ì„ì— ë³€ê²½ ê°€ëŠ¥í•œê°€? â†’ `config.py`
  - [ ] ë¶ˆë³€ ìƒìˆ˜ì¸ê°€? â†’ `constants.py`
  - [ ] í™˜ê²½ë³„ë¡œ ë‹¤ë¥¸ê°€? â†’ í™˜ê²½ ë³€ìˆ˜ ì§€ì›
- [ ] ë¶„ë¥˜ ê³„íš ë¬¸ì„œ ì‘ì„±

##### Step 3.3.2: Constants ëª¨ë“ˆ ìƒì„±
- [ ] `src/app/settings/` ë””ë ‰í† ë¦¬ ìƒì„±
- [ ] `src/app/settings/__init__.py` ìƒì„±
- [ ] `src/app/settings/constants.py` ìƒì„±
  - [ ] `Constants` í´ë˜ìŠ¤ ì •ì˜ (ëª¨ë“  ì†ì„± ëŒ€ë¬¸ì)
  - [ ] íŒŒì¼ í¬ê¸° ì œí•œ
  - [ ] ê¸°ë³¸ ì¸ì½”ë”©
  - [ ] í•´ì‹œ ì•Œê³ ë¦¬ì¦˜
  - [ ] ê¸°íƒ€ ë¶ˆë³€ ê°’
- [ ] íƒ€ì… íŒíŒ… ëª…í™•íˆ
- [ ] Docstring ì‘ì„±

##### Step 3.3.3: Config ëª¨ë“ˆ ìƒì„±
- [ ] `src/app/settings/config.py` ìƒì„±
  - [ ] `AppConfig` Pydantic ëª¨ë¸ ì •ì˜
  - [ ] ëŸ°íƒ€ì„ ì„¤ì • í•„ë“œ ì •ì˜
  - [ ] í™˜ê²½ ë³€ìˆ˜ì—ì„œ ë¡œë“œí•˜ëŠ” ë¡œì§
  - [ ] ê¸°ë³¸ê°’ ì„¤ì •
- [ ] `load_config()` í•¨ìˆ˜ êµ¬í˜„
  - [ ] í™˜ê²½ ë³€ìˆ˜ ì½ê¸°
  - [ ] ì„¤ì • íŒŒì¼ ì½ê¸° (ì„ íƒì )
  - [ ] ê²€ì¦ ë° ê¸°ë³¸ê°’ ì ìš©
- [ ] ë‹¨ìœ„ í…ŒìŠ¤íŠ¸ ì‘ì„± (`tests/app/settings/test_config.py`)
- [ ] í†µí•© í…ŒìŠ¤íŠ¸ë¡œ ë™ì‘ í™•ì¸

##### Step 3.3.4: ì‚¬ìš©ì²˜ ì—…ë°ì´íŠ¸
- [ ] ì „ì²´ ì½”ë“œë² ì´ìŠ¤ì—ì„œ `app.settings` import ê²€ìƒ‰
- [ ] Constants ì‚¬ìš©ì²˜ëŠ” `constants.py`ë¡œ ë³€ê²½
- [ ] Config ì‚¬ìš©ì²˜ëŠ” `config.py`ë¡œ ë³€ê²½
- [ ] Bootstrapì—ì„œ Config ë¡œë“œ ë° ì£¼ì…
- [ ] ë‹¨ìœ„ í…ŒìŠ¤íŠ¸ ì‘ì„±
- [ ] í†µí•© í…ŒìŠ¤íŠ¸ë¡œ ë™ì‘ í™•ì¸

##### Step 3.3.5: í™˜ê²½ë³„ ì„¤ì • ì§€ì› (ì„ íƒì )
- [ ] `.env` íŒŒì¼ ì§€ì› (python-dotenv)
- [ ] `config.dev.toml`, `config.prod.toml` íŒŒì¼ ì§€ì›
- [ ] í™˜ê²½ ë³€ìˆ˜ë¡œ ì„¤ì • ì˜¤ë²„ë¼ì´ë“œ
- [ ] ë¬¸ì„œ ì—…ë°ì´íŠ¸

#### ì˜ˆìƒ ì†Œìš” ì‹œê°„
- Step 3.3.1: 1ì‹œê°„
- Step 3.3.2: 2ì‹œê°„
- Step 3.3.3: 3ì‹œê°„
- Step 3.3.4: 2ì‹œê°„
- Step 3.3.5: 2ì‹œê°„ (ì„ íƒì )
- **ì´ê³„**: 10ì‹œê°„ (ì„ íƒì  í¬í•¨ ì‹œ)

---

### Phase 3.4: Phase 3 í†µí•© í…ŒìŠ¤íŠ¸ ë° ê²€ì¦

#### ì‘ì—… ì²´í¬ë¦¬ìŠ¤íŠ¸

- [ ] ì „ì²´ ë‹¨ìœ„ í…ŒìŠ¤íŠ¸ ì‹¤í–‰ ë° í†µê³¼ í™•ì¸
- [ ] í†µí•© í…ŒìŠ¤íŠ¸ ì‹¤í–‰
- [ ] ìˆ˜ë™ í…ŒìŠ¤íŠ¸ ìˆ˜í–‰
  - [ ] ë¡œê¹… ë™ì‘ í™•ì¸
  - [ ] ì—ëŸ¬ í•¸ë“¤ë§ í™•ì¸
  - [ ] ì„¤ì • ë¡œë“œ í™•ì¸
- [ ] ì„±ëŠ¥ ë²¤ì¹˜ë§ˆí¬ ì‹¤í–‰
- [ ] ì½”ë“œ ì»¤ë²„ë¦¬ì§€ í™•ì¸
- [ ] ë¦°í„°/í¬ë§¤í„° ì‹¤í–‰
- [ ] íƒ€ì… ì²´í¬ ì‹¤í–‰
- [ ] ë¬¸ì„œ ë¦¬ë·°
- [ ] Git ì»¤ë°‹ ë° íƒœê·¸ ìƒì„± (`refactor/phase3-complete`)

#### ì˜ˆìƒ ì†Œìš” ì‹œê°„
- **ì´ê³„**: 3ì‹œê°„

---

## ğŸ¨ Phase 4: ì •ë¦¬ ë° ìµœì í™” (P3 - ì„ íƒì )

### Phase 4.1: `common/types.py` ì •ë¦¬

#### ëª©í‘œ
- íƒ€ì… ì •ì˜ì˜ ëª…í™•ì„± í–¥ìƒ
- Domain ê³„ì¸µìœ¼ë¡œì˜ ì´ë™ ê²€í†  (ValueObject ì „í™˜ ê°€ëŠ¥ì„±)

#### ì‘ì—… ì²´í¬ë¦¬ìŠ¤íŠ¸

- [ ] `common/types.py` ë‚´ìš© ë¶„ì„
- [ ] Domain ValueObjectë¡œ ì „í™˜ ê°€ëŠ¥í•œ íƒ€ì… ì‹ë³„
- [ ] ì „í™˜ ê°€ëŠ¥í•œ ê²ƒì€ ì´ë™, ë¶ˆê°€ëŠ¥í•œ ê²ƒì€ ìœ ì§€
- [ ] íƒ€ì… ì‚¬ìš©ì²˜ í™•ì¸ ë° ì—…ë°ì´íŠ¸
- [ ] ë‹¨ìœ„ í…ŒìŠ¤íŠ¸ ì‘ì„±
- [ ] ë¬¸ì„œ ì—…ë°ì´íŠ¸

#### ì˜ˆìƒ ì†Œìš” ì‹œê°„
- **ì´ê³„**: 3ì‹œê°„

---

### Phase 4.2: ì „ì²´ ì•„í‚¤í…ì²˜ ê²€ì¦

#### ëª©í‘œ
- Clean Architecture ì›ì¹™ ì¤€ìˆ˜ í™•ì¸
- ì˜ì¡´ì„± ë°©í–¥ ê²€ì¦
- ìˆœí™˜ ì˜ì¡´ì„± ì—†ìŒ í™•ì¸

#### ì‘ì—… ì²´í¬ë¦¬ìŠ¤íŠ¸

- [ ] ì˜ì¡´ì„± ê·¸ë˜í”„ ìƒì„± (`pydeps` ë“± ë„êµ¬ ì‚¬ìš©)
- [ ] ìˆœí™˜ ì˜ì¡´ì„± ê²€ì‚¬
- [ ] ê³„ì¸µ ê°„ ì˜ì¡´ì„± ë°©í–¥ ê²€ì¦
  - [ ] Domain â† UseCase â† Infrastructure/GUI
  - [ ] Domainì´ Infrastructureì— ì˜ì¡´í•˜ì§€ ì•ŠìŒ
- [ ] ìœ„ë°˜ ì‚¬í•­ ìˆ˜ì •
- [ ] ë¬¸ì„œ ì—…ë°ì´íŠ¸ (ì•„í‚¤í…ì²˜ ë‹¤ì´ì–´ê·¸ë¨)

#### ì˜ˆìƒ ì†Œìš” ì‹œê°„
- **ì´ê³„**: 4ì‹œê°„

---

### Phase 4.3: ìµœì¢… ê²€ì¦ ë° ë¬¸ì„œí™”

#### ì‘ì—… ì²´í¬ë¦¬ìŠ¤íŠ¸

- [ ] ì „ì²´ í…ŒìŠ¤íŠ¸ ìŠ¤ìœ„íŠ¸ ì‹¤í–‰
- [ ] ì„±ëŠ¥ ë²¤ì¹˜ë§ˆí¬ ì‹¤í–‰ ë° ë¦¬í¬íŠ¸ ì‘ì„±
- [ ] ì½”ë“œ ë©”íŠ¸ë¦­ìŠ¤ ìˆ˜ì§‘
  - [ ] ìˆœí™˜ ë³µì¡ë„
  - [ ] ì½”ë“œ ì»¤ë²„ë¦¬ì§€
  - [ ] ê¸°ìˆ  ë¶€ì±„ ì§€í‘œ
- [ ] ë¦¬íŒ©í† ë§ ë¦¬í¬íŠ¸ ì‘ì„±
  - [ ] ë³€ê²½ ì‚¬í•­ ìš”ì•½
  - [ ] Before/After ë¹„êµ
  - [ ] ì„±ëŠ¥ ì˜í–¥ ë¶„ì„
  - [ ] í–¥í›„ ê°œì„  ì‚¬í•­
- [ ] ë¬¸ì„œ ì—…ë°ì´íŠ¸
  - [ ] README.md
  - [ ] í”„ë¡œí† ì½œ ë¬¸ì„œ
  - [ ] ì•„í‚¤í…ì²˜ ë¬¸ì„œ
- [ ] íŒ€ ê³µìœ  ë° ë¦¬ë·°

#### ì˜ˆìƒ ì†Œìš” ì‹œê°„
- **ì´ê³„**: 5ì‹œê°„

---

## ğŸ“Š ì „ì²´ ì¼ì • ìš”ì•½

| Phase | ë‚´ìš© | ì˜ˆìƒ ì†Œìš” ì‹œê°„ | ìš°ì„ ìˆœìœ„ |
|-------|------|--------------|---------|
| **Phase 0** | ê¸°ë°˜ ì‘ì—… | 11ì‹œê°„ | P0 (ì„ ìˆ˜ ì‘ì—…) |
| Phase 0.5 | Golden Tests ë° ë²¤ì¹˜ë§ˆí¬ | 11ì‹œê°„ | |
| **Phase 1** | í­ë°œ ë°˜ê²½ ì œê±° | 40ì‹œê°„ | P0 (ì¦‰ì‹œ) |
| Phase 1.1 | GUI Orchestration ì œê±° ë° Bootstrap ë¶„ë¦¬ | 8ì‹œê°„ | **v1.4: ëª©ì  ë³€ê²½ (main.py â†’ main_window.py)** |
| Phase 1.15 | Ports ì •ì˜ ë° Infrastructure ë§ˆìŠ¤í‚¹ | 11ì‹œê°„ | **ì‹ ê·œ ì¶”ê°€** |
| Phase 1.2 | FileRecord Pydantic ì œê±° ë° êµ¬ì¡° ì •ë¦¬ | 18ì‹œê°„ | **v1.4: ëª©ì  ë³€ê²½ (God Model â†’ Pydantic ì œê±°)** |
| Phase 1.3 | Phase 1 ê²€ì¦ | 3ì‹œê°„ | |
| **Phase 2** | ë„ë©”ì¸ ì •ì œ | 38ì‹œê°„ | P1 (ìƒ) |
| Phase 2.1 | Domain Models ì¬ë¶„ë¥˜ | 17ì‹œê°„ | |
| Phase 2.2 | ë¡œì§ Service ì´ë™ | 18ì‹œê°„ | |
| Phase 2.3 | Phase 2 ê²€ì¦ | 3ì‹œê°„ | |
| **Phase 3** | ì¸í”„ë¼ ì •ë¦¬ | 31ì‹œê°„ | P1-P2 (ìƒ-ì¤‘) |
| Phase 3.1 | Logging ê³„ì¸µí™” | 9ì‹œê°„ | |
| Phase 3.2 | Error ê³„ì¸µí™” | 9ì‹œê°„ | |
| Phase 3.3 | Settings ë¶„ë¦¬ | 10ì‹œê°„ | |
| Phase 3.4 | Phase 3 ê²€ì¦ | 3ì‹œê°„ | |
| **Phase 4** | ì •ë¦¬ ë° ìµœì í™” | 12ì‹œê°„ | P3 (í•˜) |
| Phase 4.1 | Types ì •ë¦¬ | 3ì‹œê°„ | |
| Phase 4.2 | ì•„í‚¤í…ì²˜ ê²€ì¦ | 4ì‹œê°„ | |
| Phase 4.3 | ìµœì¢… ê²€ì¦ | 5ì‹œê°„ | |
| **ì´ê³„** | | **132ì‹œê°„** | (+22ì‹œê°„) |

> **ì°¸ê³ **: ì˜ˆìƒ ì†Œìš” ì‹œê°„ì€ ê°œë°œì 1ëª… ê¸°ì¤€ì´ë©°, ì‹¤ì œë¡œëŠ” ë¦¬ë·°, í…ŒìŠ¤íŠ¸, ë²„ê·¸ ìˆ˜ì • ì‹œê°„ì„ ê³ ë ¤í•˜ì—¬ 1.5~2ë°° ì—¬ìœ ë¥¼ ë‘ëŠ” ê²ƒì„ ê¶Œì¥í•©ë‹ˆë‹¤.

---

## ğŸš€ ì‹¤í–‰ ì „ ì²´í¬ë¦¬ìŠ¤íŠ¸

ë¦¬íŒ©í† ë§ì„ ì‹œì‘í•˜ê¸° ì „ì— ë‹¤ìŒ ì‚¬í•­ì„ í™•ì¸í•˜ì„¸ìš”:

### í™˜ê²½ ì¤€ë¹„
- [ ] Git ì €ì¥ì†Œ ë°±ì—… (ì›ê²© ì €ì¥ì†Œì— í‘¸ì‹œ)
- [ ] í˜„ì¬ ì½”ë“œë² ì´ìŠ¤ì— ëª¨ë“  í…ŒìŠ¤íŠ¸ í†µê³¼ í™•ì¸
- [ ] ì„±ëŠ¥ ë²¤ì¹˜ë§ˆí¬ ê¸°ì¤€ì„  ì¸¡ì • ë° ê¸°ë¡
- [ ] ì½”ë“œ ì»¤ë²„ë¦¬ì§€ ê¸°ì¤€ì„  ì¸¡ì • ë° ê¸°ë¡

### ë¸Œëœì¹˜ ì „ëµ
- [ ] `refactor/phase1-bootstrap` ë¸Œëœì¹˜ ìƒì„±
- [ ] ê° Phaseë³„ë¡œ ë³„ë„ ë¸Œëœì¹˜ ì‚¬ìš© ê³„íš ìˆ˜ë¦½
- [ ] ë©”ì¸ ë¸Œëœì¹˜ì™€ì˜ ë³‘í•© ì „ëµ ìˆ˜ë¦½

### í…ŒìŠ¤íŠ¸ ì „ëµ
- [ ] ê° Phase ì™„ë£Œ ì‹œì ì— í†µí•© í…ŒìŠ¤íŠ¸ ì‹¤í–‰ ê³„íš
- [ ] ìˆ˜ë™ í…ŒìŠ¤íŠ¸ ì‹œë‚˜ë¦¬ì˜¤ ë¬¸ì„œí™”
- [ ] íšŒê·€ í…ŒìŠ¤íŠ¸ ê³„íš ìˆ˜ë¦½

### ë¬¸ì„œí™”
- [ ] ë¦¬íŒ©í† ë§ ì§„í–‰ ìƒí™© ì¶”ì  ë°©ë²• (ì´ìŠˆ íŠ¸ë˜ì»¤, í”„ë¡œì íŠ¸ ë³´ë“œ ë“±)
- [ ] ë³€ê²½ ì‚¬í•­ ë¬¸ì„œí™” í…œí”Œë¦¿ ì¤€ë¹„
- [ ] íŒ€ ê³µìœ  ì¼ì • ìˆ˜ë¦½

---

## ğŸ“ ì§„í–‰ ìƒí™© ì¶”ì 

ê° Phaseì˜ ì§„í–‰ ìƒí™©ì„ ì¶”ì í•˜ê¸° ìœ„í•´ ë‹¤ìŒ í…œí”Œë¦¿ì„ ì‚¬ìš©í•˜ì„¸ìš”:

```markdown
## Phase X.X: [ì œëª©]

**ì‹œì‘ì¼**: YYYY-MM-DD  
**ì™„ë£Œì¼**: (ì§„í–‰ ì¤‘)  
**ìƒíƒœ**: ğŸŸ¡ ì§„í–‰ ì¤‘ / ğŸŸ¢ ì™„ë£Œ / ğŸ”´ ë¸”ë¡œí‚¹

### ì™„ë£Œëœ ì‘ì—…
- [x] ì‘ì—… 1
- [x] ì‘ì—… 2

### ì§„í–‰ ì¤‘ì¸ ì‘ì—…
- [ ] ì‘ì—… 3 (ì§„í–‰ë¥ : 50%)
- [ ] ì‘ì—… 4 (ì§„í–‰ë¥ : 20%)

### ë¸”ë¡œí‚¹ ì´ìŠˆ
- ì´ìŠˆ 1: ì„¤ëª… ë° í•´ê²° ë°©ì•ˆ

### ë‹¤ìŒ ë‹¨ê³„
- ì‘ì—… 5
- ì‘ì—… 6
```

---

## ğŸ“ í•™ìŠµ ìë£Œ ë° ì°¸ê³  ë¬¸ì„œ

### ë‚´ë¶€ ë¬¸ì„œ
- `protocols/development_protocol.md`: ê°œë°œ í”„ë¡œí† ì½œ
- `persona/novelguard_developer.md`: ê°œë°œì í˜ë¥´ì†Œë‚˜
- `NovelGuard_ì‹¤í–‰_ë¦¬í¬íŠ¸.md`: í˜„ì¬ êµ¬ì¡° ë¶„ì„

### ì™¸ë¶€ ì°¸ê³  ìë£Œ
- Clean Architecture (Robert C. Martin)
- Domain-Driven Design (Eric Evans)
- Refactoring (Martin Fowler)
- Python íƒ€ì… íŒíŒ… ê°€ì´ë“œ

---

## âœ… Definition of Done (DoD) - ì½”ë“œ êµ¬ì¡° ê´€ì 

ê° PhaseëŠ” ë‹¤ìŒ **êµ¬ì¡°ì  ê¸°ì¤€**ì„ ëª¨ë‘ ë§Œì¡±í•´ì•¼ ì™„ë£Œë¡œ ê°„ì£¼ë©ë‹ˆë‹¤:

### 1. ì•„í‚¤í…ì²˜ ê·œì¹™ ì¤€ìˆ˜

- [ ] **Domain ê³„ì¸µ**: ì™¸ë¶€ í”„ë ˆì„ì›Œí¬ import ê¸ˆì§€ í™•ì¸
  - [ ] `grep -r "from pydantic" domain/` ê²°ê³¼ ì—†ìŒ
  - [ ] `grep -r "from PySide6" domain/` ê²°ê³¼ ì—†ìŒ
  - [ ] `grep -r "import logging" domain/` ê²°ê³¼ ì—†ìŒ (í‘œì¤€ logging ëª¨ë“ˆ ì§ì ‘ ì‚¬ìš© ê¸ˆì§€)
  - [ ] `grep -r "from logging import" domain/` ê²°ê³¼ ì—†ìŒ (Portsë§Œ ì‚¬ìš©: `from domain.ports.logger import ILogger`)
- [ ] **UseCase ê³„ì¸µ**: gui/infra ì§ì ‘ import ê¸ˆì§€ í™•ì¸
  - [ ] `grep -r "from gui" usecases/` ê²°ê³¼ ì—†ìŒ
  - [ ] `grep -r "from infra" usecases/` ê²°ê³¼ ì—†ìŒ (Portsë§Œ import)
- [ ] **Infra ê³„ì¸µ**: domain/usecasesì˜ Portë§Œ êµ¬í˜„ í™•ì¸
  - [ ] ê° Infra í´ë˜ìŠ¤ê°€ Domain Portë¥¼ êµ¬í˜„í•˜ëŠ”ì§€ í™•ì¸
- [ ] **GUI ê³„ì¸µ**: usecase ì¸í„°í˜ì´ìŠ¤ë§Œ í˜¸ì¶œ í™•ì¸
  - [ ] GUIê°€ `infra/`ë¥¼ ì§ì ‘ importí•˜ì§€ ì•ŠëŠ”ì§€ í™•ì¸
  - [ ] Bootstrapì—ì„œë§Œ wiring í™•ì¸

### 2. ì˜ì¡´ì„± ë°©í–¥ ê²€ì¦

- [ ] ì˜ì¡´ì„± ê·¸ë˜í”„ ìƒì„± ë° ê²€ì¦
  - [ ] `pydeps src/ --show-deps --max-bacon=2` ì‹¤í–‰
  - [ ] ìˆœí™˜ ì˜ì¡´ì„± ì—†ìŒ í™•ì¸
  - [ ] ì˜ì¡´ì„± ë°©í–¥ì´ ì˜¬ë°”ë¥¸ì§€ í™•ì¸ (ì™¸ë¶€ â†’ ë‚´ë¶€)

### 3. ID ê¸°ë°˜ ì°¸ì¡° ì¤€ìˆ˜

- [ ] Domain ValueObjectì—ì„œ Entity ê°ì²´ ì§ì ‘ ì°¸ì¡° ì—†ìŒ í™•ì¸
  - [ ] `grep -r "file: File" domain/value_objects/` ê²°ê³¼ ì—†ìŒ
  - [ ] IDë§Œ ì‚¬ìš© (`file_id: int`) í™•ì¸

### 4. ê¸°ëŠ¥ ë™ë“±ì„±

- [ ] Golden Tests í†µê³¼ (Phase 0.5ì—ì„œ ìƒì„±í•œ ìŠ¤ëƒ…ìƒ· í…ŒìŠ¤íŠ¸)
- [ ] ê¸°ì¡´ ê¸°ëŠ¥ê³¼ ë™ì¼í•˜ê²Œ ë™ì‘ í™•ì¸
- [ ] í†µí•© í…ŒìŠ¤íŠ¸ í†µê³¼

### 5. ì„±ëŠ¥ ê¸°ì¤€ (êµ¬ì²´í™”)

ì„±ëŠ¥ ë²¤ì¹˜ë§ˆí¬ ê¸°ì¤€ì„  ëŒ€ë¹„ ë‹¤ìŒ í•­ëª©ì„ ëª¨ë‘ Â±5% ì´ë‚´ ìœ ì§€:

- [ ] **ìŠ¤ìº” ì²˜ë¦¬ëŸ‰**: `files/sec` (1000ê°œ íŒŒì¼ ê¸°ì¤€)
  - ì¸¡ì •: `benchmark_scan_throughput.py` ì‹¤í–‰
  - ê¸°ì¤€: `benchmark_baseline.json`ì˜ `scan_throughput.files_per_sec`
  - í—ˆìš©: ê¸°ì¤€ Â±5%
- [ ] **ì¤‘ë³µ íƒì§€ ì²˜ë¦¬ëŸ‰**: `groups/sec` (100ê°œ ê·¸ë£¹ ê¸°ì¤€)
  - ì¸¡ì •: `benchmark_duplicate_detection.py` ì‹¤í–‰
  - ê¸°ì¤€: `benchmark_baseline.json`ì˜ `duplicate_detection.groups_per_sec`
  - í—ˆìš©: ê¸°ì¤€ Â±5%
- [ ] **ë©”ëª¨ë¦¬ ì‚¬ìš©ëŸ‰**: peak RSS (MB)
  - ì¸¡ì •: `psutil` ë˜ëŠ” `memory_profiler` ì‚¬ìš©
  - ê¸°ì¤€: `benchmark_baseline.json`ì˜ `memory_peak_rss_mb`
  - í—ˆìš©: ê¸°ì¤€ Â±5% (ë‹¨, ì¦ê°€ëŠ” ìš°ë ¤ ëŒ€ìƒ)
  - **ê²Œì´íŠ¸ ë£°**: Â±5% ì´ˆê³¼ ì‹œ ê²½ê³  (soft gate), Â±10% ì´ˆê³¼ ì‹œ ì‹¤íŒ¨ (hard gate)
  - [ ] **ì‹¤íŒ¨ í›„ ì•¡ì…˜ (v1.3 ê·œì¹™)**:
    - **ë¡œì»¬ í™˜ê²½**: Â±10% ì´ˆê³¼ ì‹œ ê²½ê³ ë§Œ (ê°œë°œìì—ê²Œ ì•Œë¦¼, ì‘ì—… ê³„ì† ê°€ëŠ¥)
    - **CI í™˜ê²½**: Â±10% ì´ˆê³¼ ì‹œ **PR block** (ìë™ ë³‘í•© ì°¨ë‹¨)
    - **ì‹¤íŒ¨ ì‹œ ì¡°ì¹˜**:
      1. ì„±ëŠ¥ íšŒê·€ ì›ì¸ ë¶„ì„ (í”„ë¡œíŒŒì¼ë§ ì‹¤í–‰)
      2. ì´ìŠˆ ìƒì„± (ìë™ ë˜ëŠ” ìˆ˜ë™)
      3. ì´ì „ Phaseë¡œ ë¡¤ë°± ê²€í†  (í•„ìš” ì‹œ)
      4. ì„±ëŠ¥ ìµœì í™” ë˜ëŠ” Phase ì¬ì§„í–‰
- [ ] **CPU ì‹œê°„**: process time (ì´ˆ)
  - ì¸¡ì •: `time.process_time()` ì‚¬ìš©
  - ê¸°ì¤€: `benchmark_baseline.json`ì˜ `cpu_time_seconds`
  - í—ˆìš©: ê¸°ì¤€ Â±5%
  - **ê²Œì´íŠ¸ ë£°**: 
    - **ë¡œì»¬ í™˜ê²½**: Â±5% ì´ˆê³¼ ì‹œ ê²½ê³  (soft gate), Â±10% ì´ˆê³¼ ì‹œ ê²½ê³ ë§Œ (hard gate ì—†ìŒ)
    - **CI í™˜ê²½**: Â±5% ì´ˆê³¼ ì‹œ ê²½ê³ ë§Œ (soft gate, ì„±ëŠ¥ í¸ì°¨ ê³ ë ¤), Â±10% ì´ˆê³¼ ì‹œ **PR block** (hard gate)
    - **ì´ìœ **: CI í™˜ê²½ì˜ ì‹œìŠ¤í…œ ë¶€í•˜/ë¦¬ì†ŒìŠ¤ í¸ì°¨ë¥¼ ê³ ë ¤í•˜ì—¬ ë” ë„“ì€ í—ˆìš© ë²”ìœ„ ì ìš©
  - [ ] **ì‹¤íŒ¨ í›„ ì•¡ì…˜ (v1.3 ê·œì¹™)**:
    - **ë¡œì»¬ í™˜ê²½**: Â±10% ì´ˆê³¼ ì‹œ ê²½ê³ ë§Œ (ê°œë°œìì—ê²Œ ì•Œë¦¼, ì‘ì—… ê³„ì† ê°€ëŠ¥)
    - **CI í™˜ê²½**: Â±10% ì´ˆê³¼ ì‹œ **PR block** (ìë™ ë³‘í•© ì°¨ë‹¨)
    - **ì‹¤íŒ¨ ì‹œ ì¡°ì¹˜**:
      1. ì„±ëŠ¥ íšŒê·€ ì›ì¸ ë¶„ì„ (í”„ë¡œíŒŒì¼ë§ ì‹¤í–‰)
      2. ì´ìŠˆ ìƒì„± (ìë™ ë˜ëŠ” ìˆ˜ë™)
      3. ì´ì „ Phaseë¡œ ë¡¤ë°± ê²€í†  (í•„ìš” ì‹œ)
      4. ì„±ëŠ¥ ìµœì í™” ë˜ëŠ” Phase ì¬ì§„í–‰

### 6. í…ŒìŠ¤íŠ¸ ê¸°ì¤€

- [ ] ëª¨ë“  ë‹¨ìœ„/í†µí•© í…ŒìŠ¤íŠ¸ í†µê³¼
- [ ] ì½”ë“œ ì»¤ë²„ë¦¬ì§€: 80% ì´ìƒ ìœ ì§€ ë˜ëŠ” í–¥ìƒ
- [ ] Golden Tests í†µê³¼ (íšŒê·€ ì—†ìŒ)
- [ ] ì„±ëŠ¥ ë²¤ì¹˜ë§ˆí¬ í†µê³¼ (Â±5% ì´ë‚´)

### 7. ì½”ë“œ í’ˆì§ˆ

- [ ] ë¦°í„° í†µê³¼: `ruff check src/` (ê²½ê³  ì—†ìŒ)
- [ ] í¬ë§¤í„° ì ìš©: `ruff format src/`
- [ ] íƒ€ì… ì²´í¬ í†µê³¼: `mypy src/` (ì—ëŸ¬ ì—†ìŒ)
- [ ] Docstring ì‘ì„± (ëª¨ë“  ê³µê°œ í•¨ìˆ˜/í´ë˜ìŠ¤)

### 8. ë¬¸ì„œ ì—…ë°ì´íŠ¸

- [ ] ê´€ë ¨ ë¬¸ì„œ ì—…ë°ì´íŠ¸ ì™„ë£Œ
  - [ ] README.md
  - [ ] í”„ë¡œí† ì½œ ë¬¸ì„œ (`protocols/development_protocol.md`)
  - [ ] ì•„í‚¤í…ì²˜ ë‹¤ì´ì–´ê·¸ë¨ (í•„ìš” ì‹œ)
- [ ] Decision Log ì—…ë°ì´íŠ¸ (ì¤‘ìš”í•œ ì„¤ê³„ ê²°ì • ê¸°ë¡)

### 9. ë¦¬ë·° ì™„ë£Œ

- [ ] (íŒ€ì´ ìˆëŠ” ê²½ìš°) ì½”ë“œ ë¦¬ë·° ì™„ë£Œ
- [ ] ëª¨ë“  í”¼ë“œë°± ë°˜ì˜

---

## ğŸ“‹ Decision Log (ì¤‘ìš”í•œ ì„¤ê³„ ê²°ì • ê¸°ë¡)

ë¦¬íŒ©í† ë§ ì§„í–‰ ì¤‘ ë‚´ë¦° ì¤‘ìš”í•œ ì„¤ê³„ ê²°ì •ë“¤ì„ ê¸°ë¡í•©ë‹ˆë‹¤. ë‚˜ì¤‘ì— "ì™œ ì´ë ‡ê²Œ í–ˆì§€?"ë¥¼ ë°©ì§€í•˜ê¸° ìœ„í•œ ê²ƒì…ë‹ˆë‹¤.

### Decision 1: Domainì—ì„œ Pydantic ì‚¬ìš© ê¸ˆì§€
- **ë‚ ì§œ**: 2025-01-09
- **ê²°ì •**: Domain ê³„ì¸µì—ì„œ Pydantic ì‚¬ìš©ì„ ì ˆëŒ€ ê¸ˆì§€í•˜ê³  `dataclasses` ì‚¬ìš©
- **ì´ìœ **: 
  - Domainì´ íŠ¹ì • ë¼ì´ë¸ŒëŸ¬ë¦¬ì— ê°•í•˜ê²Œ ê²°í•©ë˜ëŠ” ê²ƒ ë°©ì§€
  - ìˆœìˆ˜ ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ë§Œ í¬í•¨
  - í…ŒìŠ¤íŠ¸ ì‹œ ì™¸ë¶€ ì˜ì¡´ì„± ìµœì†Œí™”
- **ëŒ€ì•ˆ ê³ ë ¤**: Pydantic ì‚¬ìš© í—ˆìš© (ê±°ë¶€ - ê²°í•©ë„ ì¦ê°€)
- **ì˜í–¥**: ëª¨ë“  Domain Entity/ValueObjectëŠ” `@dataclass` ì‚¬ìš©

### Decision 2: UseCases vs Workflows ì—­í•  êµ¬ë¶„
- **ë‚ ì§œ**: 2025-01-09
- **ê²°ì •**: 
  - `usecases/`: ë‹¨ì¼ ìœ ìŠ¤ì¼€ì´ìŠ¤, ì›ìì  (ë¡œì§ í¬í•¨)
  - `app/workflows/`: UseCase ì¡°í•©ë§Œ, ë¡œì§ ì¶”ê°€ ê¸ˆì§€
- **ì´ìœ **: 
  - ì±…ì„ ë¶„ë¦¬ ëª…í™•í™”
  - ë¡œì§ì´ ë‘ êµ°ë°ë¡œ ë¶„ì‚°ë˜ëŠ” ê²ƒ ë°©ì§€
  - UseCase ì¬ì‚¬ìš©ì„± í–¥ìƒ
- **ëŒ€ì•ˆ ê³ ë ¤**: Workflowsì— ë¡œì§ í¬í•¨ í—ˆìš© (ê±°ë¶€ - í˜¼ë€ ì¦ê°€)
- **ì˜í–¥**: ëª¨ë“  WorkflowëŠ” UseCase í˜¸ì¶œë§Œ ìˆ˜í–‰

### Decision 3: Policy vs Service ì—­í•  êµ¬ë¶„
- **ë‚ ì§œ**: 2025-01-09
- **ê²°ì •**: 
  - `domain/policies/`: ìˆœìˆ˜ ê·œì¹™ í•¨ìˆ˜ (stateless)
  - `domain/services/`: Policy ì¡°í•© ë° ë³µì¡í•œ ë¡œì§ (stateful ê°€ëŠ¥)
- **ì´ìœ **: 
  - ìˆœìˆ˜ í•¨ìˆ˜ë¡œ í…ŒìŠ¤íŠ¸ ìš©ì´ì„± í–¥ìƒ
  - ê·œì¹™ê³¼ ì¡°í•© ë¡œì§ ë¶„ë¦¬
- **ëŒ€ì•ˆ ê³ ë ¤**: Policy ì—†ì´ Serviceë§Œ ì‚¬ìš© (ê±°ë¶€ - í…ŒìŠ¤íŠ¸ ì–´ë ¤ì›€)
- **ì˜í–¥**: ë²„ì „ ì„ íƒ ë¡œì§ì€ Policy + Service êµ¬ì¡°ë¡œ ë¶„ë¦¬

### Decision 4: ID ê¸°ë°˜ ì°¸ì¡° ê°•ì œ
- **ë‚ ì§œ**: 2025-01-09
- **ê²°ì •**: Domain ê°ì²´ ê°„ ì°¸ì¡°ëŠ” ë°˜ë“œì‹œ IDë§Œ ì‚¬ìš©, ê°ì²´ ì°¸ì¡° ê¸ˆì§€
- **ì´ìœ **: 
  - ìˆœí™˜ ì˜ì¡´ì„± ë°©ì§€
  - ë¶ˆë³€ì„± ë³´ì¥ (ValueObjectê°€ Entity ì°¸ì¡° ì‹œ ë¶ˆë³€ì„± ê¹¨ì§)
  - í…ŒìŠ¤íŠ¸ ìš©ì´ì„±
- **ëŒ€ì•ˆ ê³ ë ¤**: ê°ì²´ ì°¸ì¡° í—ˆìš© (ê±°ë¶€ - ìˆœí™˜ ì˜ì¡´ì„± ìœ„í—˜)
- **ì˜í–¥**: ëª¨ë“  ValueObjectëŠ” Entity IDë§Œ í¬í•¨

### Decision 5: Ports ì •ì˜ ìš°ì„ ìˆœìœ„
- **ë‚ ì§œ**: 2025-01-09
- **ê²°ì •**: Phase 1.15ì—ì„œ Ports ì •ì˜ ë° Infrastructure ë§ˆìŠ¤í‚¹ì„ FileRecord ë¶„í•´ ì „ì— ìˆ˜í–‰
- **ì´ìœ **: 
  - FileRecord ë¶„í•´ ì‹œ ì´ë¯¸ ì˜ì¡´ì„± ì—­ì „ì´ ì™„ë£Œë˜ì–´ ë” ê¹”ë”í•œ êµ¬ì¡°
  - Domainì´ Infrastructureì— ì˜ì¡´í•˜ì§€ ì•Šë„ë¡ ë³´ì¥
- **ëŒ€ì•ˆ ê³ ë ¤**: FileRecord ë¶„í•´ í›„ Ports ì •ì˜ (ê±°ë¶€ - ì˜ì¡´ì„± ë¬¸ì œ ë°œìƒ)
- **ì˜í–¥**: Phase 1.2ì—ì„œ FileRecord ë¶„í•´ ì‹œ ì´ë¯¸ Ports ì‚¬ìš© ê°€ëŠ¥

### Decision 6: Golden Tests ë„ì…
- **ë‚ ì§œ**: 2025-01-09
- **ê²°ì •**: Phase 0.5ì—ì„œ Golden Tests(ìŠ¤ëƒ…ìƒ· í…ŒìŠ¤íŠ¸) ë° ë²¤ì¹˜ë§ˆí¬ ê¸°ì¤€ì„  ê³ ì •
- **ì´ìœ **: 
  - íšŒê·€ ë°©ì§€
  - ë¦¬íŒ©í† ë§ ì¤‘ ë™ì‘ ë™ë“±ì„± ë³´ì¥
  - ì„±ëŠ¥ íšŒê·€ ê°ì§€
- **ëŒ€ì•ˆ ê³ ë ¤**: ì¼ë°˜ í…ŒìŠ¤íŠ¸ë§Œ ì‚¬ìš© (ê±°ë¶€ - íšŒê·€ ê°ì§€ ì–´ë ¤ì›€)
- **ì˜í–¥**: ëª¨ë“  Phaseì—ì„œ Golden Tests í†µê³¼ í•„ìˆ˜

### Decision 7: Domain Service ë¡œê¹… ì„ íƒì  ì›ì¹™
- **ë‚ ì§œ**: 2025-01-09
- **ê²°ì •**: Domain ServiceëŠ” **ìƒíƒœ/íŒì •ì— í•„ìˆ˜ì ì¸ ê²½ìš°ì—ë§Œ ILoggerë¥¼ ì£¼ì…**. "ì˜ì‚¬ê²°ì •/íŒì •/ê·œì¹™" Serviceì—ëŠ” ë¡œê¹… ê¸ˆì§€.
- **ì´ìœ **: 
  - Domainì´ "ì‚¬ì‹¤ìƒ Application-aware"ê°€ ë˜ëŠ” ê²ƒ ë°©ì§€
  - í…ŒìŠ¤íŠ¸ì—ì„œ ë¶ˆí•„ìš”í•œ mock í™•ì‚° ë°©ì§€
  - ìˆœìˆ˜ ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ì— ì§‘ì¤‘
- **ëŒ€ì•ˆ ê³ ë ¤**: ëª¨ë“  Domain Serviceì— logger ì£¼ì… (ê±°ë¶€ - ê³¼ë„í•œ ì˜ì¡´ì„±)
- **ì˜í–¥**: 
  - ë¡œê¹…ì´ í•„ìš”í•œ Serviceë§Œ ìƒì„±ìì—ì„œ ILogger ë°›ìŒ
  - íŒì • Service(VersionSelectionService ë“±)ëŠ” logger ì—†ìŒ
  - I/O Service(FileComparisonService ë“±)ë§Œ logger ì‚¬ìš©

### Decision 8: Port ë³€ê²½ ì‹œ Decision Log í•„ìˆ˜
- **ë‚ ì§œ**: 2025-01-09
- **ê²°ì •**: Port ë³€ê²½ ì‹œ **ë°˜ë“œì‹œ Decision Logì— ê¸°ë¡**. PortëŠ” "Domain í•„ìš”" ê¸°ì¤€ìœ¼ë¡œë§Œ í™•ì¥.
- **ì´ìœ **: 
  - Port ë¹„ëŒ€í™” ë°©ì§€ (í™•ì¥ ì••ë ¥ì— ëŒ€í•œ ê°€ë“œ)
  - Port ë³€ê²½ ì¶”ì  ê°€ëŠ¥
  - ì¼ê´€ì„± ìœ ì§€
- **ëŒ€ì•ˆ ê³ ë ¤**: Port ë³€ê²½ ììœ  (ê±°ë¶€ - ë¹„ëŒ€í™” ìœ„í—˜)
- **ì˜í–¥**: 
  - ëª¨ë“  Port ë³€ê²½ì€ Decision Logì— ê¸°ë¡
  - Phaseë³„ ë¦¬ë·° ì‹œì ì—ë§Œ Port ë³€ê²½ í—ˆìš©

### Decision 9: Phase ë³‘ë ¬ ì‹¤í–‰ ê¸ˆì§€
- **ë‚ ì§œ**: 2025-01-09
- **ê²°ì •**: ë¦¬íŒ©í† ë§ PhaseëŠ” **ìˆœì°¨ ì‹¤í–‰ ì „ì œ**. Phase ë³‘ë ¬ ì‹¤í–‰ ì ˆëŒ€ ê¸ˆì§€.
- **ì´ìœ **: 
  - ì˜ì¡´ì„± ì²´ì¸ ê´€ë¦¬ (ê° Phaseê°€ ì´ì „ Phase êµ¬ì¡°ì— ì˜ì¡´)
  - íšŒê·€ ê°ì§€ (Golden Testsê°€ ê° Phase ì™„ë£Œ ì‹œì  ê¸°ì¤€)
  - ë¦¬ìŠ¤í¬ ê²©ë¦¬ (ë¬¸ì œ ë°œìƒ ì‹œ ì´ì „ Phaseë¡œ ë¡¤ë°± ê°€ëŠ¥)
- **ëŒ€ì•ˆ ê³ ë ¤**: Phase ë³‘ë ¬ ì‹¤í–‰ (ê±°ë¶€ - ì˜ì¡´ì„± ì¶©ëŒ ìœ„í—˜)
- **ì˜í–¥**: 
  - ê° PhaseëŠ” ì´ì „ Phase ì™„ë£Œë¥¼ í•„ìˆ˜ ì „ì œë¡œ í•¨
  - "Phase 1.2 í•˜ë©´ì„œ Phase 3 ì¡°ê¸ˆ..." ê°™ì€ ì‹œë„ ê¸ˆì§€ 

---

## ğŸ”„ ë°˜ë³µ ë° ê°œì„ 

ì´ ê³„íšì„œëŠ” ë¦¬íŒ©í† ë§ ì§„í–‰ ì¤‘ ë°œê²¬ë˜ëŠ” ì‚¬í•­ì— ë”°ë¼ ì—…ë°ì´íŠ¸ë  ìˆ˜ ìˆìŠµë‹ˆë‹¤:

- ìƒˆë¡œìš´ ë¦¬ìŠ¤í¬ ë°œê²¬ ì‹œ ì¶”ê°€
- ì‘ì—… ë²”ìœ„ ì¡°ì • ì‹œ ì†Œìš” ì‹œê°„ ì¬ê³„ì‚°
- ìš°ì„ ìˆœìœ„ ë³€ê²½ ì‹œ Phase ìˆœì„œ ì¡°ì •
- ì¤‘ìš”í•œ ì„¤ê³„ ê²°ì •ì€ Decision Logì— ê¸°ë¡

---

## ğŸ’¡ íŒ ë° ê¶Œì¥ì‚¬í•­

1. **ì‘ì€ ë‹¨ìœ„ë¡œ ì§„í–‰**: í•œ ë²ˆì— í•˜ë‚˜ì˜ íŒŒì¼/ëª¨ë“ˆì”© ë¦¬íŒ©í† ë§
2. **í…ŒìŠ¤íŠ¸ ìš°ì„ **: ë¦¬íŒ©í† ë§ ì „ì— í…ŒìŠ¤íŠ¸ë¥¼ ì‘ì„±í•˜ê±°ë‚˜ ë³´ê°•
3. **ì ì§„ì  ë§ˆì´ê·¸ë ˆì´ì…˜**: ê¸°ì¡´ ì½”ë“œë¥¼ í•œ ë²ˆì— êµì²´í•˜ì§€ ë§ê³  ì–´ëŒ‘í„° íŒ¨í„´ í™œìš©
4. **ìì£¼ ì»¤ë°‹**: ê° ë‹¨ê³„ ì™„ë£Œ ì‹œì ì— ì˜ë¯¸ ìˆëŠ” ì»¤ë°‹ ë©”ì‹œì§€ì™€ í•¨ê»˜ ì»¤ë°‹
5. **ë¬¸ì„œí™”**: ë³€ê²½ ì‚¬í•­ê³¼ ê²°ì • ì´ìœ ë¥¼ ë¬¸ì„œí™”í•˜ì—¬ í–¥í›„ ì°¸ê³ 
6. **ì„±ëŠ¥ ëª¨ë‹ˆí„°ë§**: ë¦¬íŒ©í† ë§ ì¤‘ì—ë„ ì„±ëŠ¥ ì§€í‘œë¥¼ ì£¼ê¸°ì ìœ¼ë¡œ í™•ì¸
7. **íŒ€ ì†Œí†µ**: (íŒ€ì´ ìˆëŠ” ê²½ìš°) ì§„í–‰ ìƒí™©ê³¼ ë¸”ë¡œí‚¹ ì´ìŠˆë¥¼ ì •ê¸°ì ìœ¼ë¡œ ê³µìœ 

---

---

**ë¬¸ì„œ ë²„ì „**: 1.4  
**ì‘ì„±ì**: AI Assistant  
**ê²€í† ì**: ì†Œí”„íŠ¸ì›¨ì–´ ì•„í‚¤í…íŠ¸ (ì½”ë“œ í˜„ì‹¤ ë°˜ì˜)  
**ìŠ¹ì¸ì**: (í•„ìš”ì‹œ)  
**ë§ˆì§€ë§‰ ì—…ë°ì´íŠ¸**: 2025-01-09 (v1.4)

---

## ğŸ“Œ ì½”ë“œ í˜„ì‹¤ ê¸°ë°˜ ê²€ì¦ ê²°ê³¼ (v1.4)

### ì‹¤ì œ ì½”ë“œ ë¶„ì„ ê¸°ì¤€ ê²€ì¦ ì™„ë£Œ

#### P0 ìš°ì„ ìˆœìœ„ ì¬ì¡°ì • ì™„ë£Œ
- âœ… **`gui/views/main_window.py`**: ì‹¤ì œ í­ë°œ ë°˜ê²½ í™•ì¸ (2398ì¤„, 60ê°œ ë©”ì„œë“œ)
  - GUIê°€ `domain/`, `infra/`, `common/logging` ì§ì ‘ import í™•ì¸
  - orchestration + ì„œë¹„ìŠ¤ ìƒì„± + ë¡œì§ í˜¼ì¬ í™•ì¸
  - **11ê°œ GUI íŒŒì¼**ì—ì„œ domain/infra ì§ì ‘ import í™•ì¸
- âœ… **`app/main.py`**: ì‹¤ì œë¡œ ë§¤ìš° ë‹¨ìˆœ (36ì¤„) â†’ P0ì—ì„œ ì œì™¸, ì •ë¦¬ ëŒ€ìƒìœ¼ë¡œ ì¬ë¶„ë¥˜
  - sys.path hack ë¬¸ì œë§Œ ë‚¨ì•„ ìˆìŒ
- âœ… **UseCase infra ì§ì ‘ import**: **4ê°œ íŒŒì¼**ì—ì„œ í™•ì¸
  - `scan_files.py`, `check_integrity.py`, `find_duplicates.py`, `build_action_plan.py`
  - Phase 1.15ì˜ í•„ìš”ì„± ì¬í™•ì¸

#### Phase ëª©ì  ì¬ì •ì˜ ì™„ë£Œ
- âœ… **Phase 1.1**: "`app/main.py` ìŠ¬ë¦¼í™”" â†’ "`gui/views/main_window.py` orchestration ì œê±°"ë¡œ ë³€ê²½
- âœ… **Phase 1.2**: "God Model í•´ì†Œ" â†’ "Pydantic ì œê±° ë° êµ¬ì¡° ì •ë¦¬"ë¡œ ë³€ê²½
  - ì‹¤ì œ `file_record.py`ëŠ” 70ì¤„ë¡œ ì‘ê³  ë©”ì„œë“œë„ ê±°ì˜ ì—†ìŒ (property 1ê°œë§Œ)
  - "God Model" í‘œí˜„ ë¶€ì ì ˆ â†’ Pydantic ì˜ì¡´ì„± ì œê±°ê°€ ì£¼ìš” ëª©í‘œ

#### ê¸°ìˆ ì  ê°œì„  ì™„ë£Œ
- âœ… **Workflow êµ¬ì¡° í…ŒìŠ¤íŠ¸**: ë¬¸ìì—´ ê²€ì‚¬ â†’ **AST ê¸°ë°˜ ê²€ì¦**ìœ¼ë¡œ ë³€ê²½
  - ì£¼ì„/ë¬¸ìì—´/í¬ë§·íŒ…ì— ì˜í•œ ì˜¤íƒ ë°©ì§€
  - `ast.If`, `ast.For`, `ast.While`, `ast.ListComp` ë“± ëª…ì‹œì  ê²€ì‚¬
- âœ… **Ports í…ŒìŠ¤íŠ¸**: `@runtime_checkable` ë°ì½”ë ˆì´í„° ëª…ì‹œ (í•„ìˆ˜!)
  - `isinstance(impl, IPort)` ê²€ì‚¬ê°€ ë™ì‘í•˜ë ¤ë©´ ë°˜ë“œì‹œ í•„ìš”
  - ëª¨ë“  Port ì •ì˜ì— ì¶”ê°€ ì˜ˆì‹œ í¬í•¨
- âœ… **ì„±ëŠ¥ ê²Œì´íŠ¸**: CI í™˜ê²½ í¸ì°¨ ê³ ë ¤ì‚¬í•­ ì¶”ê°€
  - CI ì„±ëŠ¥ ì¸¡ì •ì€ "ê²½í–¥ì„± ê°ì§€(ê²½ê³ )" ì¤‘ì‹¬
  - hard gateëŠ” ì „ìš© runner/ê³ ì • ë¦¬ì†ŒìŠ¤ í™˜ê²½ì—ì„œë§Œ ê°•í•˜ê²Œ ì„¤ì • ì˜µì…˜ ì¶”ê°€

### ì‹¤ì œ ì½”ë“œ ê¸°ë°˜ ì²´í¬ë¦¬ìŠ¤íŠ¸ (ì¶”ê°€ í™•ì¸ í•„ìš”)

ì›í•˜ë©´, í˜„ì¬ ì½”ë“œ ê¸°ì¤€ìœ¼ë¡œ ì•„ë˜ë¥¼ **ì •í™•í•œ ë¦¬ìŠ¤íŠ¸**ë¡œ ë½‘ì•„ë“œë¦´ ìˆ˜ ìˆìŠµë‹ˆë‹¤:

- âœ… `gui/`ì—ì„œ **domain/infra ì§ì ‘ import**í•˜ëŠ” íŒŒì¼ ëª©ë¡ (11ê°œ íŒŒì¼ í™•ì¸ë¨)
- âœ… `usecases/`ì—ì„œ **infra ì§ì ‘ import**í•˜ëŠ” ë¼ì¸ ëª©ë¡ (4ê°œ íŒŒì¼ í™•ì¸ë¨ - Phase 1.15 ì „í™˜ ëŒ€ìƒ)
- âœ… `domain/models/`ì—ì„œ **Pydantic ì‚¬ìš© ëª¨ë¸ ëª©ë¡** (`file_record.py` í™•ì¸ë¨ - Phase 2ì—ì„œ ëŒ€ëŸ‰ ë§ˆì´ê·¸ë ˆì´ì…˜ í•„ìš”)
- âœ… ì‹¤ì œ ì½”ë“œ ë³µì¡ë„ ë¶„ì„ (ë©”ì„œë“œ ìˆ˜/ë¼ì¸ ìˆ˜/ìˆœí™˜ ì˜ì¡´ ìœ„í—˜ë„ ê¸°ë°˜)

**ì°¸ê³ **: ë‹¤ë¥¸ Domain ëª¨ë¸ë“¤(`duplicate_group`, `candidate_edge`, `evidence`, `integrity_issue`)ì€ ëª¨ë‘ dataclass ì‚¬ìš©ìœ¼ë¡œ í™•ì¸ë¨. Pydantic ì œê±° ëŒ€ìƒì€ `file_record.py`ê°€ ì£¼ìš” ëŒ€ìƒì´ë©°, Phase 2ì—ì„œ ëŒ€ëŸ‰ ë§ˆì´ê·¸ë ˆì´ì…˜ê³¼ í•¨ê»˜ ì§„í–‰í•˜ëŠ” ê²ƒì´ í˜„ì‹¤ì ì…ë‹ˆë‹¤.

---

## ğŸ“Œ v1.4 ì£¼ìš” ë³€ê²½ì‚¬í•­ (ì½”ë“œ í˜„ì‹¤ ë°˜ì˜ ë° ì •í™•ì„± í–¥ìƒ)

### ì½”ë“œ ê¸°ë°˜ ê²€ì¦ ë°˜ì˜
- âœ… **P0 ìš°ì„ ìˆœìœ„ ìˆ˜ì •**: `app/main.py`ëŠ” ì‹¤ì œë¡œ 36ì¤„ë¡œ ë§¤ìš° ë‹¨ìˆœ â†’ P0ì—ì„œ ì œì™¸
  - **ì‹¤ì œ í­ë°œ ë°˜ê²½**: `gui/views/main_window.py` (2398ì¤„, 60ê°œ ë©”ì„œë“œ) â†’ P0 íƒ€ê²Ÿìœ¼ë¡œ ë³€ê²½
  - `gui/views/main_window.py`ê°€ domain/infra ì§ì ‘ importí•˜ëŠ” ë¬¸ì œ í™•ì¸ (11ê°œ GUI íŒŒì¼ì—ì„œ í™•ì¸)
- âœ… **Phase 1.1 ì¬ì •ì˜**: `app/main.py` ìŠ¬ë¦¼í™” â†’ `gui/views/main_window.py` orchestration ì œê±°ë¡œ ë³€ê²½
  - Bootstrapì—ì„œ ì˜ì¡´ì„± ì£¼ì… (GUI ì§ì ‘ ìƒì„± ê¸ˆì§€)
  - sys.path hack ì œê±°
- âœ… **Phase 1.2 ëª©ì  ì¬ì •ì˜**: "God Model í•´ì†Œ" â†’ "Pydantic ì œê±° ë° êµ¬ì¡° ì •ë¦¬"ë¡œ ë³€ê²½
  - ì‹¤ì œ `file_record.py`ëŠ” 70ì¤„ë¡œ ì‘ê³  ë©”ì„œë“œë„ ê±°ì˜ ì—†ìŒ (property 1ê°œë§Œ)
  - "God Model" í‘œí˜„ ë¶€ì ì ˆ â†’ Pydantic ì˜ì¡´ì„± ì œê±°ê°€ ì£¼ìš” ëª©í‘œ
  - Phase 2ì—ì„œ ë‹¤ë¥¸ Domain ëª¨ë¸ë“¤ê³¼ í•¨ê»˜ ëŒ€ëŸ‰ ë§ˆì´ê·¸ë ˆì´ì…˜ìœ¼ë¡œ ì¬ì¡°ì •
- âœ… **Workflow êµ¬ì¡° í…ŒìŠ¤íŠ¸ ê°œì„ **: ë¬¸ìì—´ ê²€ì‚¬(`inspect.getsource()`) â†’ **AST ê¸°ë°˜ ê²€ì¦**ìœ¼ë¡œ ë³€ê²½
  - ì£¼ì„/ë¬¸ìì—´/í¬ë§·íŒ…ì— ì˜í•œ ì˜¤íƒ ë°©ì§€
  - íŒŒì´ì¬ ë¬¸ë²• ë³€í™”ì—ë„ ë” ì•ˆì •ì 
  - `ast.If`, `ast.For`, `ast.While`, `ast.ListComp` ë“± ê¸ˆì§€ ë…¸ë“œ ëª…ì‹œì  ê²€ì‚¬
- âœ… **Ports í…ŒìŠ¤íŠ¸ ì˜ˆì‹œ ìˆ˜ì •**: `@runtime_checkable` ë°ì½”ë ˆì´í„° ëª…ì‹œ (í•„ìˆ˜!)
  - `isinstance(impl, IPort)` ê²€ì‚¬ê°€ ë™ì‘í•˜ë ¤ë©´ ë°˜ë“œì‹œ í•„ìš”
  - ëª¨ë“  Port ì •ì˜ì— `@runtime_checkable` ì¶”ê°€ ì˜ˆì‹œ í¬í•¨
- âœ… **UseCase infra ì§ì ‘ import í™•ì¸**: 4ê°œ íŒŒì¼ì—ì„œ í™•ì¸ (`scan_files.py`, `check_integrity.py`, `find_duplicates.py`, `build_action_plan.py`)
  - Phase 1.15ì˜ í•„ìš”ì„± ì¬í™•ì¸ ë° ìš°ì„ ìˆœìœ„ ê°•í™”

### ìš°ì„ ìˆœìœ„ ë§¤íŠ¸ë¦­ìŠ¤ ì¬ì¡°ì •
- **P0 (ì¦‰ì‹œ)**: `gui/views/main_window.py` (ì‹¤ì œ í­ë°œ ë°˜ê²½)
- **P0 (ì¦‰ì‹œ)**: ë£¨íŠ¸ `main.py` ì—”íŠ¸ë¦¬í¬ì¸íŠ¸ ì •ë¦¬ (sys.path hack ì œê±°)
- **P0 (ì¦‰ì‹œ)**: UseCaseì˜ infra ì§ì ‘ ì˜ì¡´ ì œê±° (Phase 1.15)
- **P1 (ìƒ)**: `domain/models/file_record.py` Pydantic ì œê±° (Phase 2ì—ì„œ ëŒ€ëŸ‰ ë§ˆì´ê·¸ë ˆì´ì…˜ê³¼ í•¨ê»˜)

---

## ğŸ“Œ v1.3 ì£¼ìš” ë³€ê²½ì‚¬í•­ (ì”ì—¬ ë¦¬ìŠ¤í¬ ë³´ì • ë° ìµœì¢… ê·œì¹™ ê³ ì •)

### R1-R7 ì”ì—¬ ë¦¬ìŠ¤í¬ ë³´ì •
- âœ… **R1**: Domain Service ë¡œê¹… ì„ íƒì  ì›ì¹™ ê³ ì • (ìƒíƒœ/íŒì •ì— í•„ìˆ˜ì ì¸ ê²½ìš°ì—ë§Œ ì£¼ì…)
- âœ… **R2**: Workflow êµ¬ì¡° í…ŒìŠ¤íŠ¸ ê°•ì œ (ìë™í™”ëœ êµ¬ì¡° ê²€ì¦ í…ŒìŠ¤íŠ¸ ì¶”ê°€)
- âœ… **R3**: Port ë³€ê²½ ê°€ë“œ ê·œì¹™ ì¶”ê°€ (Decision Log í•„ìˆ˜, Domain í•„ìš” ê¸°ì¤€)
- âœ… **R4**: Adapter ì œê±° ê¸°ì¤€ ë° ì‹œì  ëª…ì‹œ (Phase 2.3 ì™„ë£Œ ì‹œì )
- âœ… **R5**: Entity ë³€ê²½ ê°€ëŠ¥ì„± ê·œì¹™ ëª…í™•í™” (í—ˆìš©/ê¸ˆì§€ ë²”ìœ„ êµ¬ì²´í™”)
- âœ… **R6**: ì„±ëŠ¥ ê²Œì´íŠ¸ ì‹¤íŒ¨ í›„ ì•¡ì…˜ ëª…ì‹œ (ë¡œì»¬/CI í™˜ê²½ë³„ ì°¨ì´, PR block ê·œì¹™)
- âœ… **R7**: Phase ë³‘ë ¬ ì‹¤í–‰ ê¸ˆì§€ ê·œì¹™ ì¶”ê°€ (ìˆœì°¨ ì‹¤í–‰ ì „ì œ ëª…ë¬¸í™”)

### ìµœì¢… ê·œì¹™ 5ê°œ ê³ ì •
- âœ… **ê·œì¹™ 1**: Workflow êµ¬ì¡° í…ŒìŠ¤íŠ¸ ê°•ì œ (**AST ê¸°ë°˜ ìë™ ê²€ì¦**, v1.4 ì—…ë°ì´íŠ¸: ë¬¸ìì—´ ê²€ì‚¬ â†’ AST ê²€ì‚¬)
- âœ… **ê·œì¹™ 2**: Domain Service ë¡œê¹… ìµœì†Œí™” ì›ì¹™ (ì˜ì‚¬ê²°ì • ServiceëŠ” ë¡œê¹… ê¸ˆì§€)
- âœ… **ê·œì¹™ 3**: Port ë³€ê²½ ì‹œ Decision Log í•„ìˆ˜ (Port ë¹„ëŒ€í™” ë°©ì§€)
- âœ… **ê·œì¹™ 4**: Adapter ì œê±° Phase ëª…ì‹œ (Phase 2.3 ì™„ë£Œ ì‹œì )
- âœ… **ê·œì¹™ 5**: Phase ë³‘ë ¬ ì‹¤í–‰ ê¸ˆì§€ (ìˆœì°¨ ì‹¤í–‰ ì „ì œ)

### Decision Log ì¶”ê°€
- âœ… Decision 7: Domain Service ë¡œê¹… ì„ íƒì  ì›ì¹™
- âœ… Decision 8: Port ë³€ê²½ ì‹œ Decision Log í•„ìˆ˜
- âœ… Decision 9: Phase ë³‘ë ¬ ì‹¤í–‰ ê¸ˆì§€

---

## ğŸ“Œ v1.2 ì£¼ìš” ë³€ê²½ì‚¬í•­ (êµ¬ì¡°ì  ì¶©ëŒ í•´ì†Œ)

### P0 ì´ìŠˆ í•´ì†Œ (ì¦‰ì‹œ ìˆ˜ì •)
- âœ… íƒ€ê²Ÿ ì•„í‚¤í…ì²˜ íŠ¸ë¦¬ì—ì„œ `app/` ì¤‘ë³µ ì œê±° (182-189ì¤„ ì‚­ì œ)
- âœ… `ILogger` ì¸í„°í˜ì´ìŠ¤ë¥¼ `domain/ports/logger.py`ë¡œ ì´ë™ (ì›ì¹™ ì¼ì¹˜)
- âœ… `DuplicateGroup`ì— `File` ì—”í‹°í‹° ë¦¬ìŠ¤íŠ¸ í¬í•¨ â†’ `file_ids: list[int]`ë§Œ í¬í•¨ìœ¼ë¡œ ë³€ê²½ (ID-only ì›ì¹™ ì¼ì¹˜)

### P1 ì´ìŠˆ í•´ì†Œ
- âœ… Golden Snapshot ì •ê·œí™” ê·œì¹™ ì¶”ê°€ (ìˆœì„œ/ê²½ë¡œ/ë¹„ê²°ì • í•„ë“œ/ìˆ«ì ë°˜ì˜¬ë¦¼)
- âœ… ë¶ˆë³€ Aggregate ìš´ìš© ê·œì¹™ ì¶”ê°€ (`with_*()` í•¨ìˆ˜í˜• ì—…ë°ì´íŠ¸ íŒ¨í„´)

### ì†Œê·œëª¨ ì •ë¦¬
- âœ… Ports ìœ„ì¹˜ ëª…í™•í™”: `domain/ports/`ë¡œ í†µì¼ (í˜¼ë€ ë°©ì§€)
- âœ… Ports ì •ì˜ ë£° ì¶”ê°€: ê¸°ì¡´ êµ¬í˜„ì²´ APIë¥¼ ìŠ¤ìº”í•˜ì—¬ ì¶”ì¶œ (í™•ì •ê°’ ë°•ì§€ ì•ŠìŒ)
- âœ… Freeze Zoneì— ë²„ê·¸ ìˆ˜ì • PR ë¶„ë¦¬ ê·œì¹™ ì¶”ê°€
- âœ… DoDì— ì„±ëŠ¥ ê²Œì´íŠ¸ ë£° êµ¬ì²´í™” (ë¡œì»¬/CI í™˜ê²½ë³„)
- âœ… Domain ê³„ì¸µì˜ logging import ê¸ˆì§€ ê·œì¹™ ëª…í™•í™” (Portsë§Œ ì‚¬ìš©)

---

## ğŸ“Œ v1.1 ì£¼ìš” ë³€ê²½ì‚¬í•­ (ë¦¬ë·° ë°˜ì˜)

### êµ¬ì¡°ì  ìœ„í—˜ í•´ì†Œ
- âœ… Domainì—ì„œ Pydantic ì‚¬ìš© ê¸ˆì§€ ëª…ì‹œ (í•µì‹¬ ì„¤ê³„ ì›ì¹™ ì¶”ê°€)
- âœ… ê²½ê³„ ê·œì¹™ ëª…ë¬¸í™” (GUI â†” UseCase â†” Domain â†” Infra)
- âœ… ID ê¸°ë°˜ ì°¸ì¡° ì›ì¹™ ê°•í™” (ìˆœí™˜ ì˜ì¡´ì„± ë°©ì§€)
- âœ… Ports ì •ì˜ ë‹¨ê³„ ì¶”ê°€ (Phase 1.15)

### ì‹¤í–‰ ê°€ëŠ¥ì„± í–¥ìƒ
- âœ… Phase 0.5 ì¶”ê°€ (Golden Tests ë° ë²¤ì¹˜ë§ˆí¬ ê¸°ì¤€ì„ )
- âœ… workflows vs usecases ì—­í•  êµ¬ë¶„ ëª…í™•í™”
- âœ… Policy vs Service ì—­í•  ì •ë¦¬
- âœ… ì„±ëŠ¥ ì¸¡ì • ê¸°ì¤€ êµ¬ì²´í™” (4ê°œ í•­ëª©)

### í†µì œ í•­ëª© ì¶”ê°€
- âœ… Freeze Zone ì„¹ì…˜ ì¶”ê°€ (ë³€ê²½ ê¸ˆì§€ êµ¬ì—­ ì •ì˜)
- âœ… Definition of Done (DoD) êµ¬ì²´í™” (9ê°œ í•­ëª©)
- âœ… Decision Log ì„¹ì…˜ ì¶”ê°€ (ì¤‘ìš”í•œ ì„¤ê³„ ê²°ì • ê¸°ë¡)
- âœ… ë‹¨ì¼ ì—”íŠ¸ë¦¬í¬ì¸íŠ¸ ì›ì¹™ ëª…ì‹œ

### ë¬¸ì„œ í’ˆì§ˆ ê°œì„ 
- âœ… ë¬¸ì„œ ë²„ì „ ê´€ë¦¬ ì„¹ì…˜ ì¶”ê°€
- âœ… íƒ€ê²Ÿ ì•„í‚¤í…ì²˜ì— ports ì¶”ê°€
- âœ… ì˜ˆì‹œ ì½”ë“œì— ê²½ê³„ ê·œì¹™ ë°˜ì˜
